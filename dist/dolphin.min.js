!function t(e,n,r){function o(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return o(n?n:t)},l,l.exports,t,e,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,e,n){"use strict";var r=t("chai").expect,o=t("sinon"),i=0,s=1,a=2,u=t("../../src/classrepo.js").ClassRepository;describe("ClassRepository primitive properties",function(){var t=null,e=null;beforeEach(function(){t=new u,e={id:"ComplexClass",attributes:[{propertyName:"booleanProperty",onValueChange:function(){}},{propertyName:"floatProperty",onValueChange:function(){}},{propertyName:"integerProperty",onValueChange:function(){}},{propertyName:"stringProperty",onValueChange:function(){}}]},t.registerClass(e)}),it("should initialize",o.test(function(){var e={presentationModelType:"ComplexClass",attributes:[{propertyName:"booleanProperty",tag:opendolphin.Tag.value(),onValueChange:function(){}},{propertyName:"floatProperty",tag:opendolphin.Tag.value(),onValueChange:function(){}},{propertyName:"integerProperty",tag:opendolphin.Tag.value(),onValueChange:function(){}},{propertyName:"stringProperty",tag:opendolphin.Tag.value(),onValueChange:function(){}}]},n=t.load(e);r(n.booleanProperty).to.be["null"],r(n.floatProperty).to.be["null"],r(n.integerProperty).to.be["null"],r(n.stringProperty).to.be["null"]})),it("can be set from opendolphin",o.test(function(){e={id:"TypedComplexClass",attributes:[{propertyName:"booleanProperty",onValueChange:o.stub().yields({oldValue:i,newValue:s})},{propertyName:"floatProperty",onValueChange:o.stub().yields({oldValue:i,newValue:s})},{propertyName:"integerProperty",onValueChange:o.stub().yields({oldValue:i,newValue:s})},{propertyName:"stringProperty",onValueChange:o.stub().yields({oldValue:i,newValue:s})}]},t.registerClass(e);var n={presentationModelType:"TypedComplexClass",attributes:[{propertyName:"booleanProperty",tag:opendolphin.Tag.value(),onValueChange:this.stub().yields({oldValue:null,newValue:!0})},{propertyName:"floatProperty",tag:opendolphin.Tag.value(),onValueChange:this.stub().yields({oldValue:null,newValue:3.1415})},{propertyName:"integerProperty",tag:opendolphin.Tag.value(),onValueChange:this.stub().yields({oldValue:null,newValue:42})},{propertyName:"stringProperty",tag:opendolphin.Tag.value(),onValueChange:this.stub().yields({oldValue:null,newValue:"Hello World"})}]},a=t.load(n);r(a.booleanProperty).to.be["true"],r(a.floatProperty).to.equal(3.1415),r(a.integerProperty).to.equal(42),r(a.stringProperty).to.equal("Hello World")})),it("boolean can be set from user",o.test(function(e){var n={propertyName:"booleanProperty",tag:opendolphin.Tag.value(),onValueChange:function(){},setValue:function(t){r(t).to.be["true"],e()}},o={presentationModelType:"ComplexClass",attributes:[n],findAttributeByPropertyName:this.stub().withArgs("booleanProperty").returns(n)},i=t.load(o);i.booleanProperty=!0,Platform.performMicrotaskCheckpoint()})),it("float can be set from user",o.test(function(e){var n={propertyName:"floatProperty",tag:opendolphin.Tag.value(),onValueChange:function(){},setValue:function(t){r(t).to.be.closeTo(2.7182,1e-6),e()}},o={presentationModelType:"ComplexClass",attributes:[n],findAttributeByPropertyName:this.stub().withArgs("floatProperty").returns(n)},i=t.load(o);i.floatProperty=2.7182,Platform.performMicrotaskCheckpoint()})),it("integer can be set from user",o.test(function(e){var n={propertyName:"integerProperty",tag:opendolphin.Tag.value(),onValueChange:function(){},setValue:function(t){r(t).to.equal(4711),e()}},o={presentationModelType:"ComplexClass",attributes:[n],findAttributeByPropertyName:this.stub().withArgs("integerProperty").returns(n)},i=t.load(o);i.integerProperty=4711,Platform.performMicrotaskCheckpoint()})),it("string can be set from user",o.test(function(e){var n={propertyName:"stringProperty",tag:opendolphin.Tag.value(),onValueChange:function(){},setValue:function(t){r(t).to.equal("Good Bye!"),e()}},o={presentationModelType:"ComplexClass",attributes:[n],findAttributeByPropertyName:this.stub().withArgs("stringProperty").returns(n)},i=t.load(o);i.stringProperty="Good Bye!",Platform.performMicrotaskCheckpoint()}))}),describe("ClassRepository Dolphin Bean properties",function(){var t=null,e=null,n=null,s=null;beforeEach(function(){t=new u;var r={id:"SimpleClass",attributes:[{propertyName:"text",onValueChange:function(){}}]};t.registerClass(r),s={id:"ComplexClass",attributes:[{propertyName:"reference",onValueChange:function(){}}]},t.registerClass(s);var o={id:"id1",presentationModelType:"SimpleClass",attributes:[{propertyName:"textProperty",tag:opendolphin.Tag.value(),onValueChange:function(){}}]};e=t.load(o);var i={id:"id2",presentationModelType:"SimpleClass",attributes:[{propertyName:"textProperty",tag:opendolphin.Tag.value(),onValueChange:function(){}}]};n=t.load(i)}),it("should initialize",o.test(function(){var e={presentationModelType:"ComplexClass",attributes:[{propertyName:"reference",tag:opendolphin.Tag.value(),onValueChange:function(){}}]},n=t.load(e);r(n.reference).to.be["null"]})),it("can be set from opendolphin",o.test(function(){s={id:"TypedComplexClass",attributes:[{propertyName:"reference",onValueChange:this.stub().yields({oldValue:i,newValue:a})}]},t.registerClass(s);var n={presentationModelType:"TypedComplexClass",attributes:[{propertyName:"reference",tag:opendolphin.Tag.value(),onValueChange:this.stub().yields({oldValue:null,newValue:"id1"})}]},o=t.load(n);r(o.reference).to.equal(e)})),it("reference can be set from user",o.test(function(e){var o={propertyName:"reference",tag:opendolphin.Tag.value(),onValueChange:function(){},setValue:function(t){r(t).to.equal(n),e()}},i={presentationModelType:"ComplexClass",attributes:[o],findAttributeByPropertyName:this.stub().withArgs("reference").returns(o)},s=t.load(i);s.reference=n,Platform.performMicrotaskCheckpoint()}))}),describe("ClassRepository.mapParamToDolphin()",function(){it("undefined",function(){var t=new u,e=t.mapParamToDolphin(void 0);r(e).to.have.property("value",void 0),r(e).to.have.property("type",i)}),it("null",function(){var t=new u,e=t.mapParamToDolphin(null);r(e).to.have.property("value",null),r(e).to.have.property("type",i)}),it("boolean true",function(){var t=new u,e=t.mapParamToDolphin(!0);r(e).to.have.property("value",!0),r(e).to.have.property("type",s)}),it("boolean false",function(){var t=new u,e=t.mapParamToDolphin(!1);r(e).to.have.property("value",!1),r(e).to.have.property("type",s)}),it("number 0",function(){var t=new u,e=t.mapParamToDolphin(0);r(e).to.have.property("value",0),r(e).to.have.property("type",s)}),it("number positive integer",function(){var t=new u,e=t.mapParamToDolphin(42);r(e).to.have.property("value",42),r(e).to.have.property("type",s)}),it("number negative float",function(){var t=new u,e=t.mapParamToDolphin(-.1);r(e).to.have.property("value",-.1),r(e).to.have.property("type",s)}),it("string",function(){var t=new u,e=t.mapParamToDolphin("42");r(e).to.have.property("value","42"),r(e).to.have.property("type",s)}),it("string (empty)",function(){var t=new u,e=t.mapParamToDolphin("");r(e).to.have.property("value",""),r(e).to.have.property("type",s)}),it("Dolphin Bean",function(){}),it("arbitrary object",function(){var t=new u;r(function(){t.mapParamToDolphin({})}).to["throw"](TypeError)}),it("array",function(){var t=new u;r(function(){t.mapParamToDolphin([])}).to["throw"](TypeError)}),it("function",function(){var t=new u;r(function(){t.mapParamToDolphin(function(){})}).to["throw"](TypeError)})})},{"../../src/classrepo.js":94,chai:33,sinon:67}],2:[function(t,e,n){"use strict";var r=t("sinon"),o=t("../../src/dolphin.js").connect;describe("Dolphin Message Distribution",function(){var t=null,e=null,n={onModelStoreChange:function(e){t=e}},i={getClientModelStore:function(){return n},deletePresentationModel:function(){}};beforeEach(r.test(function(){if(this.stub(opendolphin,"dolphin").returns(i),e=o("http://localhost"),"function"!=typeof t)throw new Error("Initialisation of opendolphin failed")})),afterEach(function(){e.shutdown()}),it("should call registerClass()",r.test(function(){e.classRepository.registerClass=this.spy();var n={presentationModelType:"@@@ DOLPHIN_BEAN @@@",findAttributeByPropertyName:this.stub().withArgs("@@@ SOURCE_SYSTEM @@@").returns({value:"server"})};t({clientPresentationModel:n,eventType:"ADDED"}),r.assert.calledWith(e.classRepository.registerClass,n)})),it("should call unregisterClass()",r.test(function(){e.classRepository.unregisterClass=this.spy();var n={presentationModelType:"@@@ DOLPHIN_BEAN @@@",findAttributeByPropertyName:this.stub().withArgs("@@@ SOURCE_SYSTEM @@@").returns({value:"server"})};t({clientPresentationModel:n,eventType:"REMOVED"}),r.assert.calledWith(e.classRepository.unregisterClass,n)})),it("should call load()",r.test(function(){e.classRepository.load=this.stub().returns({});var n={presentationModelType:"SomeClass",findAttributeByPropertyName:this.stub().withArgs("@@@ SOURCE_SYSTEM @@@").returns({value:"server"})};t({clientPresentationModel:n,eventType:"ADDED"}),r.assert.calledWith(e.classRepository.load,n)})),it("should call unload()",r.test(function(){e.classRepository.unload=this.stub().returns({});var n={presentationModelType:"SomeClass",findAttributeByPropertyName:this.stub().withArgs("@@@ SOURCE_SYSTEM @@@").returns({value:"server"})};t({clientPresentationModel:n,eventType:"REMOVED"}),r.assert.calledWith(e.classRepository.unload,n)})),it("should call addListEntry()",r.test(function(){e.classRepository.addListEntry=this.spy(),this.spy(i,"deletePresentationModel");var n={presentationModelType:"@@@ LIST_ADD @@@",findAttributeByPropertyName:this.stub().withArgs("@@@ SOURCE_SYSTEM @@@").returns({value:"server"})};t({clientPresentationModel:n,eventType:"ADDED"}),r.assert.calledWith(e.classRepository.addListEntry,n),r.assert.calledWith(i.deletePresentationModel,n)})),it("should call delListEntry()",r.test(function(){e.classRepository.delListEntry=this.spy(),this.spy(i,"deletePresentationModel");var n={presentationModelType:"@@@ LIST_DEL @@@",findAttributeByPropertyName:this.stub().withArgs("@@@ SOURCE_SYSTEM @@@").returns({value:"server"})};t({clientPresentationModel:n,eventType:"ADDED"}),r.assert.calledWith(e.classRepository.delListEntry,n),r.assert.calledWith(i.deletePresentationModel,n)})),it("should call setListEntry()",r.test(function(){e.classRepository.setListEntry=this.spy(),this.spy(i,"deletePresentationModel");var n={presentationModelType:"@@@ LIST_SET @@@",findAttributeByPropertyName:this.stub().withArgs("@@@ SOURCE_SYSTEM @@@").returns({value:"server"})};t({clientPresentationModel:n,eventType:"ADDED"}),r.assert.calledWith(e.classRepository.setListEntry,n),r.assert.calledWith(i.deletePresentationModel,n)}))}),describe("Dolphin Event Handling",function(){var t=null,e=null;beforeEach(r.test(function(){var n={onModelStoreChange:function(e){t=e}};if(this.stub(opendolphin,"dolphin").returns({getClientModelStore:function(){return n}}),e=o("http://localhost"),"function"!=typeof t)throw new Error("Initialisation of opendolphin failed")})),afterEach(function(){e.shutdown()}),it("should call onAdded-handler for class",r.test(function(){var n={};e.classRepository.load=this.stub().returns(n);var o={presentationModelType:"SomeClass",findAttributeByPropertyName:this.stub().withArgs("@@@ SOURCE_SYSTEM @@@").returns({value:"server"})},i=this.spy();e.onAdded("SomeClass",i),t({clientPresentationModel:o,eventType:"ADDED"}),r.assert.calledWith(i,n)})),it("should not call onAdded-handler for other class",r.test(function(){var n={};e.classRepository.load=this.stub().returns(n);var o={presentationModelType:"SomeClass",findAttributeByPropertyName:this.stub().withArgs("@@@ SOURCE_SYSTEM @@@").returns({value:"server"})},i=this.spy();e.onAdded("SomeOtherClass",i),t({clientPresentationModel:o,eventType:"ADDED"}),r.assert.notCalled(i)})),it("should call generic onAdded-handler",r.test(function(){var n={};e.classRepository.load=this.stub().returns(n);var o={presentationModelType:"SomeClass",findAttributeByPropertyName:this.stub().withArgs("@@@ SOURCE_SYSTEM @@@").returns({value:"server"})},i=this.spy();e.onAdded(i),t({clientPresentationModel:o,eventType:"ADDED"}),r.assert.calledWith(i,n)})),it("should call onRemoved-handler for class",r.test(function(){var n={};e.classRepository.unload=this.stub().returns(n);var o={presentationModelType:"SomeClass",findAttributeByPropertyName:this.stub().withArgs("@@@ SOURCE_SYSTEM @@@").returns({value:"server"})},i=this.spy();e.onRemoved("SomeClass",i),t({clientPresentationModel:o,eventType:"REMOVED"}),r.assert.calledWith(i,n)})),it("should not call onRemoved-handler for other class",r.test(function(){var n={};e.classRepository.unload=this.stub().returns(n);var o={presentationModelType:"SomeClass",findAttributeByPropertyName:this.stub().withArgs("@@@ SOURCE_SYSTEM @@@").returns({value:"server"})},i=this.spy();e.onRemoved("SomeOtherClass",i),t({clientPresentationModel:o,eventType:"REMOVED"}),r.assert.notCalled(i)})),it("should call generic onRemoved-handler",r.test(function(){var n={};e.classRepository.unload=this.stub().returns(n);var o={presentationModelType:"SomeClass",findAttributeByPropertyName:this.stub().withArgs("@@@ SOURCE_SYSTEM @@@").returns({value:"server"})},i=this.spy();e.onRemoved(i),t({clientPresentationModel:o,eventType:"REMOVED"}),r.assert.calledWith(i,n)}))}),describe("Dolphin Command",function(){var t=null,e=null;beforeEach(r.test(function(){var n={onModelStoreChange:function(t){}};e={getClientModelStore:function(){return n},attribute:function(){},presentationModel:function(){},send:function(){}},this.stub(opendolphin,"dolphin").returns(e),t=o("http://localhost")})),afterEach(function(){t.shutdown()}),it("should send command without parameters",r.test(function(){this.spy(e,"send"),t.send("myCommand"),r.assert.calledWith(e.send,"myCommand")})),it("should send command with one named parameter",r.test(function(){t.classRepository.mapParamToDolphin=this.stub().withArgs(42).returns({value:42,type:"number"});var n=this.stub(e,"attribute"),o={},i={},s={};n.withArgs("@@@ SOURCE_SYSTEM @@@",null,"client").returns(o),n.withArgs("x",null,42,"VALUE").returns(i),n.withArgs("x",null,"number","VALUE_TYPE").returns(s),this.spy(e,"presentationModel"),this.spy(e,"send"),t.send("myCommand",{x:42}),r.assert.calledWith(e.presentationModel,null,"@@@ DOLPHIN_PARAMETER @@@",o,i,s),r.assert.calledWith(e.send,"myCommand")}))})},{"../../src/dolphin.js":95,sinon:67}],3:[function(t,e,n){"use strict";var r=t("chai").expect,o=t("sinon"),i=0,s=1,a=2,u=t("../../src/classrepo.js").ClassRepository;describe("List Sync primitives from OpenDolphin",function(){var t=null,e=null;beforeEach(function(){t=new u;var n={id:"SourceClass",attributes:[{propertyName:"primitiveList",onValueChange:o.stub().yields({oldValue:i,newValue:s})}]};t.registerClass(n);var r={id:"source_id",presentationModelType:"SourceClass",attributes:[{propertyName:"primitiveList",tag:opendolphin.Tag.value(),onValueChange:function(){}}],findAttributeByPropertyName:function(){}};e=t.load(r)}),it("should add entries",o.test(function(){var n={findAttributeByPropertyName:this.stub()},o={value:"source_id"},i={value:"primitiveList"},s={value:0},a={value:1};n.findAttributeByPropertyName.withArgs("source").returns(o),n.findAttributeByPropertyName.withArgs("attribute").returns(i),n.findAttributeByPropertyName.withArgs("pos").returns(s),n.findAttributeByPropertyName.withArgs("element").returns(a),t.addListEntry(n),r(e.primitiveList).to.deep.equal([1]),s.value=1,a.value=2,t.addListEntry(n),r(e.primitiveList).to.deep.equal([1,2]),a.value=3,t.addListEntry(n),r(e.primitiveList).to.deep.equal([1,3,2])})),it("should remove entries",o.test(function(){e.primitiveList=[1,2,3];var n={findAttributeByPropertyName:this.stub()},o={value:"source_id"},i={value:"primitiveList"},s={value:1},a={value:2};n.findAttributeByPropertyName.withArgs("source").returns(o),n.findAttributeByPropertyName.withArgs("attribute").returns(i),n.findAttributeByPropertyName.withArgs("from").returns(s),n.findAttributeByPropertyName.withArgs("to").returns(a),t.delListEntry(n),r(e.primitiveList).to.deep.equal([1,3]),t.delListEntry(n),r(e.primitiveList).to.deep.equal([1]),s.value=0,a.value=1,t.delListEntry(n),r(e.primitiveList).to.deep.equal([])})),it("should update entries",o.test(function(){e.primitiveList=[1,2,3];var n={findAttributeByPropertyName:this.stub()},o={value:"source_id"},i={value:"primitiveList"},s={value:1},a={value:42};n.findAttributeByPropertyName.withArgs("source").returns(o),n.findAttributeByPropertyName.withArgs("attribute").returns(i),n.findAttributeByPropertyName.withArgs("pos").returns(s),n.findAttributeByPropertyName.withArgs("element").returns(a),t.setListEntry(n),r(e.primitiveList).to.deep.equal([1,42,3]),s.value=2,a.value=43,t.setListEntry(n),r(e.primitiveList).to.deep.equal([1,42,43]),s.value=0,a.value=41,t.setListEntry(n),r(e.primitiveList).to.deep.equal([41,42,43])}))}),describe("List Sync reference lists from OpenDolphin",function(){var t=null,e=null,n=null,s=null,c=null;beforeEach(function(){t=new u;var r={id:"SimpleClass",attributes:[{propertyName:"text",onValueChange:function(){}}]};t.registerClass(r);var l={id:"ComplexClass",attributes:[{propertyName:"referenceList",onValueChange:o.stub().yields({oldValue:i,newValue:a})}]};t.registerClass(l);var f={id:"source_id",presentationModelType:"ComplexClass",attributes:[{propertyName:"referenceList",tag:opendolphin.Tag.value(),onValueChange:function(){}}],findAttributeByPropertyName:function(){}};e=t.load(f);var p={id:"id1",presentationModelType:"SimpleClass",attributes:[{propertyName:"textProperty",tag:opendolphin.Tag.value(),onValueChange:function(){}}]};n=t.load(p);var h={id:"id2",presentationModelType:"SimpleClass",attributes:[{propertyName:"textProperty",tag:opendolphin.Tag.value(),onValueChange:function(){}}]};s=t.load(h);var d={id:"id3",presentationModelType:"SimpleClass",attributes:[{propertyName:"textProperty",tag:opendolphin.Tag.value(),onValueChange:function(){}}]};c=t.load(d)}),it("should add entries",o.test(function(){var o={findAttributeByPropertyName:this.stub()},i={value:"source_id"},a={value:"referenceList"},u={value:0},l={value:"id1"};o.findAttributeByPropertyName.withArgs("source").returns(i),o.findAttributeByPropertyName.withArgs("attribute").returns(a),o.findAttributeByPropertyName.withArgs("pos").returns(u),o.findAttributeByPropertyName.withArgs("element").returns(l),t.addListEntry(o),r(e.referenceList).to.deep.equal([n]),u.value=1,l.value="id2",t.addListEntry(o),r(e.referenceList).to.deep.equal([n,s]),l.value="id3",t.addListEntry(o),r(e.referenceList).to.deep.equal([n,c,s])})),it("should remove entries",o.test(function(){e.referenceList=[n,s,c];var o={findAttributeByPropertyName:this.stub()},i={value:"source_id"},a={value:"referenceList"},u={value:1},l={value:2};o.findAttributeByPropertyName.withArgs("source").returns(i),o.findAttributeByPropertyName.withArgs("attribute").returns(a),o.findAttributeByPropertyName.withArgs("from").returns(u),o.findAttributeByPropertyName.withArgs("to").returns(l),t.delListEntry(o),r(e.referenceList).to.deep.equal([n,c]),t.delListEntry(o),r(e.referenceList).to.deep.equal([n]),u.value=0,l.value=1,t.delListEntry(o),r(e.referenceList).to.deep.equal([])})),it("should update entries",o.test(function(){e.primitiveList=[n,s,c];var o={id:"id11",presentationModelType:"SimpleClass",attributes:[{propertyName:"textProperty",tag:opendolphin.Tag.value(),onValueChange:function(){}}]},i=t.load(o),a={id:"id12",presentationModelType:"SimpleClass",attributes:[{propertyName:"textProperty",tag:opendolphin.Tag.value(),onValueChange:function(){}}]},u=t.load(a),l={id:"id13",presentationModelType:"SimpleClass",attributes:[{propertyName:"textProperty",tag:opendolphin.Tag.value(),onValueChange:function(){}}]},f=t.load(l),p={findAttributeByPropertyName:this.stub()},h={value:"source_id"},d={value:"referenceList"},y={value:1},g={value:u};p.findAttributeByPropertyName.withArgs("source").returns(h),p.findAttributeByPropertyName.withArgs("attribute").returns(d),p.findAttributeByPropertyName.withArgs("pos").returns(y),p.findAttributeByPropertyName.withArgs("element").returns(g),t.setListEntry(p),r(e.primitiveList).to.deep.equal([n,u,c]),y.value=2,g.value=f,t.setListEntry(p),r(e.primitiveList).to.deep.equal([n,u,f]),y.value=0,g.value=i,t.setListEntry(p),r(e.primitiveList).to.deep.equal([i,u,f])}))})},{"../../src/classrepo.js":94,chai:33,sinon:67}],4:[function(t,e,n){"use strict";var r=t("chai").expect,o=t("../../src/utils.js").exists;describe("utils.exists()",function(){it("undefined",function(){r(o(void 0)).to.be["false"]}),it("null",function(){r(o(null)).to.be["false"]}),it("boolean",function(){r(o(!1)).to.be["true"]}),it("number",function(){r(o(0)).to.be["true"]}),it("string",function(){r(o("")).to.be["true"]}),it("object",function(){r(o({})).to.be["true"]}),it("array",function(){r(o([])).to.be["true"]}),it("function",function(){r(o(function(){})).to.be["true"]})})},{"../../src/utils.js":97,chai:33}],5:[function(t,e,n){t("../modules/es6.string.iterator"),t("../modules/web.dom.iterable"),t("../modules/es6.map"),e.exports=t("../modules/$").core.Map},{"../modules/$":15,"../modules/es6.map":22,"../modules/es6.string.iterator":23,"../modules/web.dom.iterable":24}],6:[function(t,e,n){function r(t,e,n){if(!t)throw TypeError(n?e+n:e)}var o=t("./$");r.def=o.assertDefined,r.fn=function(t){if(!o.isFunction(t))throw TypeError(t+" is not a function!");return t},r.obj=function(t){if(!o.isObject(t))throw TypeError(t+" is not an object!");return t},r.inst=function(t,e,n){if(!(t instanceof e))throw TypeError(n+": use the 'new' operator!");return t},e.exports=r},{"./$":15}],7:[function(t,e,n){function r(t){return s.call(t).slice(8,-1)}var o=t("./$"),i=t("./$.wks")("toStringTag"),s={}.toString;r.classof=function(t){var e,n;return void 0==t?void 0===t?"Undefined":"Null":"string"==typeof(n=(e=Object(t))[i])?n:r(e)},r.set=function(t,e,n){t&&!o.has(t=n?t:t.prototype,i)&&o.hide(t,i,e)},e.exports=r},{"./$":15,"./$.wks":20}],8:[function(t,e,n){"use strict";function r(t,e){if(!p(t))return("string"==typeof t?"S":"P")+t;if(y(t))return"F";if(!l(t,g)){if(!e)return"E";h(t,g,++E)}return"O"+t[g]}function o(t,e){var n,o=r(e);if("F"!=o)return t[v][o];for(n=t[b];n;n=n.n)if(n.k==e)return n}var i=t("./$"),s=t("./$.ctx"),a=t("./$.uid").safe,u=t("./$.assert"),c=t("./$.iter"),l=i.has,f=i.set,p=i.isObject,h=i.hide,d=c.step,y=Object.isFrozen||i.core.Object.isFrozen,g=a("id"),v=a("O1"),m=a("last"),b=a("first"),w=a("iter"),x=i.DESC?a("size"):"size",E=0;e.exports={getConstructor:function(t,e,n){function r(o){var s=u.inst(this,r,t);f(s,v,i.create(null)),f(s,x,0),f(s,m,void 0),f(s,b,void 0),void 0!=o&&c.forOf(o,e,s[n],s)}return i.mix(r.prototype,{clear:function(){for(var t=this,e=t[v],n=t[b];n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete e[n.i];t[b]=t[m]=void 0,t[x]=0},"delete":function(t){var e=this,n=o(e,t);if(n){var r=n.n,i=n.p;delete e[v][n.i],n.r=!0,i&&(i.n=r),r&&(r.p=i),e[b]==n&&(e[b]=r),e[m]==n&&(e[m]=i),e[x]--}return!!n},forEach:function(t){for(var e,n=s(t,arguments[1],3);e=e?e.n:this[b];)for(n(e.v,e.k,this);e&&e.r;)e=e.p},has:function(t){return!!o(this,t)}}),i.DESC&&i.setDesc(r.prototype,"size",{get:function(){return u.def(this[x])}}),r},def:function(t,e,n){var i,s,a=o(t,e);return a?a.v=n:(t[m]=a={i:s=r(e,!0),k:e,v:n,p:i=t[m],n:void 0,r:!1},t[b]||(t[b]=a),i&&(i.n=a),t[x]++,"F"!=s&&(t[v][s]=a)),t},getEntry:o,getIterConstructor:function(){return function(t,e){f(this,w,{o:t,k:e})}},next:function(){for(var t=this[w],e=t.k,n=t.l;n&&n.r;)n=n.p;return t.o&&(t.l=n=n?n.n:t.o[b])?"key"==e?d(0,n.k):"value"==e?d(0,n.v):d(0,[n.k,n.v]):(t.o=void 0,d(1))}}},{"./$":15,"./$.assert":6,"./$.ctx":10,"./$.iter":14,"./$.uid":18}],9:[function(t,e,n){"use strict";var r=t("./$"),o=t("./$.def"),i=t("./$.iter"),s=t("./$.assert").inst;e.exports=function(e,n,a,u,c){function l(t,e){var n=d[t];r.FW&&(d[t]=function(t,r){var o=n.call(this,0===t?0:t,r);return e?this:o})}var f=r.g[e],p=f,h=u?"set":"add",d=p&&p.prototype,y={};if(r.isFunction(p)&&(c||!i.BUGGY&&d.forEach&&d.entries)){var g,v=new p,m=v[h](c?{}:-0,1);t("./$.iter-detect")(function(t){new p(t)})||(p=function(t){s(this,p,e);var n=new f;return void 0!=t&&i.forOf(t,u,n[h],n),n},p.prototype=d,r.FW&&(d.constructor=p)),c||v.forEach(function(t,e){g=1/e===-(1/0)}),g&&(l("delete"),l("has"),u&&l("get")),(g||m!==v)&&l(h,!0)}else p=a.getConstructor(e,u,h),r.mix(p.prototype,n);return t("./$.cof").set(p,e),t("./$.species")(p),y[e]=p,o(o.G+o.W+o.F*(p!=f),y),c||i.std(p,e,a.getIterConstructor(),a.next,u?"key+value":"value",!u,!0),p}},{"./$":15,"./$.assert":6,"./$.cof":7,"./$.def":11,"./$.iter":14,"./$.iter-detect":13,"./$.species":16}],10:[function(t,e,n){var r=t("./$.assert").fn;e.exports=function(t,e,n){if(r(t),~n&&void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},{"./$.assert":6}],11:[function(t,e,n){function r(t,e){return function(){return t.apply(e,arguments)}}function o(t,e,n){var c,l,f,p,h=t&o.G,d=h?s:t&o.S?s[e]:(s[e]||{}).prototype,y=h?a:a[e]||(a[e]={});h&&(n=e);for(c in n)l=!(t&o.F)&&d&&c in d,l&&c in y||(f=l?d[c]:n[c],h&&!u(d[c])?p=n[c]:t&o.B&&l?p=r(f,s):t&o.W&&d[c]==f?!function(t){p=function(e){return this instanceof t?new t(e):t(e)},p.prototype=t.prototype}(f):p=t&o.P&&u(f)?r(Function.call,f):f,i.hide(y,c,p))}var i=t("./$"),s=i.g,a=i.core,u=i.isFunction;o.F=1,o.G=2,o.S=4,o.P=8,o.B=16,o.W=32,e.exports=o},{"./$":15}],12:[function(t,e,n){e.exports=function(t){return t.FW=!1,t.path=t.core,t}},{}],13:[function(t,e,n){var r=t("./$.wks")("iterator"),o=!1;try{var i=[7][r]();i["return"]=function(){o=!0},Array.from(i,function(){throw 2})}catch(s){}e.exports=function(t){if(!o)return!1;var e=!1;try{var n=[7],i=n[r]();i.next=function(){e=!0},n[r]=function(){return i},t(n)}catch(s){}return e}},{"./$.wks":20}],14:[function(t,e,n){"use strict";function r(t,e){u.hide(t,h,e),d in[]&&u.hide(t,d,e)}function o(t,e,n,o){var i=t.prototype,s=i[h]||i[d]||o&&i[o]||n;if(u.FW&&r(i,s),s!==n){var a=u.getProto(s.call(new t));l.set(a,e+" Iterator",!0),u.FW&&u.has(i,d)&&r(a,u.that)}return y[e]=s,y[e+" Iterator"]=u.that,s}function i(t){var e=u.g.Symbol,n=t[e&&e.iterator||d],r=n||t[h]||y[l.classof(t)];return p(r.call(t))}function s(t){var e=t["return"];void 0!==e&&p(e.call(t))}function a(t,e,n,r){try{return r?e(p(n)[0],n[1]):e(n)}catch(o){throw s(t),o}}var u=t("./$"),c=t("./$.ctx"),l=t("./$.cof"),f=t("./$.def"),p=t("./$.assert").obj,h=t("./$.wks")("iterator"),d="@@iterator",y={},g={},v="keys"in[]&&!("next"in[].keys());r(g,u.that);var m=e.exports={BUGGY:v,Iterators:y,prototype:g,step:function(t,e){return{value:e,done:!!t}},stepCall:a,close:s,is:function(t){var e=Object(t),n=u.g.Symbol,r=n&&n.iterator||d;return r in e||h in e||u.has(y,l.classof(e))},get:i,set:r,create:function(t,e,n,r){t.prototype=u.create(r||m.prototype,{next:u.desc(1,n)}),l.set(t,e+" Iterator")},define:o,std:function(t,e,n,r,i,s,a){function c(t){return function(){return new n(this,t)}}m.create(n,e,r);var l,p,h=c("key+value"),d=c("value"),y=t.prototype;if("value"==i?d=o(t,e,d,"values"):h=o(t,e,h,"entries"),i&&(l={entries:h,keys:s?d:c("key"),values:d},f(f.P+f.F*v,e,l),a))for(p in l)p in y||u.hide(y,p,l[p])},forOf:function(t,e,n,r){for(var o,u=i(t),l=c(n,r,e?2:1);!(o=u.next()).done;)if(a(u,l,o.value,e)===!1)return s(u)}}},{"./$":15,"./$.assert":6,"./$.cof":7,"./$.ctx":10,"./$.def":11,"./$.wks":20}],15:[function(t,e,n){"use strict";function r(t){return isNaN(t=+t)?0:(t>0?y:d)(t)}function o(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function i(t,e,n){return t[e]=n,t}function s(t){return m?function(e,n,r){return w.setDesc(e,n,o(t,r))}:i}function a(t){return null!==t&&("object"==typeof t||"function"==typeof t)}function u(t){return"function"==typeof t}function c(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}var l="undefined"!=typeof self?self:Function("return this")(),f={},p=Object.defineProperty,h={}.hasOwnProperty,d=Math.ceil,y=Math.floor,g=Math.max,v=Math.min,m=!!function(){try{return 2==p({},"a",{get:function(){return 2}}).a}catch(t){}}(),b=s(1),w=e.exports=t("./$.fw")({g:l,core:f,html:l.document&&document.documentElement,isObject:a,isFunction:u,it:function(t){return t},that:function(){return this},toInteger:r,toLength:function(t){return t>0?v(r(t),9007199254740991):0},toIndex:function(t,e){return t=r(t),0>t?g(t+e,0):v(t,e)},has:function(t,e){return h.call(t,e)},create:Object.create,getProto:Object.getPrototypeOf,DESC:m,desc:o,getDesc:Object.getOwnPropertyDescriptor,setDesc:p,getKeys:Object.keys,getNames:Object.getOwnPropertyNames,getSymbols:Object.getOwnPropertySymbols,assertDefined:c,ES5Object:Object,toObject:function(t){return w.ES5Object(c(t))},hide:b,def:s(0),set:l.Symbol?i:b,mix:function(t,e){for(var n in e)b(t,n,e[n]);return t},each:[].forEach});"undefined"!=typeof __e&&(__e=f),"undefined"!=typeof __g&&(__g=l)},{"./$.fw":12}],16:[function(t,e,n){var r=t("./$");e.exports=function(e){r.DESC&&r.FW&&r.setDesc(e,t("./$.wks")("species"),{configurable:!0,get:r.that})}},{"./$":15,"./$.wks":20}],17:[function(t,e,n){"use strict";var r=t("./$");e.exports=function(t){return function(e){var n,o,i=String(r.assertDefined(this)),s=r.toInteger(e),a=i.length;return 0>s||s>=a?t?"":void 0:(n=i.charCodeAt(s),55296>n||n>56319||s+1===a||(o=i.charCodeAt(s+1))<56320||o>57343?t?i.charAt(s):n:t?i.slice(s,s+2):(n-55296<<10)+(o-56320)+65536)}}},{"./$":15}],18:[function(t,e,n){function r(t){return"Symbol("+t+")_"+(++o+Math.random()).toString(36)}var o=0;r.safe=t("./$").g.Symbol||r,e.exports=r},{"./$":15}],19:[function(t,e,n){var r=t("./$"),o=t("./$.wks")("unscopables");!r.FW||o in[]||r.hide(Array.prototype,o,{}),e.exports=function(t){r.FW&&([][o][t]=!0)}},{"./$":15,"./$.wks":20}],20:[function(t,e,n){var r=t("./$").g,o={};e.exports=function(e){return o[e]||(o[e]=r.Symbol&&r.Symbol[e]||t("./$.uid").safe("Symbol."+e))}},{"./$":15,"./$.uid":18}],21:[function(t,e,n){var r=t("./$"),o=t("./$.unscope"),i=t("./$.uid").safe("iter"),s=t("./$.iter"),a=s.step,u=s.Iterators;s.std(Array,"Array",function(t,e){r.set(this,i,{o:r.toObject(t),i:0,k:e})},function(){var t=this[i],e=t.o,n=t.k,r=t.i++;return!e||r>=e.length?(t.o=void 0,a(1)):"key"==n?a(0,r):"value"==n?a(0,e[r]):a(0,[r,e[r]])},"value"),u.Arguments=u.Array,o("keys"),o("values"),o("entries")},{"./$":15,"./$.iter":14,"./$.uid":18,"./$.unscope":19}],22:[function(t,e,n){"use strict";var r=t("./$.collection-strong");t("./$.collection")("Map",{get:function(t){var e=r.getEntry(this,t);return e&&e.v},set:function(t,e){return r.def(this,0===t?0:t,e)}},r,!0)},{"./$.collection":9,"./$.collection-strong":8}],23:[function(t,e,n){var r=t("./$").set,o=t("./$.string-at")(!0),i=t("./$.uid").safe("iter"),s=t("./$.iter"),a=s.step;s.std(String,"String",function(t){r(this,i,{o:String(t),i:0})},function(){var t,e=this[i],n=e.o,r=e.i;return r>=n.length?a(1):(t=o.call(n,r),e.i+=t.length,a(0,t))})},{"./$":15,"./$.iter":14,"./$.string-at":17,"./$.uid":18}],24:[function(t,e,n){t("./es6.array.iterator");var r=t("./$"),o=t("./$.iter").Iterators,i=t("./$.wks")("iterator"),s=o.Array,a=r.g.NodeList;!r.FW||!a||i in a.prototype||r.hide(a.prototype,i,s),o.NodeList=s},{"./$":15,"./$.iter":14,"./$.wks":20,"./es6.array.iterator":21}],25:[function(t,e,n){function r(t){return this instanceof r?(this.length=0,this.parent=void 0,"number"==typeof t?o(this,t):"string"==typeof t?i(this,t,arguments.length>1?arguments[1]:"utf8"):s(this,t)):arguments.length>1?new r(t,arguments[1]):new r(t)}function o(t,e){if(t=p(t,0>e?0:0|h(e)),!r.TYPED_ARRAY_SUPPORT)for(var n=0;e>n;n++)t[n]=0;return t}function i(t,e,n){("string"!=typeof n||""===n)&&(n="utf8");
var r=0|y(e,n);return t=p(t,r),t.write(e,n),t}function s(t,e){if(r.isBuffer(e))return a(t,e);if(X(e))return u(t,e);if(null==e)throw new TypeError("must start with number, buffer, array or string");return"undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer?c(t,e):e.length?l(t,e):f(t,e)}function a(t,e){var n=0|h(e.length);return t=p(t,n),e.copy(t,0,0,n),t}function u(t,e){var n=0|h(e.length);t=p(t,n);for(var r=0;n>r;r+=1)t[r]=255&e[r];return t}function c(t,e){var n=0|h(e.length);t=p(t,n);for(var r=0;n>r;r+=1)t[r]=255&e[r];return t}function l(t,e){var n=0|h(e.length);t=p(t,n);for(var r=0;n>r;r+=1)t[r]=255&e[r];return t}function f(t,e){var n,r=0;"Buffer"===e.type&&X(e.data)&&(n=e.data,r=0|h(n.length)),t=p(t,r);for(var o=0;r>o;o+=1)t[o]=255&n[o];return t}function p(t,e){r.TYPED_ARRAY_SUPPORT?t=r._augment(new Uint8Array(e)):(t.length=e,t._isBuffer=!0);var n=0!==e&&e<=r.poolSize>>>1;return n&&(t.parent=Y),t}function h(t){if(t>=z)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+z.toString(16)+" bytes");return 0|t}function d(t,e){if(!(this instanceof d))return new d(t,e);var n=new r(t,e);return delete n.parent,n}function y(t,e){if("string"!=typeof t&&(t=String(t)),0===t.length)return 0;switch(e||"utf8"){case"ascii":case"binary":case"raw":return t.length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*t.length;case"hex":return t.length>>>1;case"utf8":case"utf-8":return B(t).length;case"base64":return V(t).length;default:return t.length}}function g(t,e,n,r){n=Number(n)||0;var o=t.length-n;r?(r=Number(r),r>o&&(r=o)):r=o;var i=e.length;if(i%2!==0)throw new Error("Invalid hex string");r>i/2&&(r=i/2);for(var s=0;r>s;s++){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");t[n+s]=a}return s}function v(t,e,n,r){return U(B(e,t.length-n),t,n,r)}function m(t,e,n,r){return U(q(e),t,n,r)}function b(t,e,n,r){return m(t,e,n,r)}function w(t,e,n,r){return U(V(e),t,n,r)}function x(t,e,n,r){return U(F(e,t.length-n),t,n,r)}function E(t,e,n){return H.fromByteArray(0===e&&n===t.length?t:t.slice(e,n))}function A(t,e,n){var r="",o="";n=Math.min(t.length,n);for(var i=e;n>i;i++)t[i]<=127?(r+=$(o)+String.fromCharCode(t[i]),o=""):o+="%"+t[i].toString(16);return r+$(o)}function C(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;n>o;o++)r+=String.fromCharCode(127&t[o]);return r}function T(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;n>o;o++)r+=String.fromCharCode(t[o]);return r}function S(t,e,n){var r=t.length;(!e||0>e)&&(e=0),(!n||0>n||n>r)&&(n=r);for(var o="",i=e;n>i;i++)o+=_(t[i]);return o}function j(t,e,n){for(var r=t.slice(e,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function P(t,e,n){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function O(t,e,n,o,i,s){if(!r.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(e>i||s>e)throw new RangeError("value is out of bounds");if(n+o>t.length)throw new RangeError("index out of range")}function k(t,e,n,r){0>e&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-n,2);i>o;o++)t[n+o]=(e&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function M(t,e,n,r){0>e&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-n,4);i>o;o++)t[n+o]=e>>>8*(r?o:3-o)&255}function N(t,e,n,r,o,i){if(e>o||i>e)throw new RangeError("value is out of bounds");if(n+r>t.length)throw new RangeError("index out of range");if(0>n)throw new RangeError("index out of range")}function R(t,e,n,r,o){return o||N(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),W.write(t,e,n,r,23,4),n+4}function D(t,e,n,r,o){return o||N(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),W.write(t,e,n,r,52,8),n+8}function I(t){if(t=L(t).replace(J,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function L(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function _(t){return 16>t?"0"+t.toString(16):t.toString(16)}function B(t,e){e=e||1/0;for(var n,r=t.length,o=null,i=[],s=0;r>s;s++){if(n=t.charCodeAt(s),n>55295&&57344>n){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(56320>n){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=o-55296<<10|n-56320|65536,o=null}else o&&((e-=3)>-1&&i.push(239,191,189),o=null);if(128>n){if((e-=1)<0)break;i.push(n)}else if(2048>n){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(65536>n){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(2097152>n))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function q(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}function F(t,e){for(var n,r,o,i=[],s=0;s<t.length&&!((e-=2)<0);s++)n=t.charCodeAt(s),r=n>>8,o=n%256,i.push(o),i.push(r);return i}function V(t){return H.toByteArray(I(t))}function U(t,e,n,r){for(var o=0;r>o&&!(o+n>=e.length||o>=t.length);o++)e[o+n]=t[o];return o}function $(t){try{return decodeURIComponent(t)}catch(e){return String.fromCharCode(65533)}}var H=t("base64-js"),W=t("ieee754"),X=t("is-array");n.Buffer=r,n.SlowBuffer=d,n.INSPECT_MAX_BYTES=50,r.poolSize=8192;var z=1073741823,Y={};r.TYPED_ARRAY_SUPPORT=function(){try{var t=new ArrayBuffer(0),e=new Uint8Array(t);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(n){return!1}}(),r.isBuffer=function(t){return!(null==t||!t._isBuffer)},r.compare=function(t,e){if(!r.isBuffer(t)||!r.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,o=e.length,i=0,s=Math.min(n,o);s>i&&t[i]===e[i];)++i;return i!==s&&(n=t[i],o=e[i]),o>n?-1:n>o?1:0},r.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(t,e){if(!X(t))throw new TypeError("list argument must be an Array of Buffers.");if(0===t.length)return new r(0);if(1===t.length)return t[0];var n;if(void 0===e)for(e=0,n=0;n<t.length;n++)e+=t[n].length;var o=new r(e),i=0;for(n=0;n<t.length;n++){var s=t[n];s.copy(o,i),i+=s.length}return o},r.byteLength=y,r.prototype.length=void 0,r.prototype.parent=void 0,r.prototype.toString=function(t,e,n){var r=!1;if(e=0|e,n=void 0===n||n===1/0?this.length:0|n,t||(t="utf8"),0>e&&(e=0),n>this.length&&(n=this.length),e>=n)return"";for(;;)switch(t){case"hex":return S(this,e,n);case"utf8":case"utf-8":return A(this,e,n);case"ascii":return C(this,e,n);case"binary":return T(this,e,n);case"base64":return E(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}},r.prototype.equals=function(t){if(!r.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:0===r.compare(this,t)},r.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},r.prototype.compare=function(t){if(!r.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?0:r.compare(this,t)},r.prototype.indexOf=function(t,e){function n(t,e,n){for(var r=-1,o=0;n+o<t.length;o++)if(t[n+o]===e[-1===r?0:o-r]){if(-1===r&&(r=o),o-r+1===e.length)return n+r}else r=-1;return-1}if(e>2147483647?e=2147483647:-2147483648>e&&(e=-2147483648),e>>=0,0===this.length)return-1;if(e>=this.length)return-1;if(0>e&&(e=Math.max(this.length+e,0)),"string"==typeof t)return 0===t.length?-1:String.prototype.indexOf.call(this,t,e);if(r.isBuffer(t))return n(this,t,e);if("number"==typeof t)return r.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,t,e):n(this,[t],e);throw new TypeError("val must be string, number or Buffer")},r.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},r.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},r.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else if(isFinite(e))e=0|e,isFinite(n)?(n=0|n,void 0===r&&(r="utf8")):(r=n,n=void 0);else{var o=r;r=e,e=0|n,n=o}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(0>n||0>e)||e>this.length)throw new RangeError("attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return g(this,t,e,n);case"utf8":case"utf-8":return v(this,t,e,n);case"ascii":return m(this,t,e,n);case"binary":return b(this,t,e,n);case"base64":return w(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,t,e,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},r.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),t>e&&(e=t);var o;if(r.TYPED_ARRAY_SUPPORT)o=r._augment(this.subarray(t,e));else{var i=e-t;o=new r(i,void 0);for(var s=0;i>s;s++)o[s]=this[s+t]}return o.length&&(o.parent=this.parent||this),o},r.prototype.readUIntLE=function(t,e,n){t=0|t,e=0|e,n||P(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r},r.prototype.readUIntBE=function(t,e,n){t=0|t,e=0|e,n||P(t,e,this.length);for(var r=this[t+--e],o=1;e>0&&(o*=256);)r+=this[t+--e]*o;return r},r.prototype.readUInt8=function(t,e){return e||P(t,1,this.length),this[t]},r.prototype.readUInt16LE=function(t,e){return e||P(t,2,this.length),this[t]|this[t+1]<<8},r.prototype.readUInt16BE=function(t,e){return e||P(t,2,this.length),this[t]<<8|this[t+1]},r.prototype.readUInt32LE=function(t,e){return e||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},r.prototype.readUInt32BE=function(t,e){return e||P(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},r.prototype.readIntLE=function(t,e,n){t=0|t,e=0|e,n||P(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*e)),r},r.prototype.readIntBE=function(t,e,n){t=0|t,e=0|e,n||P(t,e,this.length);for(var r=e,o=1,i=this[t+--r];r>0&&(o*=256);)i+=this[t+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i},r.prototype.readInt8=function(t,e){return e||P(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},r.prototype.readInt16LE=function(t,e){e||P(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},r.prototype.readInt16BE=function(t,e){e||P(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},r.prototype.readInt32LE=function(t,e){return e||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},r.prototype.readInt32BE=function(t,e){return e||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},r.prototype.readFloatLE=function(t,e){return e||P(t,4,this.length),W.read(this,t,!0,23,4)},r.prototype.readFloatBE=function(t,e){return e||P(t,4,this.length),W.read(this,t,!1,23,4)},r.prototype.readDoubleLE=function(t,e){return e||P(t,8,this.length),W.read(this,t,!0,52,8)},r.prototype.readDoubleBE=function(t,e){return e||P(t,8,this.length),W.read(this,t,!1,52,8)},r.prototype.writeUIntLE=function(t,e,n,r){t=+t,e=0|e,n=0|n,r||O(this,t,e,n,Math.pow(2,8*n),0);var o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},r.prototype.writeUIntBE=function(t,e,n,r){t=+t,e=0|e,n=0|n,r||O(this,t,e,n,Math.pow(2,8*n),0);var o=n-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+n},r.prototype.writeUInt8=function(t,e,n){return t=+t,e=0|e,n||O(this,t,e,1,255,0),r.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=t,e+1},r.prototype.writeUInt16LE=function(t,e,n){return t=+t,e=0|e,n||O(this,t,e,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):k(this,t,e,!0),e+2},r.prototype.writeUInt16BE=function(t,e,n){return t=+t,e=0|e,n||O(this,t,e,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):k(this,t,e,!1),e+2},r.prototype.writeUInt32LE=function(t,e,n){return t=+t,e=0|e,n||O(this,t,e,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t):M(this,t,e,!0),e+4},r.prototype.writeUInt32BE=function(t,e,n){return t=+t,e=0|e,n||O(this,t,e,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):M(this,t,e,!1),e+4},r.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e=0|e,!r){var o=Math.pow(2,8*n-1);O(this,t,e,n,o-1,-o)}var i=0,s=1,a=0>t?1:0;for(this[e]=255&t;++i<n&&(s*=256);)this[e+i]=(t/s>>0)-a&255;return e+n},r.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e=0|e,!r){var o=Math.pow(2,8*n-1);O(this,t,e,n,o-1,-o)}var i=n-1,s=1,a=0>t?1:0;for(this[e+i]=255&t;--i>=0&&(s*=256);)this[e+i]=(t/s>>0)-a&255;return e+n},r.prototype.writeInt8=function(t,e,n){return t=+t,e=0|e,n||O(this,t,e,1,127,-128),r.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[e]=t,e+1},r.prototype.writeInt16LE=function(t,e,n){return t=+t,e=0|e,n||O(this,t,e,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):k(this,t,e,!0),e+2},r.prototype.writeInt16BE=function(t,e,n){return t=+t,e=0|e,n||O(this,t,e,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):k(this,t,e,!1),e+2},r.prototype.writeInt32LE=function(t,e,n){return t=+t,e=0|e,n||O(this,t,e,4,2147483647,-2147483648),r.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):M(this,t,e,!0),e+4},r.prototype.writeInt32BE=function(t,e,n){return t=+t,e=0|e,n||O(this,t,e,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):M(this,t,e,!1),e+4},r.prototype.writeFloatLE=function(t,e,n){return R(this,t,e,!0,n)},r.prototype.writeFloatBE=function(t,e,n){return R(this,t,e,!1,n)},r.prototype.writeDoubleLE=function(t,e,n){return D(this,t,e,!0,n)},r.prototype.writeDoubleBE=function(t,e,n){return D(this,t,e,!1,n)},r.prototype.copy=function(t,e,n,o){if(n||(n=0),o||0===o||(o=this.length),e>=t.length&&(e=t.length),e||(e=0),o>0&&n>o&&(o=n),o===n)return 0;if(0===t.length||0===this.length)return 0;if(0>e)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>o)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),t.length-e<o-n&&(o=t.length-e+n);var i=o-n;if(1e3>i||!r.TYPED_ARRAY_SUPPORT)for(var s=0;i>s;s++)t[s+e]=this[s+n];else t._set(this.subarray(n,n+i),e);return i},r.prototype.fill=function(t,e,n){if(t||(t=0),e||(e=0),n||(n=this.length),e>n)throw new RangeError("end < start");if(n!==e&&0!==this.length){if(0>e||e>=this.length)throw new RangeError("start out of bounds");if(0>n||n>this.length)throw new RangeError("end out of bounds");var r;if("number"==typeof t)for(r=e;n>r;r++)this[r]=t;else{var o=B(t.toString()),i=o.length;for(r=e;n>r;r++)this[r]=o[r%i]}return this}},r.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(r.TYPED_ARRAY_SUPPORT)return new r(this).buffer;for(var t=new Uint8Array(this.length),e=0,n=t.length;n>e;e+=1)t[e]=this[e];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var G=r.prototype;r._augment=function(t){return t.constructor=r,t._isBuffer=!0,t._set=t.set,t.get=G.get,t.set=G.set,t.write=G.write,t.toString=G.toString,t.toLocaleString=G.toString,t.toJSON=G.toJSON,t.equals=G.equals,t.compare=G.compare,t.indexOf=G.indexOf,t.copy=G.copy,t.slice=G.slice,t.readUIntLE=G.readUIntLE,t.readUIntBE=G.readUIntBE,t.readUInt8=G.readUInt8,t.readUInt16LE=G.readUInt16LE,t.readUInt16BE=G.readUInt16BE,t.readUInt32LE=G.readUInt32LE,t.readUInt32BE=G.readUInt32BE,t.readIntLE=G.readIntLE,t.readIntBE=G.readIntBE,t.readInt8=G.readInt8,t.readInt16LE=G.readInt16LE,t.readInt16BE=G.readInt16BE,t.readInt32LE=G.readInt32LE,t.readInt32BE=G.readInt32BE,t.readFloatLE=G.readFloatLE,t.readFloatBE=G.readFloatBE,t.readDoubleLE=G.readDoubleLE,t.readDoubleBE=G.readDoubleBE,t.writeUInt8=G.writeUInt8,t.writeUIntLE=G.writeUIntLE,t.writeUIntBE=G.writeUIntBE,t.writeUInt16LE=G.writeUInt16LE,t.writeUInt16BE=G.writeUInt16BE,t.writeUInt32LE=G.writeUInt32LE,t.writeUInt32BE=G.writeUInt32BE,t.writeIntLE=G.writeIntLE,t.writeIntBE=G.writeIntBE,t.writeInt8=G.writeInt8,t.writeInt16LE=G.writeInt16LE,t.writeInt16BE=G.writeInt16BE,t.writeInt32LE=G.writeInt32LE,t.writeInt32BE=G.writeInt32BE,t.writeFloatLE=G.writeFloatLE,t.writeFloatBE=G.writeFloatBE,t.writeDoubleLE=G.writeDoubleLE,t.writeDoubleBE=G.writeDoubleBE,t.fill=G.fill,t.inspect=G.inspect,t.toArrayBuffer=G.toArrayBuffer,t};var J=/[^+\/0-9A-z\-]/g},{"base64-js":26,ieee754:27,"is-array":28}],26:[function(t,e,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===s||e===f?62:e===a||e===p?63:u>e?-1:u+10>e?e-u+26+26:l+26>e?e-l:c+26>e?e-c+26:void 0}function n(t){function n(t){c[f++]=t}var r,o,s,a,u,c;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=t.length;u="="===t.charAt(l-2)?2:"="===t.charAt(l-1)?1:0,c=new i(3*t.length/4-u),s=u>0?t.length-4:t.length;var f=0;for(r=0,o=0;s>r;r+=4,o+=3)a=e(t.charAt(r))<<18|e(t.charAt(r+1))<<12|e(t.charAt(r+2))<<6|e(t.charAt(r+3)),n((16711680&a)>>16),n((65280&a)>>8),n(255&a);return 2===u?(a=e(t.charAt(r))<<2|e(t.charAt(r+1))>>4,n(255&a)):1===u&&(a=e(t.charAt(r))<<10|e(t.charAt(r+1))<<4|e(t.charAt(r+2))>>2,n(a>>8&255),n(255&a)),c}function o(t){function e(t){return r.charAt(t)}function n(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var o,i,s,a=t.length%3,u="";for(o=0,s=t.length-a;s>o;o+=3)i=(t[o]<<16)+(t[o+1]<<8)+t[o+2],u+=n(i);switch(a){case 1:i=t[t.length-1],u+=e(i>>2),u+=e(i<<4&63),u+="==";break;case 2:i=(t[t.length-2]<<8)+t[t.length-1],u+=e(i>>10),u+=e(i>>4&63),u+=e(i<<2&63),u+="="}return u}var i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="+".charCodeAt(0),a="/".charCodeAt(0),u="0".charCodeAt(0),c="a".charCodeAt(0),l="A".charCodeAt(0),f="-".charCodeAt(0),p="_".charCodeAt(0);t.toByteArray=n,t.fromByteArray=o}("undefined"==typeof n?this.base64js={}:n)},{}],27:[function(t,e,n){n.read=function(t,e,n,r,o){var i,s,a=8*o-r-1,u=(1<<a)-1,c=u>>1,l=-7,f=n?o-1:0,p=n?-1:1,h=t[e+f];for(f+=p,i=h&(1<<-l)-1,h>>=-l,l+=a;l>0;i=256*i+t[e+f],f+=p,l-=8);for(s=i&(1<<-l)-1,i>>=-l,l+=r;l>0;s=256*s+t[e+f],f+=p,l-=8);if(0===i)i=1-c;else{if(i===u)return s?0/0:(h?-1:1)*(1/0);s+=Math.pow(2,r),i-=c}return(h?-1:1)*s*Math.pow(2,i-r)},n.write=function(t,e,n,r,o,i){var s,a,u,c=8*i-o-1,l=(1<<c)-1,f=l>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,d=r?1:-1,y=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+f>=1?p/u:p*Math.pow(2,1-f),e*u>=2&&(s++,u/=2),s+f>=l?(a=0,s=l):s+f>=1?(a=(e*u-1)*Math.pow(2,o),s+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,o),s=0));o>=8;t[n+h]=255&a,h+=d,a/=256,o-=8);for(s=s<<o|a,c+=o;c>0;t[n+h]=255&s,h+=d,s/=256,c-=8);t[n+h-d]|=128*y}},{}],28:[function(t,e,n){var r=Array.isArray,o=Object.prototype.toString;e.exports=r||function(t){return!!t&&"[object Array]"==o.call(t)}},{}],29:[function(t,e,n){e.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],30:[function(t,e,n){function r(){if(!a){a=!0;for(var t,e=s.length;e;){t=s,s=[];for(var n=-1;++n<e;)t[n]();e=s.length}a=!1}}function o(){}var i=e.exports={},s=[],a=!1;i.nextTick=function(t){s.push(t),a||setTimeout(r,0)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=o,i.addListener=o,i.once=o,i.off=o,i.removeListener=o,i.removeAllListeners=o,i.emit=o,i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],31:[function(t,e,n){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],32:[function(t,e,n){(function(e,r){function o(t,e){var r={seen:[],stylize:s};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),y(e)?r.showHidden=e:e&&n._extend(r,e),x(r.showHidden)&&(r.showHidden=!1),x(r.depth)&&(r.depth=2),x(r.colors)&&(r.colors=!1),x(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=i),u(r,t,r.depth)}function i(t,e){var n=o.styles[e];return n?"["+o.colors[n][0]+"m"+t+"["+o.colors[n][1]+"m":t}function s(t,e){return t}function a(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function u(t,e,r){if(t.customInspect&&e&&S(e.inspect)&&e.inspect!==n.inspect&&(!e.constructor||e.constructor.prototype!==e)){var o=e.inspect(r,t);return b(o)||(o=u(t,o,r)),o}var i=c(t,e);if(i)return i;var s=Object.keys(e),y=a(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),T(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return l(e);if(0===s.length){if(S(e)){var g=e.name?": "+e.name:"";return t.stylize("[Function"+g+"]","special")}if(E(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(C(e))return t.stylize(Date.prototype.toString.call(e),"date");if(T(e))return l(e)}var v="",m=!1,w=["{","}"];if(d(e)&&(m=!0,w=["[","]"]),S(e)){var x=e.name?": "+e.name:"";v=" [Function"+x+"]"}if(E(e)&&(v=" "+RegExp.prototype.toString.call(e)),C(e)&&(v=" "+Date.prototype.toUTCString.call(e)),T(e)&&(v=" "+l(e)),0===s.length&&(!m||0==e.length))return w[0]+v+w[1];if(0>r)return E(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var A;return A=m?f(t,e,r,y,s):s.map(function(n){return p(t,e,r,y,n,m)}),t.seen.pop(),h(A,v,w)}function c(t,e){if(x(e))return t.stylize("undefined","undefined");if(b(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return m(e)?t.stylize(""+e,"number"):y(e)?t.stylize(""+e,"boolean"):g(e)?t.stylize("null","null"):void 0}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,n,r,o){for(var i=[],s=0,a=e.length;a>s;++s)i.push(M(e,String(s))?p(t,e,n,r,String(s),!0):"");return o.forEach(function(o){o.match(/^\d+$/)||i.push(p(t,e,n,r,o,!0))}),i}function p(t,e,n,r,o,i){var s,a,c;if(c=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]},c.get?a=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(a=t.stylize("[Setter]","special")),M(r,o)||(s="["+o+"]"),a||(t.seen.indexOf(c.value)<0?(a=g(n)?u(t,c.value,null):u(t,c.value,n-1),a.indexOf("\n")>-1&&(a=i?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n"))):a=t.stylize("[Circular]","special")),x(s)){if(i&&o.match(/^\d+$/))return a;s=JSON.stringify(""+o),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function h(t,e,n){var r=0,o=t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return o>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function d(t){return Array.isArray(t)}function y(t){return"boolean"==typeof t}function g(t){return null===t}function v(t){return null==t}function m(t){return"number"==typeof t}function b(t){return"string"==typeof t}function w(t){return"symbol"==typeof t}function x(t){return void 0===t}function E(t){return A(t)&&"[object RegExp]"===P(t)}function A(t){return"object"==typeof t&&null!==t}function C(t){return A(t)&&"[object Date]"===P(t)}function T(t){return A(t)&&("[object Error]"===P(t)||t instanceof Error)}function S(t){return"function"==typeof t}function j(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function P(t){return Object.prototype.toString.call(t)}function O(t){return 10>t?"0"+t.toString(10):t.toString(10)}function k(){var t=new Date,e=[O(t.getHours()),O(t.getMinutes()),O(t.getSeconds())].join(":");return[t.getDate(),I[t.getMonth()],e].join(" ")}function M(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var N=/%[sdj%]/g;n.format=function(t){if(!b(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(o(arguments[n]));return e.join(" ")}for(var n=1,r=arguments,i=r.length,s=String(t).replace(N,function(t){if("%%"===t)return"%";if(n>=i)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return t}}),a=r[n];i>n;a=r[++n])s+=g(a)||!A(a)?" "+a:" "+o(a);return s},n.deprecate=function(t,o){function i(){if(!s){if(e.throwDeprecation)throw new Error(o);e.traceDeprecation?console.trace(o):console.error(o),s=!0}return t.apply(this,arguments)}if(x(r.process))return function(){return n.deprecate(t,o).apply(this,arguments)};if(e.noDeprecation===!0)return t;var s=!1;return i};var R,D={};n.debuglog=function(t){if(x(R)&&(R=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!D[t])if(new RegExp("\\b"+t+"\\b","i").test(R)){var r=e.pid;D[t]=function(){var e=n.format.apply(n,arguments);console.error("%s %d: %s",t,r,e)}}else D[t]=function(){};return D[t]},n.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=d,n.isBoolean=y,n.isNull=g,n.isNullOrUndefined=v,n.isNumber=m,n.isString=b,n.isSymbol=w,n.isUndefined=x,n.isRegExp=E,n.isObject=A,n.isDate=C,n.isError=T,n.isFunction=S,n.isPrimitive=j,n.isBuffer=t("./support/isBuffer");var I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",k(),n.format.apply(n,arguments))},n.inherits=t("inherits"),n._extend=function(t,e){if(!e||!A(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":31,_process:30,inherits:29}],33:[function(t,e,n){e.exports=t("./lib/chai")},{"./lib/chai":34}],34:[function(t,e,n){var r=[],n=e.exports={};n.version="2.3.0",n.AssertionError=t("assertion-error");var o=t("./chai/utils");n.use=function(t){return~r.indexOf(t)||(t(this,o),r.push(t)),this},n.util=o;var i=t("./chai/config");n.config=i;var s=t("./chai/assertion");n.use(s);var a=t("./chai/core/assertions");n.use(a);var u=t("./chai/interface/expect");n.use(u);var c=t("./chai/interface/should");n.use(c);var l=t("./chai/interface/assert");n.use(l)},{"./chai/assertion":35,"./chai/config":36,"./chai/core/assertions":37,"./chai/interface/assert":38,"./chai/interface/expect":39,"./chai/interface/should":40,"./chai/utils":53,"assertion-error":62}],35:[function(t,e,n){var r=t("./config");e.exports=function(t,e){function n(t,e,n){i(this,"ssfi",n||arguments.callee),i(this,"object",t),i(this,"message",e)}var o=t.AssertionError,i=e.flag;t.Assertion=n,Object.defineProperty(n,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),r.includeStack},set:function(t){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),r.includeStack=t}}),Object.defineProperty(n,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),r.showDiff},set:function(t){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),r.showDiff=t}}),n.addProperty=function(t,n){e.addProperty(this.prototype,t,n)},n.addMethod=function(t,n){e.addMethod(this.prototype,t,n)},n.addChainableMethod=function(t,n,r){e.addChainableMethod(this.prototype,t,n,r)},n.overwriteProperty=function(t,n){e.overwriteProperty(this.prototype,t,n)},n.overwriteMethod=function(t,n){e.overwriteMethod(this.prototype,t,n)},n.overwriteChainableMethod=function(t,n,r){e.overwriteChainableMethod(this.prototype,t,n,r)},n.prototype.assert=function(t,n,s,a,u,c){var l=e.test(this,arguments);if(!0!==c&&(c=!1),!0!==r.showDiff&&(c=!1),!l){var n=e.getMessage(this,arguments),f=e.getActual(this,arguments);throw new o(n,{actual:f,expected:a,showDiff:c},r.includeStack?this.assert:i(this,"ssfi"))}},Object.defineProperty(n.prototype,"_obj",{get:function(){return i(this,"object")},set:function(t){i(this,"object",t)}})}},{"./config":36}],36:[function(t,e,n){e.exports={includeStack:!1,showDiff:!0,truncateThreshold:40}},{}],37:[function(t,e,n){e.exports=function(t,e){function n(t,n){n&&C(this,"message",n),t=t.toLowerCase();var r=C(this,"object"),o=~["a","e","i","o","u"].indexOf(t.charAt(0))?"an ":"a ";this.assert(t===e.type(r),"expected #{this} to be "+o+t,"expected #{this} not to be "+o+t)}function r(){C(this,"contains",!0)}function o(t,n){n&&C(this,"message",n);var r=C(this,"object"),o=!1;if("array"===e.type(r)&&"object"===e.type(t)){for(var i in r)if(e.eql(r[i],t)){o=!0;break}}else if("object"===e.type(t)){if(!C(this,"negate")){for(var s in t)new A(r).property(s,t[s]);return}var a={};for(var s in t)a[s]=r[s];o=e.eql(a,t)}else o=r&&~r.indexOf(t);this.assert(o,"expected #{this} to include "+e.inspect(t),"expected #{this} to not include "+e.inspect(t))}function i(){var t=C(this,"object"),e=Object.prototype.toString.call(t);this.assert("[object Arguments]"===e,"expected #{this} to be arguments but got "+e,"expected #{this} to not be arguments")}function s(t,e){e&&C(this,"message",e);var n=C(this,"object");return C(this,"deep")?this.eql(t):void this.assert(t===n,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",t,this._obj,!0)}function a(t,n){n&&C(this,"message",n),this.assert(e.eql(t,C(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",t,this._obj,!0)}function u(t,e){e&&C(this,"message",e);var n=C(this,"object");if(C(this,"doLength")){new A(n,e).to.have.property("length");var r=n.length;this.assert(r>t,"expected #{this} to have a length above #{exp} but got #{act}","expected #{this} to not have a length above #{exp}",t,r)}else this.assert(n>t,"expected #{this} to be above "+t,"expected #{this} to be at most "+t)}function c(t,e){e&&C(this,"message",e);var n=C(this,"object");if(C(this,"doLength")){new A(n,e).to.have.property("length");var r=n.length;this.assert(r>=t,"expected #{this} to have a length at least #{exp} but got #{act}","expected #{this} to have a length below #{exp}",t,r)}else this.assert(n>=t,"expected #{this} to be at least "+t,"expected #{this} to be below "+t)}function l(t,e){e&&C(this,"message",e);var n=C(this,"object");if(C(this,"doLength")){new A(n,e).to.have.property("length");var r=n.length;this.assert(t>r,"expected #{this} to have a length below #{exp} but got #{act}","expected #{this} to not have a length below #{exp}",t,r)}else this.assert(t>n,"expected #{this} to be below "+t,"expected #{this} to be at least "+t)}function f(t,e){e&&C(this,"message",e);var n=C(this,"object");if(C(this,"doLength")){new A(n,e).to.have.property("length");var r=n.length;this.assert(t>=r,"expected #{this} to have a length at most #{exp} but got #{act}","expected #{this} to have a length above #{exp}",t,r)}else this.assert(t>=n,"expected #{this} to be at most "+t,"expected #{this} to be above "+t);

}function p(t,n){n&&C(this,"message",n);var r=e.getName(t);this.assert(C(this,"object")instanceof t,"expected #{this} to be an instance of "+r,"expected #{this} to not be an instance of "+r)}function h(t,n){n&&C(this,"message",n);var r=C(this,"object");this.assert(r.hasOwnProperty(t),"expected #{this} to have own property "+e.inspect(t),"expected #{this} to not have own property "+e.inspect(t))}function d(t,n,r){"string"==typeof n&&(r=n,n=null),r&&C(this,"message",r);var o=C(this,"object"),i=Object.getOwnPropertyDescriptor(Object(o),t);i&&n?this.assert(e.eql(n,i),"expected the own property descriptor for "+e.inspect(t)+" on #{this} to match "+e.inspect(n)+", got "+e.inspect(i),"expected the own property descriptor for "+e.inspect(t)+" on #{this} to not match "+e.inspect(n),n,i,!0):this.assert(i,"expected #{this} to have an own property descriptor for "+e.inspect(t),"expected #{this} to not have an own property descriptor for "+e.inspect(t)),C(this,"object",i)}function y(){C(this,"doLength",!0)}function g(t,e){e&&C(this,"message",e);var n=C(this,"object");new A(n,e).to.have.property("length");var r=n.length;this.assert(r==t,"expected #{this} to have a length of #{exp} but got #{act}","expected #{this} to not have a length of #{act}",t,r)}function v(t){var n,r=C(this,"object"),o=!0,i="keys must be given single argument of Array|Object|String, or multiple String arguments";switch(e.type(t)){case"array":if(arguments.length>1)throw new Error(i);break;case"object":if(arguments.length>1)throw new Error(i);t=Object.keys(t);break;default:t=Array.prototype.slice.call(arguments)}if(!t.length)throw new Error("keys required");var s=Object.keys(r),a=t,u=t.length,c=C(this,"any"),l=C(this,"all");if(c||l||(l=!0),c){var f=a.filter(function(t){return~s.indexOf(t)});o=f.length>0}if(l&&(o=t.every(function(t){return~s.indexOf(t)}),C(this,"negate")||C(this,"contains")||(o=o&&t.length==s.length)),u>1){t=t.map(function(t){return e.inspect(t)});var p=t.pop();l&&(n=t.join(", ")+", and "+p),c&&(n=t.join(", ")+", or "+p)}else n=e.inspect(t[0]);n=(u>1?"keys ":"key ")+n,n=(C(this,"contains")?"contain ":"have ")+n,this.assert(o,"expected #{this} to "+n,"expected #{this} to not "+n,a.slice(0).sort(),s.sort(),!0)}function m(t,n,r){r&&C(this,"message",r);var o=C(this,"object");new A(o,r).is.a("function");var i=!1,s=null,a=null,u=null;0===arguments.length?(n=null,t=null):t&&(t instanceof RegExp||"string"==typeof t)?(n=t,t=null):t&&t instanceof Error?(s=t,t=null,n=null):"function"==typeof t?(a=t.prototype.name||t.name,"Error"===a&&t!==Error&&(a=(new t).name)):t=null;try{o()}catch(c){if(s)return this.assert(c===s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}",s instanceof Error?s.toString():s,c instanceof Error?c.toString():c),C(this,"object",c),this;if(t&&(this.assert(c instanceof t,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp} but #{act} was thrown",a,c instanceof Error?c.toString():c),!n))return C(this,"object",c),this;var l="object"===e.type(c)&&"message"in c?c.message:""+c;if(null!=l&&n&&n instanceof RegExp)return this.assert(n.exec(l),"expected #{this} to throw error matching #{exp} but got #{act}","expected #{this} to throw error not matching #{exp}",n,l),C(this,"object",c),this;if(null!=l&&n&&"string"==typeof n)return this.assert(~l.indexOf(n),"expected #{this} to throw error including #{exp} but got #{act}","expected #{this} to throw error not including #{act}",n,l),C(this,"object",c),this;i=!0,u=c}var f="",p=null!==a?a:s?"#{exp}":"an error";i&&(f=" but #{act} was thrown"),this.assert(i===!0,"expected #{this} to throw "+p+f,"expected #{this} to not throw "+p+f,s instanceof Error?s.toString():s,u instanceof Error?u.toString():u),C(this,"object",u)}function b(t,e,n){return t.every(function(t){return n?e.some(function(e){return n(t,e)}):-1!==e.indexOf(t)})}function w(t,e,n){n&&C(this,"message",n);var r=C(this,"object");new A(t,n).to.have.property(e),new A(r).is.a("function");var o=t[e];r(),this.assert(o!==t[e],"expected ."+e+" to change","expected ."+e+" to not change")}function x(t,e,n){n&&C(this,"message",n);var r=C(this,"object");new A(t,n).to.have.property(e),new A(r).is.a("function");var o=t[e];r(),this.assert(t[e]-o>0,"expected ."+e+" to increase","expected ."+e+" to not increase")}function E(t,e,n){n&&C(this,"message",n);var r=C(this,"object");new A(t,n).to.have.property(e),new A(r).is.a("function");var o=t[e];r(),this.assert(t[e]-o<0,"expected ."+e+" to decrease","expected ."+e+" to not decrease")}var A=t.Assertion,C=(Object.prototype.toString,e.flag);["to","be","been","is","and","has","have","with","that","which","at","of","same"].forEach(function(t){A.addProperty(t,function(){return this})}),A.addProperty("not",function(){C(this,"negate",!0)}),A.addProperty("deep",function(){C(this,"deep",!0)}),A.addProperty("any",function(){C(this,"any",!0),C(this,"all",!1)}),A.addProperty("all",function(){C(this,"all",!0),C(this,"any",!1)}),A.addChainableMethod("an",n),A.addChainableMethod("a",n),A.addChainableMethod("include",o,r),A.addChainableMethod("contain",o,r),A.addChainableMethod("contains",o,r),A.addChainableMethod("includes",o,r),A.addProperty("ok",function(){this.assert(C(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")}),A.addProperty("true",function(){this.assert(!0===C(this,"object"),"expected #{this} to be true","expected #{this} to be false",this.negate?!1:!0)}),A.addProperty("false",function(){this.assert(!1===C(this,"object"),"expected #{this} to be false","expected #{this} to be true",this.negate?!0:!1)}),A.addProperty("null",function(){this.assert(null===C(this,"object"),"expected #{this} to be null","expected #{this} not to be null")}),A.addProperty("undefined",function(){this.assert(void 0===C(this,"object"),"expected #{this} to be undefined","expected #{this} not to be undefined")}),A.addProperty("exist",function(){this.assert(null!=C(this,"object"),"expected #{this} to exist","expected #{this} to not exist")}),A.addProperty("empty",function(){var t=C(this,"object"),e=t;Array.isArray(t)||"string"==typeof object?e=t.length:"object"==typeof t&&(e=Object.keys(t).length),this.assert(!e,"expected #{this} to be empty","expected #{this} not to be empty")}),A.addProperty("arguments",i),A.addProperty("Arguments",i),A.addMethod("equal",s),A.addMethod("equals",s),A.addMethod("eq",s),A.addMethod("eql",a),A.addMethod("eqls",a),A.addMethod("above",u),A.addMethod("gt",u),A.addMethod("greaterThan",u),A.addMethod("least",c),A.addMethod("gte",c),A.addMethod("below",l),A.addMethod("lt",l),A.addMethod("lessThan",l),A.addMethod("most",f),A.addMethod("lte",f),A.addMethod("within",function(t,e,n){n&&C(this,"message",n);var r=C(this,"object"),o=t+".."+e;if(C(this,"doLength")){new A(r,n).to.have.property("length");var i=r.length;this.assert(i>=t&&e>=i,"expected #{this} to have a length within "+o,"expected #{this} to not have a length within "+o)}else this.assert(r>=t&&e>=r,"expected #{this} to be within "+o,"expected #{this} to not be within "+o)}),A.addMethod("instanceof",p),A.addMethod("instanceOf",p),A.addMethod("property",function(t,n,r){r&&C(this,"message",r);var o=!!C(this,"deep"),i=o?"deep property ":"property ",s=C(this,"negate"),a=C(this,"object"),u=o?e.getPathInfo(t,a):null,c=o?u.exists:e.hasProperty(t,a),l=o?u.value:a[t];if(s&&void 0!==n){if(void 0===l)throw r=null!=r?r+": ":"",new Error(r+e.inspect(a)+" has no "+i+e.inspect(t))}else this.assert(c,"expected #{this} to have a "+i+e.inspect(t),"expected #{this} to not have "+i+e.inspect(t));void 0!==n&&this.assert(n===l,"expected #{this} to have a "+i+e.inspect(t)+" of #{exp}, but got #{act}","expected #{this} to not have a "+i+e.inspect(t)+" of #{act}",n,l),C(this,"object",l)}),A.addMethod("ownProperty",h),A.addMethod("haveOwnProperty",h),A.addMethod("ownPropertyDescriptor",d),A.addMethod("haveOwnPropertyDescriptor",d),A.addChainableMethod("length",g,y),A.addMethod("lengthOf",g),A.addMethod("match",function(t,e){e&&C(this,"message",e);var n=C(this,"object");this.assert(t.exec(n),"expected #{this} to match "+t,"expected #{this} not to match "+t)}),A.addMethod("string",function(t,n){n&&C(this,"message",n);var r=C(this,"object");new A(r,n).is.a("string"),this.assert(~r.indexOf(t),"expected #{this} to contain "+e.inspect(t),"expected #{this} to not contain "+e.inspect(t))}),A.addMethod("keys",v),A.addMethod("key",v),A.addMethod("throw",m),A.addMethod("throws",m),A.addMethod("Throw",m),A.addMethod("respondTo",function(t,n){n&&C(this,"message",n);var r=C(this,"object"),o=C(this,"itself"),i="function"!==e.type(r)||o?r[t]:r.prototype[t];this.assert("function"==typeof i,"expected #{this} to respond to "+e.inspect(t),"expected #{this} to not respond to "+e.inspect(t))}),A.addProperty("itself",function(){C(this,"itself",!0)}),A.addMethod("satisfy",function(t,n){n&&C(this,"message",n);var r=C(this,"object"),o=t(r);this.assert(o,"expected #{this} to satisfy "+e.objDisplay(t),"expected #{this} to not satisfy"+e.objDisplay(t),this.negate?!1:!0,o)}),A.addMethod("closeTo",function(t,n,r){r&&C(this,"message",r);var o=C(this,"object");if(new A(o,r).is.a("number"),"number"!==e.type(t)||"number"!==e.type(n))throw new Error("the arguments to closeTo must be numbers");this.assert(Math.abs(o-t)<=n,"expected #{this} to be close to "+t+" +/- "+n,"expected #{this} not to be close to "+t+" +/- "+n)}),A.addMethod("members",function(t,n){n&&C(this,"message",n);var r=C(this,"object");new A(r).to.be.an("array"),new A(t).to.be.an("array");var o=C(this,"deep")?e.eql:void 0;return C(this,"contains")?this.assert(b(t,r,o),"expected #{this} to be a superset of #{act}","expected #{this} to not be a superset of #{act}",r,t):void this.assert(b(r,t,o)&&b(t,r,o),"expected #{this} to have the same members as #{act}","expected #{this} to not have the same members as #{act}",r,t)}),A.addChainableMethod("change",w),A.addChainableMethod("changes",w),A.addChainableMethod("increase",x),A.addChainableMethod("increases",x),A.addChainableMethod("decrease",E),A.addChainableMethod("decreases",E)}},{}],38:[function(t,e,n){e.exports=function(t,e){var n=t.Assertion,r=e.flag,o=t.assert=function(e,r){var o=new n(null,null,t.assert);o.assert(e,r,"[ negation message unavailable ]")};o.fail=function(e,n,r,i){throw r=r||"assert.fail()",new t.AssertionError(r,{actual:e,expected:n,operator:i},o.fail)},o.ok=function(t,e){new n(t,e).is.ok},o.notOk=function(t,e){new n(t,e).is.not.ok},o.equal=function(t,e,i){var s=new n(t,i,o.equal);s.assert(e==r(s,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",e,t)},o.notEqual=function(t,e,i){var s=new n(t,i,o.notEqual);s.assert(e!=r(s,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",e,t)},o.strictEqual=function(t,e,r){new n(t,r).to.equal(e)},o.notStrictEqual=function(t,e,r){new n(t,r).to.not.equal(e)},o.deepEqual=function(t,e,r){new n(t,r).to.eql(e)},o.notDeepEqual=function(t,e,r){new n(t,r).to.not.eql(e)},o.isAbove=function(t,e,r){new n(t,r).to.be.above(e)},o.isBelow=function(t,e,r){new n(t,r).to.be.below(e)},o.isTrue=function(t,e){new n(t,e).is["true"]},o.isFalse=function(t,e){new n(t,e).is["false"]},o.isNull=function(t,e){new n(t,e).to.equal(null)},o.isNotNull=function(t,e){new n(t,e).to.not.equal(null)},o.isUndefined=function(t,e){new n(t,e).to.equal(void 0)},o.isDefined=function(t,e){new n(t,e).to.not.equal(void 0)},o.isFunction=function(t,e){new n(t,e).to.be.a("function")},o.isNotFunction=function(t,e){new n(t,e).to.not.be.a("function")},o.isObject=function(t,e){new n(t,e).to.be.a("object")},o.isNotObject=function(t,e){new n(t,e).to.not.be.a("object")},o.isArray=function(t,e){new n(t,e).to.be.an("array")},o.isNotArray=function(t,e){new n(t,e).to.not.be.an("array")},o.isString=function(t,e){new n(t,e).to.be.a("string")},o.isNotString=function(t,e){new n(t,e).to.not.be.a("string")},o.isNumber=function(t,e){new n(t,e).to.be.a("number")},o.isNotNumber=function(t,e){new n(t,e).to.not.be.a("number")},o.isBoolean=function(t,e){new n(t,e).to.be.a("boolean")},o.isNotBoolean=function(t,e){new n(t,e).to.not.be.a("boolean")},o.typeOf=function(t,e,r){new n(t,r).to.be.a(e)},o.notTypeOf=function(t,e,r){new n(t,r).to.not.be.a(e)},o.instanceOf=function(t,e,r){new n(t,r).to.be.instanceOf(e)},o.notInstanceOf=function(t,e,r){new n(t,r).to.not.be.instanceOf(e)},o.include=function(t,e,r){new n(t,r,o.include).include(e)},o.notInclude=function(t,e,r){new n(t,r,o.notInclude).not.include(e)},o.match=function(t,e,r){new n(t,r).to.match(e)},o.notMatch=function(t,e,r){new n(t,r).to.not.match(e)},o.property=function(t,e,r){new n(t,r).to.have.property(e)},o.notProperty=function(t,e,r){new n(t,r).to.not.have.property(e)},o.deepProperty=function(t,e,r){new n(t,r).to.have.deep.property(e)},o.notDeepProperty=function(t,e,r){new n(t,r).to.not.have.deep.property(e)},o.propertyVal=function(t,e,r,o){new n(t,o).to.have.property(e,r)},o.propertyNotVal=function(t,e,r,o){new n(t,o).to.not.have.property(e,r)},o.deepPropertyVal=function(t,e,r,o){new n(t,o).to.have.deep.property(e,r)},o.deepPropertyNotVal=function(t,e,r,o){new n(t,o).to.not.have.deep.property(e,r)},o.lengthOf=function(t,e,r){new n(t,r).to.have.length(e)},o.Throw=function(t,e,o,i){("string"==typeof e||e instanceof RegExp)&&(o=e,e=null);var s=new n(t,i).to.Throw(e,o);return r(s,"object")},o.doesNotThrow=function(t,e,r){"string"==typeof e&&(r=e,e=null),new n(t,r).to.not.Throw(e)},o.operator=function(t,o,i,s){var a;switch(o){case"==":a=t==i;break;case"===":a=t===i;break;case">":a=t>i;break;case">=":a=t>=i;break;case"<":a=i>t;break;case"<=":a=i>=t;break;case"!=":a=t!=i;break;case"!==":a=t!==i;break;default:throw new Error('Invalid operator "'+o+'"')}var u=new n(a,s);u.assert(!0===r(u,"object"),"expected "+e.inspect(t)+" to be "+o+" "+e.inspect(i),"expected "+e.inspect(t)+" to not be "+o+" "+e.inspect(i))},o.closeTo=function(t,e,r,o){new n(t,o).to.be.closeTo(e,r)},o.sameMembers=function(t,e,r){new n(t,r).to.have.same.members(e)},o.sameDeepMembers=function(t,e,r){new n(t,r).to.have.same.deep.members(e)},o.includeMembers=function(t,e,r){new n(t,r).to.include.members(e)},o.changes=function(t,e,r){new n(t).to.change(e,r)},o.doesNotChange=function(t,e,r){new n(t).to.not.change(e,r)},o.increases=function(t,e,r){new n(t).to.increase(e,r)},o.doesNotIncrease=function(t,e,r){new n(t).to.not.increase(e,r)},o.decreases=function(t,e,r){new n(t).to.decrease(e,r)},o.doesNotDecrease=function(t,e,r){new n(t).to.not.decrease(e,r)},o.ifError=function(t,e){new n(t,e).to.not.be.ok},function i(t,e){return o[e]=o[t],i}("Throw","throw")("Throw","throws")}},{}],39:[function(t,e,n){e.exports=function(t,e){t.expect=function(e,n){return new t.Assertion(e,n)},t.expect.fail=function(e,n,r,o){throw r=r||"expect.fail()",new t.AssertionError(r,{actual:e,expected:n,operator:o},t.expect.fail)}}},{}],40:[function(t,e,n){e.exports=function(t,e){function n(){function e(){return this instanceof String||this instanceof Number||this instanceof Boolean?new r(this.valueOf(),null,e):new r(this,null,e)}function n(t){Object.defineProperty(this,"should",{value:t,enumerable:!0,configurable:!0,writable:!0})}Object.defineProperty(Object.prototype,"should",{set:n,get:e,configurable:!0});var o={};return o.fail=function(e,n,r,i){throw r=r||"should.fail()",new t.AssertionError(r,{actual:e,expected:n,operator:i},o.fail)},o.equal=function(t,e,n){new r(t,n).to.equal(e)},o.Throw=function(t,e,n,o){new r(t,o).to.Throw(e,n)},o.exist=function(t,e){new r(t,e).to.exist},o.not={},o.not.equal=function(t,e,n){new r(t,n).to.not.equal(e)},o.not.Throw=function(t,e,n,o){new r(t,o).to.not.Throw(e,n)},o.not.exist=function(t,e){new r(t,e).to.not.exist},o["throw"]=o.Throw,o.not["throw"]=o.not.Throw,o}var r=t.Assertion;t.should=n,t.Should=n}},{}],41:[function(t,e,n){var r=t("./transferFlags"),o=t("./flag"),i=t("../config"),s="__proto__"in Object,a=/^(?:length|name|arguments|caller)$/,u=Function.prototype.call,c=Function.prototype.apply;e.exports=function(t,e,n,l){"function"!=typeof l&&(l=function(){});var f={method:n,chainingBehavior:l};t.__methods||(t.__methods={}),t.__methods[e]=f,Object.defineProperty(t,e,{get:function(){f.chainingBehavior.call(this);var e=function p(){var t=o(this,"ssfi");t&&i.includeStack===!1&&o(this,"ssfi",p);var e=f.method.apply(this,arguments);return void 0===e?this:e};if(s){var n=e.__proto__=Object.create(this);n.call=u,n.apply=c}else{var l=Object.getOwnPropertyNames(t);l.forEach(function(n){if(!a.test(n)){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r)}})}return r(this,e),e},configurable:!0})}},{"../config":36,"./flag":44,"./transferFlags":60}],42:[function(t,e,n){var r=t("../config"),o=t("./flag");e.exports=function(t,e,n){t[e]=function(){var i=o(this,"ssfi");i&&r.includeStack===!1&&o(this,"ssfi",t[e]);var s=n.apply(this,arguments);return void 0===s?this:s}}},{"../config":36,"./flag":44}],43:[function(t,e,n){e.exports=function(t,e,n){Object.defineProperty(t,e,{get:function(){var t=n.call(this);return void 0===t?this:t},configurable:!0})}},{}],44:[function(t,e,n){e.exports=function(t,e,n){var r=t.__flags||(t.__flags=Object.create(null));return 3!==arguments.length?r[e]:void(r[e]=n)}},{}],45:[function(t,e,n){e.exports=function(t,e){return e.length>4?e[4]:t._obj}},{}],46:[function(t,e,n){e.exports=function(t){var e=[];for(var n in t)e.push(n);return e}},{}],47:[function(t,e,n){var r=t("./flag"),o=t("./getActual"),i=(t("./inspect"),t("./objDisplay"));e.exports=function(t,e){var n=r(t,"negate"),s=r(t,"object"),a=e[3],u=o(t,e),c=n?e[2]:e[1],l=r(t,"message");return"function"==typeof c&&(c=c()),c=c||"",c=c.replace(/#{this}/g,i(s)).replace(/#{act}/g,i(u)).replace(/#{exp}/g,i(a)),l?l+": "+c:c}},{"./flag":44,"./getActual":45,"./inspect":54,"./objDisplay":55}],48:[function(t,e,n){e.exports=function(t){if(t.name)return t.name;var e=/^\s?function ([^(]*)\(/.exec(t);return e&&e[1]?e[1]:""}},{}],49:[function(t,e,n){function r(t){var e=t.replace(/([^\\])\[/g,"$1.["),n=e.match(/(\\\.|[^.]+?)+/g);return n.map(function(t){var e=/^\[(\d+)\]$/,n=e.exec(t);return n?{i:parseFloat(n[1])}:{p:t.replace(/\\([.\[\]])/g,"$1")}})}function o(t,e,n){var r,o=e;n=void 0===n?t.length:n;for(var i=0,s=n;s>i;i++){var a=t[i];o?("undefined"!=typeof a.p?o=o[a.p]:"undefined"!=typeof a.i&&(o=o[a.i]),i==s-1&&(r=o)):r=void 0}return r}var i=t("./hasProperty");e.exports=function(t,e){var n=r(t),s=n[n.length-1],a={parent:n.length>1?o(n,e,n.length-1):e,name:s.p||s.i,value:o(n,e)};return a.exists=i(a.name,a.parent),a}},{"./hasProperty":52}],50:[function(t,e,n){var r=t("./getPathInfo");e.exports=function(t,e){var n=r(t,e);return n.value}},{"./getPathInfo":49}],51:[function(t,e,n){e.exports=function(t){function e(t){-1===n.indexOf(t)&&n.push(t)}for(var n=Object.getOwnPropertyNames(subject),r=Object.getPrototypeOf(subject);null!==r;)Object.getOwnPropertyNames(r).forEach(e),r=Object.getPrototypeOf(r);return n}},{}],52:[function(t,e,n){var r=t("./type"),o={number:Number,string:String};e.exports=function(t,e){var n=r(e);return"null"===n||"undefined"===n?!1:(o[n]&&"object"!=typeof e&&(e=new o[n](e)),t in e)}},{"./type":61}],53:[function(t,e,n){var n=e.exports={};n.test=t("./test"),n.type=t("./type"),n.getMessage=t("./getMessage"),n.getActual=t("./getActual"),n.inspect=t("./inspect"),n.objDisplay=t("./objDisplay"),n.flag=t("./flag"),n.transferFlags=t("./transferFlags"),n.eql=t("deep-eql"),n.getPathValue=t("./getPathValue"),n.getPathInfo=t("./getPathInfo"),n.hasProperty=t("./hasProperty"),n.getName=t("./getName"),n.addProperty=t("./addProperty"),n.addMethod=t("./addMethod"),n.overwriteProperty=t("./overwriteProperty"),n.overwriteMethod=t("./overwriteMethod"),n.addChainableMethod=t("./addChainableMethod"),n.overwriteChainableMethod=t("./overwriteChainableMethod")},{"./addChainableMethod":41,"./addMethod":42,"./addProperty":43,"./flag":44,"./getActual":45,"./getMessage":47,"./getName":48,"./getPathInfo":49,"./getPathValue":50,"./hasProperty":52,"./inspect":54,"./objDisplay":55,"./overwriteChainableMethod":56,"./overwriteMethod":57,"./overwriteProperty":58,"./test":59,"./transferFlags":60,"./type":61,"deep-eql":63}],54:[function(t,e,n){function r(t,e,n,r){var i={showHidden:e,seen:[],stylize:function(t){return t}};return o(i,t,"undefined"==typeof n?2:n)}function o(t,e,r){if(e&&"function"==typeof e.inspect&&e.inspect!==n.inspect&&(!e.constructor||e.constructor.prototype!==e)){var d=e.inspect(r);return"string"!=typeof d&&(d=o(t,d,r)),d}var b=i(t,e);if(b)return b;if(m(e)){if("outerHTML"in e)return e.outerHTML;try{if(document.xmlVersion){var w=new XMLSerializer;return w.serializeToString(e)}var x="http://www.w3.org/1999/xhtml",E=document.createElementNS(x,"_");return E.appendChild(e.cloneNode(!1)),html=E.innerHTML.replace("><",">"+e.innerHTML+"<"),E.innerHTML="",html}catch(A){}}var C=v(e),T=t.showHidden?g(e):C;if(0===T.length||h(e)&&(1===T.length&&"stack"===T[0]||2===T.length&&"description"===T[0]&&"stack"===T[1])){if("function"==typeof e){var S=y(e),j=S?": "+S:"";return t.stylize("[Function"+j+"]","special")}if(f(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(p(e))return t.stylize(Date.prototype.toUTCString.call(e),"date");if(h(e))return s(e)}var P="",O=!1,k=["{","}"];if(l(e)&&(O=!0,k=["[","]"]),"function"==typeof e){var S=y(e),j=S?": "+S:"";P=" [Function"+j+"]"}if(f(e)&&(P=" "+RegExp.prototype.toString.call(e)),p(e)&&(P=" "+Date.prototype.toUTCString.call(e)),h(e))return s(e);if(0===T.length&&(!O||0==e.length))return k[0]+P+k[1];if(0>r)return f(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var M;return M=O?a(t,e,r,C,T):T.map(function(n){return u(t,e,r,C,n,O)}),t.seen.pop(),c(M,P,k)}function i(t,e){switch(typeof e){case"undefined":return t.stylize("undefined","undefined");case"string":var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string");case"number":return 0===e&&1/e===-(1/0)?t.stylize("-0","number"):t.stylize(""+e,"number");case"boolean":return t.stylize(""+e,"boolean")}return null===e?t.stylize("null","null"):void 0}function s(t){return"["+Error.prototype.toString.call(t)+"]"}function a(t,e,n,r,o){for(var i=[],s=0,a=e.length;a>s;++s)i.push(Object.prototype.hasOwnProperty.call(e,String(s))?u(t,e,n,r,String(s),!0):"");return o.forEach(function(o){o.match(/^\d+$/)||i.push(u(t,e,n,r,o,!0))}),i}function u(t,e,n,r,i,s){var a,u;if(e.__lookupGetter__&&(e.__lookupGetter__(i)?u=e.__lookupSetter__(i)?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):e.__lookupSetter__(i)&&(u=t.stylize("[Setter]","special"))),r.indexOf(i)<0&&(a="["+i+"]"),u||(t.seen.indexOf(e[i])<0?(u=null===n?o(t,e[i],null):o(t,e[i],n-1),u.indexOf("\n")>-1&&(u=s?u.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+u.split("\n").map(function(t){return"   "+t}).join("\n"))):u=t.stylize("[Circular]","special")),"undefined"==typeof a){if(s&&i.match(/^\d+$/))return u;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+u}function c(t,e,n){var r=0,o=t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.length+1},0);return o>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function l(t){return Array.isArray(t)||"object"==typeof t&&"[object Array]"===d(t)}function f(t){return"object"==typeof t&&"[object RegExp]"===d(t)}function p(t){return"object"==typeof t&&"[object Date]"===d(t)}function h(t){return"object"==typeof t&&"[object Error]"===d(t)}function d(t){return Object.prototype.toString.call(t)}var y=t("./getName"),g=t("./getProperties"),v=t("./getEnumerableProperties");e.exports=r;var m=function(t){return"object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&1===t.nodeType&&"string"==typeof t.nodeName}},{"./getEnumerableProperties":46,"./getName":48,"./getProperties":51}],55:[function(t,e,n){var r=t("./inspect"),o=t("../config");e.exports=function(t){var e=r(t),n=Object.prototype.toString.call(t);if(o.truncateThreshold&&e.length>=o.truncateThreshold){if("[object Function]"===n)return t.name&&""!==t.name?"[Function: "+t.name+"]":"[Function]";if("[object Array]"===n)return"[ Array("+t.length+") ]";if("[object Object]"===n){var i=Object.keys(t),s=i.length>2?i.splice(0,2).join(", ")+", ...":i.join(", ");return"{ Object ("+s+") }"}return e}return e}},{"../config":36,"./inspect":54}],56:[function(t,e,n){e.exports=function(t,e,n,r){var o=t.__methods[e],i=o.chainingBehavior;o.chainingBehavior=function(){var t=r(i).call(this);return void 0===t?this:t};var s=o.method;o.method=function(){var t=n(s).apply(this,arguments);return void 0===t?this:t}}},{}],57:[function(t,e,n){e.exports=function(t,e,n){var r=t[e],o=function(){return this};r&&"function"==typeof r&&(o=r),t[e]=function(){var t=n(o).apply(this,arguments);return void 0===t?this:t}}},{}],58:[function(t,e,n){e.exports=function(t,e,n){var r=Object.getOwnPropertyDescriptor(t,e),o=function(){};r&&"function"==typeof r.get&&(o=r.get),Object.defineProperty(t,e,{get:function(){var t=n(o).call(this);return void 0===t?this:t},configurable:!0})}},{}],59:[function(t,e,n){var r=t("./flag");e.exports=function(t,e){var n=r(t,"negate"),o=e[0];return n?!o:o}},{"./flag":44}],60:[function(t,e,n){e.exports=function(t,e,n){var r=t.__flags||(t.__flags=Object.create(null));e.__flags||(e.__flags=Object.create(null)),n=3===arguments.length?n:!0;for(var o in r)(n||"object"!==o&&"ssfi"!==o&&"message"!=o)&&(e.__flags[o]=r[o])}},{}],61:[function(t,e,n){var r={"[object Arguments]":"arguments","[object Array]":"array","[object Date]":"date","[object Function]":"function","[object Number]":"number","[object RegExp]":"regexp","[object String]":"string"};e.exports=function(t){var e=Object.prototype.toString.call(t);return r[e]?r[e]:null===t?"null":void 0===t?"undefined":t===Object(t)?"object":typeof t}},{}],62:[function(t,e,n){function r(){function t(t,n){Object.keys(n).forEach(function(r){~e.indexOf(r)||(t[r]=n[r])})}var e=[].slice.call(arguments);return function(){for(var e=[].slice.call(arguments),n=0,r={};n<e.length;n++)t(r,e[n]);return r}}function o(t,e,n){var o=r("name","message","stack","constructor","toJSON"),i=o(e||{});this.message=t||"Unspecified AssertionError",this.showDiff=!1;for(var s in i)this[s]=i[s];n=n||arguments.callee,n&&Error.captureStackTrace&&Error.captureStackTrace(this,n)}e.exports=o,o.prototype=Object.create(Error.prototype),o.prototype.name="AssertionError",o.prototype.constructor=o,o.prototype.toJSON=function(t){var e=r("constructor","toJSON","stack"),n=e({name:this.name},this);return!1!==t&&this.stack&&(n.stack=this.stack),n}},{}],63:[function(t,e,n){e.exports=t("./lib/eql")},{"./lib/eql":64}],64:[function(t,e,n){function r(t,e,n){return o(t,e)?!0:"date"===y(t)?s(t,e):"regexp"===y(t)?a(t,e):d.isBuffer(t)?f(t,e):"arguments"===y(t)?u(t,e,n):i(t,e)?"object"!==y(t)&&"object"!==y(e)&&"array"!==y(t)&&"array"!==y(e)?o(t,e):h(t,e,n):!1}function o(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e}function i(t,e){return y(t)===y(e)}function s(t,e){return"date"!==y(e)?!1:o(t.getTime(),e.getTime())}function a(t,e){return"regexp"!==y(e)?!1:o(t.toString(),e.toString())}function u(t,e,n){return"arguments"!==y(e)?!1:(t=[].slice.call(t),e=[].slice.call(e),r(t,e,n))}function c(t){var e=[];for(var n in t)e.push(n);return e}function l(t,e){if(t.length!==e.length)return!1;for(var n=0,r=!0;n<t.length;n++)if(t[n]!==e[n]){r=!1;break}return r}function f(t,e){return d.isBuffer(e)?l(t,e):!1}function p(t){return null!==t&&void 0!==t}function h(t,e,n){if(!p(t)||!p(e))return!1;if(t.prototype!==e.prototype)return!1;var o;if(n){for(o=0;o<n.length;o++)if(n[o][0]===t&&n[o][1]===e||n[o][0]===e&&n[o][1]===t)return!0}else n=[];try{var i=c(t),s=c(e)}catch(a){return!1}if(i.sort(),s.sort(),!l(i,s))return!1;n.push([t,e]);var u;for(o=i.length-1;o>=0;o--)if(u=i[o],!r(t[u],e[u],n))return!1;return!0}var d,y=t("type-detect");try{d=t("buffer").Buffer}catch(g){d={},d.isBuffer=function(){return!1}}e.exports=r},{buffer:25,"type-detect":65}],65:[function(t,e,n){e.exports=t("./lib/type")},{"./lib/type":66}],66:[function(t,e,n){function r(t){var e=Object.prototype.toString.call(t);return i[e]?i[e]:null===t?"null":void 0===t?"undefined":t===Object(t)?"object":typeof t}function o(){this.tests={}}var n=e.exports=r,i={"[object Array]":"array","[object RegExp]":"regexp","[object Function]":"function","[object Arguments]":"arguments","[object Date]":"date"};n.Library=o,o.prototype.of=r,o.prototype.define=function(t,e){return 1===arguments.length?this.tests[t]:(this.tests[t]=e,this)},o.prototype.test=function(t,e){if(e===r(t))return!0;var n=this.tests[e];if(n&&"regexp"===r(n))return n.test(t);if(n&&"function"===r(n))return n(t);throw new ReferenceError('Type test "'+e+'" not defined or invalid.')}},{}],67:[function(t,e,n){"use strict";!function(){function n(t,e,n){r=n.exports=t("./sinon/util/core"),t("./sinon/extend"),t("./sinon/typeOf"),t("./sinon/times_in_words"),t("./sinon/spy"),t("./sinon/call"),t("./sinon/behavior"),t("./sinon/stub"),t("./sinon/mock"),t("./sinon/collection"),t("./sinon/assert"),t("./sinon/sandbox"),t("./sinon/test"),t("./sinon/test_case"),t("./sinon/match"),t("./sinon/format"),t("./sinon/log_error")}var r,o="undefined"!=typeof e&&e.exports&&"function"==typeof t,i="function"==typeof define&&"object"==typeof define.amd&&define.amd;return i?define(n):o?(n(t,e.exports,e),r=e.exports):r={},r}()},{"./sinon/assert":68,"./sinon/behavior":69,"./sinon/call":70,"./sinon/collection":71,"./sinon/extend":72,"./sinon/format":73,"./sinon/log_error":74,"./sinon/match":75,"./sinon/mock":76,"./sinon/sandbox":77,"./sinon/spy":78,"./sinon/stub":79,"./sinon/test":80,"./sinon/test_case":81,"./sinon/times_in_words":82,"./sinon/typeOf":83,"./sinon/util/core":84}],68:[function(t,e,n){(function(n){"use strict";!function(n,r){function o(t){function e(){for(var t,n=0,r=arguments.length;r>n;++n)t=arguments[n],t||a.fail("fake is not a spy"),t.proxy?e(t.proxy):("function"!=typeof t&&a.fail(t+" is not a function"),"function"!=typeof t.getCall&&a.fail(t+" is not stubbed"))}function n(t,e){t=t||r;var n=t.fail||a.fail;n.call(t,e)}function o(t,r,o){2==arguments.length&&(o=r,r=t),a[t]=function(i){e(i);var u=s.call(arguments,1),c=!1;c="function"==typeof r?!r(i):"function"==typeof i[r]?!i[r].apply(i,u):!i[r],c?n(this,(i.printf||i.proxy.printf).apply(i,[o].concat(u))):a.pass(t)}}function i(t,e){return!t||/^fail/.test(e)?e:t+e.slice(0,1).toUpperCase()+e.slice(1)}var a;return a={failException:"AssertError",fail:function(t){var e=new Error(t);throw e.name=this.failException||a.failException,e},pass:function(t){},callOrder:function(){e.apply(null,arguments);var r="",o="";if(t.calledInOrder(arguments))a.pass("callOrder");else{try{r=[].join.call(arguments,", ");for(var i=s.call(arguments),u=i.length;u;)i[--u].called||i.splice(u,1);o=t.orderByFirstCall(i).join(", ")}catch(c){}n(this,"expected "+r+" to be called in order but were called as "+o)}},callCount:function(r,o){if(e(r),r.callCount!=o){var i="expected %n to be called "+t.timesInWords(o)+" but was called %c%C";n(this,r.printf(i))}else a.pass("callCount")},expose:function(t,e){if(!t)throw new TypeError("target is null or undefined");var n=e||{},r="undefined"==typeof n.prefix&&"assert"||n.prefix,o="undefined"==typeof n.includeFail||!!n.includeFail;for(var s in this)"expose"==s||!o&&/^(fail)/.test(s)||(t[i(r,s)]=this[s]);return t},match:function(e,r){var o=t.match(r);if(o.test(e))a.pass("match");else{var i=["expected value to match","    expected = "+t.format(r),"    actual = "+t.format(e)];n(this,i.join("\n"))}}},o("called","expected %n to have been called at least once but was never called"),o("notCalled",function(t){return!t.called},"expected %n to not have been called but was called %c%C"),o("calledOnce","expected %n to be called once but was called %c%C"),o("calledTwice","expected %n to be called twice but was called %c%C"),
o("calledThrice","expected %n to be called thrice but was called %c%C"),o("calledOn","expected %n to be called with %1 as this but was called with %t"),o("alwaysCalledOn","expected %n to always be called with %1 as this but was called with %t"),o("calledWithNew","expected %n to be called with new"),o("alwaysCalledWithNew","expected %n to always be called with new"),o("calledWith","expected %n to be called with arguments %*%C"),o("calledWithMatch","expected %n to be called with match %*%C"),o("alwaysCalledWith","expected %n to always be called with arguments %*%C"),o("alwaysCalledWithMatch","expected %n to always be called with match %*%C"),o("calledWithExactly","expected %n to be called with exact arguments %*%C"),o("alwaysCalledWithExactly","expected %n to always be called with exact arguments %*%C"),o("neverCalledWith","expected %n to never be called with arguments %*%C"),o("neverCalledWithMatch","expected %n to never be called with match %*%C"),o("threw","%n did not throw exception%C"),o("alwaysThrew","%n did not always throw exception%C"),t.assert=a,a}function i(t,e,n){var r=t("./util/core");t("./match"),t("./format"),n.exports=o(r)}var s=Array.prototype.slice,a="undefined"!=typeof e&&e.exports&&"function"==typeof t,u="function"==typeof define&&"object"==typeof define.amd&&define.amd;if(u)define(i);else if(a)i(t,e.exports,e);else{if(!n)return;o(n)}}("object"==typeof sinon&&sinon||null,"undefined"!=typeof window?window:"undefined"!=typeof self?self:n)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./format":73,"./match":75,"./util/core":84}],69:[function(t,e,n){(function(n){"use strict";!function(r){function o(t,e){return"string"==typeof t?(this.exception=new Error(e||""),this.exception.name=t):this.exception=t?t:new Error("Error"),this}function i(t,e){var n=t.callArgAt;if(n>=0)return e[n];var r;n===l&&(r=e),n===f&&(r=u.call(e).reverse());for(var o=t.callArgProp,i=0,s=r.length;s>i;++i){if(!o&&"function"==typeof r[i])return r[i];if(o&&r[i]&&"function"==typeof r[i][o])return r[i][o]}return null}function s(t){function e(e,n,r){if(e.callArgAt<0){var o;return o=e.callArgProp?t.functionName(e.stub)+" expected to yield to '"+e.callArgProp+"', but no object with such a property was passed.":t.functionName(e.stub)+" expected to yield, but no callback was passed.",r.length>0&&(o+=" Received ["+c.call(r,", ")+"]"),o}return"argument at index "+e.callArgAt+" is not a function: "+n}function n(t,n){if("number"==typeof t.callArgAt){var r=i(t,n);if("function"!=typeof r)throw new TypeError(e(t,r,n));t.callbackAsync?p(function(){r.apply(t.callbackContext,t.callbackArguments)}):r.apply(t.callbackContext,t.callbackArguments)}}var r={create:function(e){var n=t.extend({},t.behavior);return delete n.create,n.stub=e,n},isPresent:function(){return"number"==typeof this.callArgAt||this.exception||"number"==typeof this.returnArgAt||this.returnThis||this.returnValueDefined},invoke:function(t,e){if(n(this,e),this.exception)throw this.exception;return"number"==typeof this.returnArgAt?e[this.returnArgAt]:this.returnThis?t:this.returnValue},onCall:function(t){return this.stub.onCall(t)},onFirstCall:function(){return this.stub.onFirstCall()},onSecondCall:function(){return this.stub.onSecondCall()},onThirdCall:function(){return this.stub.onThirdCall()},withArgs:function(){throw new Error('Defining a stub by invoking "stub.onCall(...).withArgs(...)" is not supported. Use "stub.withArgs(...).onCall(...)" to define sequential behavior for calls with certain arguments.')},callsArg:function(t){if("number"!=typeof t)throw new TypeError("argument index is not number");return this.callArgAt=t,this.callbackArguments=[],this.callbackContext=void 0,this.callArgProp=void 0,this.callbackAsync=!1,this},callsArgOn:function(t,e){if("number"!=typeof t)throw new TypeError("argument index is not number");if("object"!=typeof e)throw new TypeError("argument context is not an object");return this.callArgAt=t,this.callbackArguments=[],this.callbackContext=e,this.callArgProp=void 0,this.callbackAsync=!1,this},callsArgWith:function(t){if("number"!=typeof t)throw new TypeError("argument index is not number");return this.callArgAt=t,this.callbackArguments=u.call(arguments,1),this.callbackContext=void 0,this.callArgProp=void 0,this.callbackAsync=!1,this},callsArgOnWith:function(t,e){if("number"!=typeof t)throw new TypeError("argument index is not number");if("object"!=typeof e)throw new TypeError("argument context is not an object");return this.callArgAt=t,this.callbackArguments=u.call(arguments,2),this.callbackContext=e,this.callArgProp=void 0,this.callbackAsync=!1,this},yields:function(){return this.callArgAt=l,this.callbackArguments=u.call(arguments,0),this.callbackContext=void 0,this.callArgProp=void 0,this.callbackAsync=!1,this},yieldsRight:function(){return this.callArgAt=f,this.callbackArguments=u.call(arguments,0),this.callbackContext=void 0,this.callArgProp=void 0,this.callbackAsync=!1,this},yieldsOn:function(t){if("object"!=typeof t)throw new TypeError("argument context is not an object");return this.callArgAt=l,this.callbackArguments=u.call(arguments,1),this.callbackContext=t,this.callArgProp=void 0,this.callbackAsync=!1,this},yieldsTo:function(t){return this.callArgAt=l,this.callbackArguments=u.call(arguments,1),this.callbackContext=void 0,this.callArgProp=t,this.callbackAsync=!1,this},yieldsToOn:function(t,e){if("object"!=typeof e)throw new TypeError("argument context is not an object");return this.callArgAt=l,this.callbackArguments=u.call(arguments,2),this.callbackContext=e,this.callArgProp=t,this.callbackAsync=!1,this},"throws":o,throwsException:o,returns:function(t){return this.returnValue=t,this.returnValueDefined=!0,this},returnsArg:function(t){if("number"!=typeof t)throw new TypeError("argument index is not number");return this.returnArgAt=t,this},returnsThis:function(){return this.returnThis=!0,this}};for(var s in r)r.hasOwnProperty(s)&&s.match(/^(callsArg|yields)/)&&!s.match(/Async/)&&(r[s+"Async"]=function(t){return function(){var e=this[t].apply(this,arguments);return this.callbackAsync=!0,e}}(s));return t.behavior=r,r}function a(t,e,n){var r=t("./util/core");t("./extend"),n.exports=s(r)}var u=Array.prototype.slice,c=Array.prototype.join,l=-1,f=-2,p=function(){return"object"==typeof n&&"function"==typeof n.nextTick?n.nextTick:"function"==typeof setImmediate?setImmediate:function(t){setTimeout(t,0)}}(),h="undefined"!=typeof e&&e.exports&&"function"==typeof t,d="function"==typeof define&&"object"==typeof define.amd&&define.amd;if(d)define(a);else if(h)a(t,e.exports,e);else{if(!r)return;s(r)}}("object"==typeof sinon&&sinon||null)}).call(this,t("_process"))},{"./extend":72,"./util/core":84,_process:30}],70:[function(t,e,n){"use strict";!function(n){function r(t){function e(e,n,o){var i=t.functionName(e)+n;throw o.length&&(i+=" Received ["+r.call(o).join(", ")+"]"),new Error(i)}function n(e,n,r,i,s,a){if("number"!=typeof a)throw new TypeError("Call id is not a number");var u=t.create(o);return u.proxy=e,u.thisValue=n,u.args=r,u.returnValue=i,u.exception=s,u.callId=a,u}var r=Array.prototype.slice,o={calledOn:function(e){return t.match&&t.match.isMatcher(e)?e.test(this.thisValue):this.thisValue===e},calledWith:function(){var e=arguments.length;if(e>this.args.length)return!1;for(var n=0;e>n;n+=1)if(!t.deepEqual(arguments[n],this.args[n]))return!1;return!0},calledWithMatch:function(){var e=arguments.length;if(e>this.args.length)return!1;for(var n=0;e>n;n+=1){var r=this.args[n],o=arguments[n];if(!t.match||!t.match(o).test(r))return!1}return!0},calledWithExactly:function(){return arguments.length==this.args.length&&this.calledWith.apply(this,arguments)},notCalledWith:function(){return!this.calledWith.apply(this,arguments)},notCalledWithMatch:function(){return!this.calledWithMatch.apply(this,arguments)},returned:function(e){return t.deepEqual(e,this.returnValue)},threw:function(t){return"undefined"!=typeof t&&this.exception?this.exception===t||this.exception.name===t:!!this.exception},calledWithNew:function(){return this.proxy.prototype&&this.thisValue instanceof this.proxy},calledBefore:function(t){return this.callId<t.callId},calledAfter:function(t){return this.callId>t.callId},callArg:function(t){this.args[t]()},callArgOn:function(t,e){this.args[t].apply(e)},callArgWith:function(t){this.callArgOnWith.apply(this,[t,null].concat(r.call(arguments,1)))},callArgOnWith:function(t,e){var n=r.call(arguments,2);this.args[t].apply(e,n)},"yield":function(){this.yieldOn.apply(this,[null].concat(r.call(arguments,0)))},yieldOn:function(t){for(var n=this.args,o=0,i=n.length;i>o;++o)if("function"==typeof n[o])return void n[o].apply(t,r.call(arguments,1));e(this.proxy," cannot yield since no callback was passed.",n)},yieldTo:function(t){this.yieldToOn.apply(this,[t,null].concat(r.call(arguments,1)))},yieldToOn:function(t,n){for(var o=this.args,i=0,s=o.length;s>i;++i)if(o[i]&&"function"==typeof o[i][t])return void o[i][t].apply(n,r.call(arguments,2));e(this.proxy," cannot yield to '"+t+"' since no callback was passed.",o)},toString:function(){for(var e=this.proxy.toString()+"(",n=[],r=0,o=this.args.length;o>r;++r)n.push(t.format(this.args[r]));return e=e+n.join(", ")+")","undefined"!=typeof this.returnValue&&(e+=" => "+t.format(this.returnValue)),this.exception&&(e+=" !"+this.exception.name,this.exception.message&&(e+="("+this.exception.message+")")),e}};return o.invokeCallback=o["yield"],n.toString=o.toString,t.spyCall=n,n}function o(t,e,n){var o=t("./util/core");t("./match"),t("./format"),n.exports=r(o)}var i="undefined"!=typeof e&&e.exports&&"function"==typeof t,s="function"==typeof define&&"object"==typeof define.amd&&define.amd;if(s)define(o);else if(i)o(t,e.exports,e);else{if(!n)return;r(n)}}("object"==typeof sinon&&sinon||null)},{"./format":73,"./match":75,"./util/core":84}],71:[function(t,e,n){"use strict";!function(n){function r(t){return t.fakes||(t.fakes=[]),t.fakes}function o(t,e){for(var n=r(t),o=0,i=n.length;i>o;o+=1)"function"==typeof n[o][e]&&n[o][e]()}function i(t){for(var e=r(t),n=0;n<e.length;)e.splice(n,1)}function s(t){var e={verify:function(){o(this,"verify")},restore:function(){o(this,"restore"),i(this)},reset:function(){o(this,"reset")},verifyAndRestore:function(){var t;try{this.verify()}catch(e){t=e}if(this.restore(),t)throw t},add:function(t){return u.call(r(this),t),t},spy:function(){return this.add(t.spy.apply(t,arguments))},stub:function(e,n,r){if(n){var o=e[n];if("function"!=typeof o){if(!c.call(e,n))throw new TypeError("Cannot stub non-existent own property "+n);return e[n]=r,this.add({restore:function(){e[n]=o}})}}if(!n&&e&&"object"==typeof e){var i=t.stub.apply(t,arguments);for(var s in i)"function"==typeof i[s]&&this.add(i[s]);return i}return this.add(t.stub.apply(t,arguments))},mock:function(){return this.add(t.mock.apply(t,arguments))},inject:function(t){var e=this;return t.spy=function(){return e.spy.apply(e,arguments)},t.stub=function(){return e.stub.apply(e,arguments)},t.mock=function(){return e.mock.apply(e,arguments)},t}};return t.collection=e,e}function a(t,e,n){var r=t("./util/core");t("./mock"),t("./spy"),t("./stub"),n.exports=s(r)}var u=[].push,c=Object.prototype.hasOwnProperty,l="undefined"!=typeof e&&e.exports&&"function"==typeof t,f="function"==typeof define&&"object"==typeof define.amd&&define.amd;if(f)define(a);else if(l)a(t,e.exports,e);else{if(!n)return;s(n)}}("object"==typeof sinon&&sinon||null)},{"./mock":76,"./spy":78,"./stub":79,"./util/core":84}],72:[function(t,e,n){"use strict";!function(n){function r(t){function e(t){var e,r,o,i=Array.prototype.slice.call(arguments,1);for(r=0;r<i.length;r++){e=i[r];for(o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);n&&e.hasOwnProperty("toString")&&e.toString!==t.toString&&(t.toString=e.toString)}return t}var n=function(){var t={constructor:function(){return"0"},toString:function(){return"1"},valueOf:function(){return"2"},toLocaleString:function(){return"3"},prototype:function(){return"4"},isPrototypeOf:function(){return"5"},propertyIsEnumerable:function(){return"6"},hasOwnProperty:function(){return"7"},length:function(){return"8"},unique:function(){return"9"}},e=[];for(var n in t)e.push(t[n]());return"0123456789"!==e.join("")}();return t.extend=e,t.extend}function o(t,e,n){var o=t("./util/core");n.exports=r(o)}var i="undefined"!=typeof e&&e.exports&&"function"==typeof t,s="function"==typeof define&&"object"==typeof define.amd&&define.amd;if(s)define(o);else if(i)o(t,e.exports,e);else{if(!n)return;r(n)}}("object"==typeof sinon&&sinon||null)},{"./util/core":84}],73:[function(t,e,n){"use strict";!function(n,r){function o(n){function o(t){return""+t}function i(){function t(){return e.ascii.apply(e,arguments)}var e=r.configure({quoteStrings:!1,limitChildrenCount:250});return t}function s(e){function n(t){return"object"==typeof t&&t.toString===Object.prototype.toString?r.inspect(t):t}try{var r=t("util")}catch(i){}return r?n:o}var a,u="undefined"!=typeof e&&e.exports&&"function"==typeof t;if(u)try{r=t("formatio")}catch(c){}return a=r?i():u?s():o,n.format=a,n.format}function i(t,e,n){var r=t("./util/core");n.exports=o(r)}var s="undefined"!=typeof e&&e.exports&&"function"==typeof t,a="function"==typeof define&&"object"==typeof define.amd&&define.amd;if(a)define(i);else if(s)i(t,e.exports,e);else{if(!n)return;o(n)}}("object"==typeof sinon&&sinon||null,"object"==typeof formatio&&formatio)},{"./util/core":84,formatio:91,util:32}],74:[function(t,e,n){"use strict";!function(n){function r(t){function e(){}function n(e,r){var o=e+" threw exception: ";t.log(o+"["+r.name+"] "+r.message),r.stack&&t.log(r.stack),n.setTimeout(function(){throw r.message=o+r.message,r},0)}n.setTimeout=function(t,e){i(t,e)};var r={};return r.log=t.log=e,r.logError=t.logError=n,r}function o(t,e,n){var o=t("./util/core");n.exports=r(o)}var i=setTimeout,s="undefined"!=typeof e&&e.exports&&"function"==typeof t,a="function"==typeof define&&"object"==typeof define.amd&&define.amd;if(a)define(o);else if(s)o(t,e.exports,e);else{if(!n)return;r(n)}}("object"==typeof sinon&&sinon||null)},{"./util/core":84}],75:[function(t,e,n){"use strict";!function(n){function r(t){function e(e,n,r){var o=t.typeOf(e);if(o!==n)throw new TypeError("Expected type of "+r+" to be "+n+", but was "+o)}function n(t){return i.isPrototypeOf(t)}function r(e,n){if(null===n||void 0===n)return!1;for(var o in e)if(e.hasOwnProperty(o)){var i=e[o],a=n[o];if(s.isMatcher(i)){if(!i.test(a))return!1}else if("object"===t.typeOf(i)){if(!r(i,a))return!1}else if(!t.deepEqual(i,a))return!1}return!0}function o(n,r){return function(o,i){e(o,"string","property");var a=1===arguments.length,u=r+'("'+o+'"';return a||(u+=", "+i),u+=")",s(function(e){return void 0!==e&&null!==e&&n(e,o)?a||t.deepEqual(i,e[o]):!1},u)}}var i={toString:function(){return this.message}};i.or=function(e){if(!arguments.length)throw new TypeError("Matcher expected");n(e)||(e=s(e));var r=this,o=t.create(i);return o.test=function(t){return r.test(t)||e.test(t)},o.message=r.message+".or("+e.message+")",o},i.and=function(e){if(!arguments.length)throw new TypeError("Matcher expected");n(e)||(e=s(e));var r=this,o=t.create(i);return o.test=function(t){return r.test(t)&&e.test(t)},o.message=r.message+".and("+e.message+")",o};var s=function(e,n){var o=t.create(i),s=t.typeOf(e);switch(s){case"object":if("function"==typeof e.test)return o.test=function(t){return e.test(t)===!0},o.message="match("+t.functionName(e.test)+")",o;var a=[];for(var u in e)e.hasOwnProperty(u)&&a.push(u+": "+e[u]);o.test=function(t){return r(e,t)},o.message="match("+a.join(", ")+")";break;case"number":o.test=function(t){return e==t};break;case"string":o.test=function(t){return"string"!=typeof t?!1:-1!==t.indexOf(e)},o.message='match("'+e+'")';break;case"regexp":o.test=function(t){return"string"!=typeof t?!1:e.test(t)};break;case"function":o.test=e,o.message=n?n:"match("+t.functionName(e)+")";break;default:o.test=function(n){return t.deepEqual(e,n)}}return o.message||(o.message="match("+e+")"),o};return s.isMatcher=n,s.any=s(function(){return!0},"any"),s.defined=s(function(t){return null!==t&&void 0!==t},"defined"),s.truthy=s(function(t){return!!t},"truthy"),s.falsy=s(function(t){return!t},"falsy"),s.same=function(t){return s(function(e){return t===e},"same("+t+")")},s.typeOf=function(n){return e(n,"string","type"),s(function(e){return t.typeOf(e)===n},'typeOf("'+n+'")')},s.instanceOf=function(n){return e(n,"function","type"),s(function(t){return t instanceof n},"instanceOf("+t.functionName(n)+")")},s.has=o(function(t,e){return"object"==typeof t?e in t:void 0!==t[e]},"has"),s.hasOwn=o(function(t,e){return t.hasOwnProperty(e)},"hasOwn"),s.bool=s.typeOf("boolean"),s.number=s.typeOf("number"),s.string=s.typeOf("string"),s.object=s.typeOf("object"),s.func=s.typeOf("function"),s.array=s.typeOf("array"),s.regexp=s.typeOf("regexp"),s.date=s.typeOf("date"),t.match=s,s}function o(t,e,n){var o=t("./util/core");t("./typeOf"),n.exports=r(o)}var i="undefined"!=typeof e&&e.exports&&"function"==typeof t,s="function"==typeof define&&"object"==typeof define.amd&&define.amd;if(s)define(o);else if(i)o(t,e.exports,e);else{if(!n)return;r(n)}}("object"==typeof sinon&&sinon||null)},{"./typeOf":83,"./util/core":84}],76:[function(t,e,n){"use strict";!function(n){function r(t){function e(n){return n?e.create(n):t.expectation.create("Anonymous mock")}function n(t,e){if(t)for(var n=0,r=t.length;r>n;n+=1)e(t[n])}function r(t){return 0==t?"never called":"called "+l(t)}function o(t){var e=t.minCalls,n=t.maxCalls;if("number"==typeof e&&"number"==typeof n){var r=l(e);return e!=n&&(r="at least "+r+" and at most "+l(n)),r}return"number"==typeof e?"at least "+l(e):"at most "+l(n)}function i(t){var e="number"==typeof t.minCalls;return!e||t.callCount>=t.minCalls}function s(t){return"number"!=typeof t.maxCalls?!1:t.callCount==t.maxCalls}function a(t,e){return c&&c.isMatcher(t)?t.test(e):!0}var u=[].push,c=t.match;t.extend(e,{create:function(n){if(!n)throw new TypeError("object is null");var r=t.extend({},e);return r.object=n,delete r.create,r},expects:function(e){if(!e)throw new TypeError("method is falsy");if(this.expectations||(this.expectations={},this.proxies=[]),!this.expectations[e]){this.expectations[e]=[];var n=this;t.wrapMethod(this.object,e,function(){return n.invokeMethod(e,this,arguments)}),u.call(this.proxies,e)}var r=t.expectation.create(e);return u.call(this.expectations[e],r),r},restore:function(){var t=this.object;n(this.proxies,function(e){"function"==typeof t[e].restore&&t[e].restore()})},verify:function(){var e=this.expectations||{},r=[],o=[];return n(this.proxies,function(t){n(e[t],function(t){t.met()?u.call(o,t.toString()):u.call(r,t.toString())})}),this.restore(),r.length>0?t.expectation.fail(r.concat(o).join("\n")):o.length>0&&t.expectation.pass(r.concat(o).join("\n")),!0},invokeMethod:function(e,n,r){var o,i=this.expectations&&this.expectations[e],s=i&&i.length||0;for(o=0;s>o;o+=1)if(!i[o].met()&&i[o].allowsCall(n,r))return i[o].apply(n,r);var a,c=[],l=0;for(o=0;s>o;o+=1)i[o].allowsCall(n,r)?a=a||i[o]:l+=1,u.call(c,"    "+i[o].toString());return 0===l?a.apply(n,r):(c.unshift("Unexpected call: "+t.spyCall.toString.call({proxy:e,args:r})),void t.expectation.fail(c.join("\n")))}});var l=t.timesInWords,f=Array.prototype.slice;return t.expectation={minCalls:1,maxCalls:1,create:function(e){var n=t.extend(t.stub.create(),t.expectation);return delete n.create,n.method=e,n},invoke:function(e,n,r){return this.verifyCallAllowed(n,r),t.spy.invoke.apply(this,arguments)},atLeast:function(t){if("number"!=typeof t)throw new TypeError("'"+t+"' is not number");return this.limitsSet||(this.maxCalls=null,this.limitsSet=!0),this.minCalls=t,this},atMost:function(t){if("number"!=typeof t)throw new TypeError("'"+t+"' is not number");return this.limitsSet||(this.minCalls=null,this.limitsSet=!0),this.maxCalls=t,this},never:function(){return this.exactly(0)},once:function(){return this.exactly(1)},twice:function(){return this.exactly(2)},thrice:function(){return this.exactly(3)},exactly:function(t){if("number"!=typeof t)throw new TypeError("'"+t+"' is not a number");return this.atLeast(t),this.atMost(t)},met:function(){return!this.failed&&i(this)},verifyCallAllowed:function(e,n){if(s(this)&&(this.failed=!0,t.expectation.fail(this.method+" already called "+l(this.maxCalls))),"expectedThis"in this&&this.expectedThis!==e&&t.expectation.fail(this.method+" called with "+e+" as thisValue, expected "+this.expectedThis),"expectedArguments"in this){n||t.expectation.fail(this.method+" received no arguments, expected "+t.format(this.expectedArguments)),n.length<this.expectedArguments.length&&t.expectation.fail(this.method+" received too few arguments ("+t.format(n)+"), expected "+t.format(this.expectedArguments)),this.expectsExactArgCount&&n.length!=this.expectedArguments.length&&t.expectation.fail(this.method+" received too many arguments ("+t.format(n)+"), expected "+t.format(this.expectedArguments));for(var r=0,o=this.expectedArguments.length;o>r;r+=1)a(this.expectedArguments[r],n[r])||t.expectation.fail(this.method+" received wrong arguments "+t.format(n)+", didn't match "+this.expectedArguments.toString()),t.deepEqual(this.expectedArguments[r],n[r])||t.expectation.fail(this.method+" received wrong arguments "+t.format(n)+", expected "+t.format(this.expectedArguments))}},allowsCall:function(e,n){if(this.met()&&s(this))return!1;if("expectedThis"in this&&this.expectedThis!==e)return!1;if(!("expectedArguments"in this))return!0;if(n=n||[],n.length<this.expectedArguments.length)return!1;if(this.expectsExactArgCount&&n.length!=this.expectedArguments.length)return!1;for(var r=0,o=this.expectedArguments.length;o>r;r+=1){if(!a(this.expectedArguments[r],n[r]))return!1;if(!t.deepEqual(this.expectedArguments[r],n[r]))return!1}return!0},withArgs:function(){return this.expectedArguments=f.call(arguments),this},withExactArgs:function(){return this.withArgs.apply(this,arguments),this.expectsExactArgCount=!0,this},on:function(t){return this.expectedThis=t,this},toString:function(){var e=(this.expectedArguments||[]).slice();this.expectsExactArgCount||u.call(e,"[...]");var n=t.spyCall.toString.call({proxy:this.method||"anonymous mock expectation",args:e}),i=n.replace(", [...","[, ...")+" "+o(this);return this.met()?"Expectation met: "+i:"Expected "+i+" ("+r(this.callCount)+")"},verify:function(){return this.met()?t.expectation.pass(this.toString()):t.expectation.fail(this.toString()),!0},pass:function(e){t.assert.pass(e)},fail:function(t){var e=new Error(t);throw e.name="ExpectationError",e}},t.mock=e,e}function o(t,e,n){var o=t("./util/core");t("./times_in_words"),t("./call"),t("./extend"),t("./match"),t("./spy"),t("./stub"),t("./format"),n.exports=r(o)}var i="undefined"!=typeof e&&e.exports&&"function"==typeof t,s="function"==typeof define&&"object"==typeof define.amd&&define.amd;if(s)define(o);else if(i)o(t,e.exports,e);else{if(!n)return;r(n)}}("object"==typeof sinon&&sinon||null)},{"./call":70,"./extend":72,"./format":73,"./match":75,"./spy":78,"./stub":79,"./times_in_words":82,"./util/core":84}],77:[function(t,e,n){"use strict";!function(){function n(t){function e(t,e,n,o){o&&(!e.injectInto||n in e.injectInto?r.call(t.args,o):(e.injectInto[n]=o,t.injectedKeys.push(n)))}function n(e){var n=t.create(t.sandbox);return e.useFakeServer&&("object"==typeof e.useFakeServer&&(n.serverPrototype=e.useFakeServer),n.useFakeServer()),e.useFakeTimers&&("object"==typeof e.useFakeTimers?n.useFakeTimers.apply(n,e.useFakeTimers):n.useFakeTimers()),n}var r=[].push;return t.sandbox=t.extend(t.create(t.collection),{useFakeTimers:function(){return this.clock=t.useFakeTimers.apply(t,arguments),this.add(this.clock)},serverPrototype:t.fakeServer,useFakeServer:function(){var e=this.serverPrototype||t.fakeServer;return e&&e.create?(this.server=e.create(),this.add(this.server)):null},inject:function(e){return t.collection.inject.call(this,e),this.clock&&(e.clock=this.clock),this.server&&(e.server=this.server,e.requests=this.server.requests),e.match=t.match,e},restore:function(){t.collection.restore.apply(this,arguments),this.restoreContext()},restoreContext:function(){if(this.injectedKeys){for(var t=0,e=this.injectedKeys.length;e>t;t++)delete this.injectInto[this.injectedKeys[t]];this.injectedKeys=[]}},create:function(r){if(!r)return t.create(t.sandbox);var o=n(r);o.args=o.args||[],o.injectedKeys=[],o.injectInto=r.injectInto;var i,s,a=o.inject({});if(r.properties)for(var u=0,c=r.properties.length;c>u;u++)i=r.properties[u],s=a[i]||"sandbox"==i&&o,e(o,r,i,s);else e(o,r,"sandbox",s);return o},match:t.match}),t.sandbox.useFakeXMLHttpRequest=t.sandbox.useFakeServer,t.sandbox}function r(t,e,r){var o=t("./util/core");t("./extend"),t("./util/fake_server_with_clock"),t("./util/fake_timers"),t("./collection"),r.exports=n(o)}var o="undefined"!=typeof e&&e.exports&&"function"==typeof t,i="function"==typeof define&&"object"==typeof define.amd&&define.amd;if(i)define(r);else if(o)r(t,e.exports,e);else{if(!sinon)return;n(sinon)}}()},{"./collection":71,"./extend":72,"./util/core":84,"./util/fake_server_with_clock":87,"./util/fake_timers":88}],78:[function(require,module,exports){"use strict";!function(sinon){function makeApi(sinon){function spy(t,e,n){if(!e&&"function"==typeof t)return spy.create(t);if(!t&&!e)return spy.create(function(){});if(n){for(var r=sinon.getPropertyDescriptor(t,e),o=0;o<n.length;o++)r[n[o]]=spy.create(r[n[o]]);return sinon.wrapMethod(t,e,r)}var i=t[e];return sinon.wrapMethod(t,e,spy.create(i))}function matchingFake(t,e,n){if(t)for(var r=0,o=t.length;o>r;r++)if(t[r].matches(e,n))return t[r]}function incrementCallCount(){this.called=!0,this.callCount+=1,this.notCalled=!1,this.calledOnce=1==this.callCount,this.calledTwice=2==this.callCount,this.calledThrice=3==this.callCount}function createCallProperties(){this.firstCall=this.getCall(0),this.secondCall=this.getCall(1),this.thirdCall=this.getCall(2),this.lastCall=this.getCall(this.callCount-1)}function createProxy(func,proxyLength){var p;return proxyLength?eval("p = (function proxy("+vars.substring(0,2*proxyLength-1)+") { return p.invoke(func, this, slice.call(arguments)); });"):p=function(){return p.invoke(func,this,slice.call(arguments))},p}function delegateToCalls(t,e,n,r){spyApi[t]=function(){if(!this.called)return r?r.apply(this,arguments):!1;for(var o,i=0,s=0,a=this.callCount;a>s;s+=1)if(o=this.getCall(s),o[n||t].apply(o,arguments)&&(i+=1,e))return!0;return i===this.callCount}}var push=Array.prototype.push,slice=Array.prototype.slice,callId=0,vars="a,b,c,d,e,f,g,h,i,j,k,l",uuid=0,spyApi={reset:function(){if(this.invoking){var t=new Error("Cannot reset Sinon function while invoking it. Move the call to .reset outside of the callback.");throw t.name="InvalidResetException",t}if(this.called=!1,this.notCalled=!0,this.calledOnce=!1,this.calledTwice=!1,this.calledThrice=!1,this.callCount=0,this.firstCall=null,this.secondCall=null,this.thirdCall=null,this.lastCall=null,this.args=[],this.returnValues=[],this.thisValues=[],this.exceptions=[],this.callIds=[],this.fakes)for(var e=0;e<this.fakes.length;e++)this.fakes[e].reset();return this},create:function(t,e){var n;"function"!=typeof t?t=function(){}:n=sinon.functionName(t),e||(e=t.length);var r=createProxy(t,e);return sinon.extend(r,spy),delete r.create,sinon.extend(r,t),r.reset(),r.prototype=t.prototype,r.displayName=n||"spy",r.toString=sinon.functionToString,r.instantiateFake=sinon.spy.create,r.id="spy#"+uuid++,r},invoke:function(t,e,n){var r,o,i=matchingFake(this.fakes,n);incrementCallCount.call(this),push.call(this.thisValues,e),push.call(this.args,n),push.call(this.callIds,callId++),createCallProperties.call(this);try{this.invoking=!0,o=i?i.invoke(t,e,n):(this.func||t).apply(e,n);var s=this.getCall(this.callCount-1);s.calledWithNew()&&"object"!=typeof o&&(o=e)}catch(a){r=a}finally{delete this.invoking}if(push.call(this.exceptions,r),push.call(this.returnValues,o),createCallProperties.call(this),void 0!==r)throw r;return o},named:function(t){return this.displayName=t,this},getCall:function(t){return 0>t||t>=this.callCount?null:sinon.spyCall(this,this.thisValues[t],this.args[t],this.returnValues[t],this.exceptions[t],this.callIds[t])},getCalls:function(){var t,e=[];for(t=0;t<this.callCount;t++)e.push(this.getCall(t));return e},calledBefore:function(t){return this.called?t.called?this.callIds[0]<t.callIds[t.callIds.length-1]:!0:!1},calledAfter:function(t){return this.called&&t.called?this.callIds[this.callCount-1]>t.callIds[t.callCount-1]:!1},withArgs:function(){var t=slice.call(arguments);if(this.fakes){var e=matchingFake(this.fakes,t,!0);if(e)return e}else this.fakes=[];var n=this,r=this.instantiateFake();r.matchingAguments=t,r.parent=this,push.call(this.fakes,r),r.withArgs=function(){return n.withArgs.apply(n,arguments)};for(var o=0;o<this.args.length;o++)r.matches(this.args[o])&&(incrementCallCount.call(r),push.call(r.thisValues,this.thisValues[o]),push.call(r.args,this.args[o]),push.call(r.returnValues,this.returnValues[o]),push.call(r.exceptions,this.exceptions[o]),push.call(r.callIds,this.callIds[o]));return createCallProperties.call(r),r},matches:function(t,e){var n=this.matchingAguments;return n.length<=t.length&&sinon.deepEqual(n,t.slice(0,n.length))?!e||n.length==t.length:void 0},printf:function(t){var e,n=this,r=slice.call(arguments,1);return(t||"").replace(/%(.)/g,function(t,o){return e=spyApi.formatters[o],"function"==typeof e?e.call(null,n,r):isNaN(parseInt(o,10))?"%"+o:sinon.format(r[o-1])})}};return delegateToCalls("calledOn",!0),delegateToCalls("alwaysCalledOn",!1,"calledOn"),delegateToCalls("calledWith",!0),delegateToCalls("calledWithMatch",!0),delegateToCalls("alwaysCalledWith",!1,"calledWith"),delegateToCalls("alwaysCalledWithMatch",!1,"calledWithMatch"),delegateToCalls("calledWithExactly",!0),delegateToCalls("alwaysCalledWithExactly",!1,"calledWithExactly"),delegateToCalls("neverCalledWith",!1,"notCalledWith",function(){return!0}),delegateToCalls("neverCalledWithMatch",!1,"notCalledWithMatch",function(){return!0}),delegateToCalls("threw",!0),delegateToCalls("alwaysThrew",!1,"threw"),delegateToCalls("returned",!0),delegateToCalls("alwaysReturned",!1,"returned"),delegateToCalls("calledWithNew",!0),delegateToCalls("alwaysCalledWithNew",!1,"calledWithNew"),delegateToCalls("callArg",!1,"callArgWith",function(){throw new Error(this.toString()+" cannot call arg since it was not yet invoked.")}),spyApi.callArgWith=spyApi.callArg,delegateToCalls("callArgOn",!1,"callArgOnWith",function(){throw new Error(this.toString()+" cannot call arg since it was not yet invoked.")}),spyApi.callArgOnWith=spyApi.callArgOn,delegateToCalls("yield",!1,"yield",function(){throw new Error(this.toString()+" cannot yield since it was not yet invoked.")}),spyApi.invokeCallback=spyApi["yield"],delegateToCalls("yieldOn",!1,"yieldOn",function(){throw new Error(this.toString()+" cannot yield since it was not yet invoked.")}),delegateToCalls("yieldTo",!1,"yieldTo",function(t){throw new Error(this.toString()+" cannot yield to '"+t+"' since it was not yet invoked.")}),delegateToCalls("yieldToOn",!1,"yieldToOn",function(t){throw new Error(this.toString()+" cannot yield to '"+t+"' since it was not yet invoked.")}),spyApi.formatters={c:function(t){return sinon.timesInWords(t.callCount)},n:function(t){return t.toString()},C:function(t){for(var e=[],n=0,r=t.callCount;r>n;++n){var o="    "+t.getCall(n).toString();/\n/.test(e[n-1])&&(o="\n"+o),push.call(e,o)}return e.length>0?"\n"+e.join("\n"):""},t:function(t){for(var e=[],n=0,r=t.callCount;r>n;++n)push.call(e,sinon.format(t.thisValues[n]));return e.join(", ")},"*":function(t,e){for(var n=[],r=0,o=e.length;o>r;++r)push.call(n,sinon.format(e[r]));return n.join(", ")}},sinon.extend(spy,spyApi),spy.spyCall=sinon.spyCall,sinon.spy=spy,spy}function loadDependencies(t,e,n){var r=t("./util/core");t("./call"),t("./extend"),t("./times_in_words"),t("./format"),n.exports=makeApi(r)}var isNode="undefined"!=typeof module&&module.exports&&"function"==typeof require,isAMD="function"==typeof define&&"object"==typeof define.amd&&define.amd;

if(isAMD)define(loadDependencies);else if(isNode)loadDependencies(require,module.exports,module);else{if(!sinon)return;makeApi(sinon)}}("object"==typeof sinon&&sinon||null)},{"./call":70,"./extend":72,"./format":73,"./times_in_words":82,"./util/core":84}],79:[function(t,e,n){"use strict";!function(n){function r(t){function e(n,r,o){if(o&&"function"!=typeof o&&"object"!=typeof o)throw new TypeError("Custom stub should be a function or a property descriptor");var i;if(o){if("function"==typeof o)i=t.spy&&t.spy.create?t.spy.create(o):o;else if(i=o,t.spy&&t.spy.create)for(var s=t.objectKeys(i),a=0;a<s.length;a++)i[s[a]]=t.spy.create(i[s[a]])}else{var u=0;"object"==typeof n&&"function"==typeof n[r]&&(u=n[r].length),i=e.create(u)}if(!n&&"undefined"==typeof r)return t.stub.create();if("undefined"==typeof r&&"object"==typeof n){for(var c in n)"function"==typeof n[c]&&e(n,c);return n}return t.wrapMethod(n,r,i)}function n(e){return e.defaultBehavior||r(e)||t.behavior.create(e)}function r(t){return t.parent&&o(t.parent)}function o(t){var e=t.behaviors[t.callCount-1];return e&&e.isPresent()?e:n(t)}var i=0,s={create:function(n){var r=function(){return o(r).invoke(this,arguments)};r.id="stub#"+i++;var s=r;return r=t.spy.create(r,n),r.func=s,t.extend(r,e),r.instantiateFake=t.stub.create,r.displayName="stub",r.toString=t.functionToString,r.defaultBehavior=null,r.behaviors=[],r},resetBehavior:function(){var t;if(this.defaultBehavior=null,this.behaviors=[],delete this.returnValue,delete this.returnArgAt,this.returnThis=!1,this.fakes)for(t=0;t<this.fakes.length;t++)this.fakes[t].resetBehavior()},onCall:function(e){return this.behaviors[e]||(this.behaviors[e]=t.behavior.create(this)),this.behaviors[e]},onFirstCall:function(){return this.onCall(0)},onSecondCall:function(){return this.onCall(1)},onThirdCall:function(){return this.onCall(2)}};for(var a in t.behavior)t.behavior.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&"create"!=a&&"withArgs"!=a&&"invoke"!=a&&(s[a]=function(e){return function(){return this.defaultBehavior=this.defaultBehavior||t.behavior.create(this),this.defaultBehavior[e].apply(this.defaultBehavior,arguments),this}}(a));return t.extend(e,s),t.stub=e,e}function o(t,e,n){var o=t("./util/core");t("./behavior"),t("./spy"),t("./extend"),n.exports=r(o)}var i="undefined"!=typeof e&&e.exports&&"function"==typeof t,s="function"==typeof define&&"object"==typeof define.amd&&define.amd;if(s)define(o);else if(i)o(t,e.exports,e);else{if(!n)return;r(n)}}("object"==typeof sinon&&sinon||null)},{"./behavior":69,"./extend":72,"./spy":78,"./util/core":84}],80:[function(t,e,n){"use strict";!function(n){function r(t){function e(e){function r(){var r=t.getConfig(t.config);r.injectInto=r.injectIntoThis&&this||r.injectInto;var o,i,s=t.sandbox.create(r),a=n.call(arguments),u=a.length&&a[a.length-1];"function"==typeof u&&(a[a.length-1]=function(t){if(t)throw s.restore(),o;s.verifyAndRestore(),u(t)});try{i=e.apply(this,a.concat(s.args))}catch(c){o=c}if("function"!=typeof u){if("undefined"!=typeof o)throw s.restore(),o;s.verifyAndRestore()}return i}var o=typeof e;if("function"!=o)throw new TypeError("sinon.test needs to wrap a test function, got "+o);return e.length?function(t){return r.apply(this,arguments)}:r}var n=Array.prototype.slice;return e.config={injectIntoThis:!0,injectInto:null,properties:["spy","stub","mock","clock","server","requests"],useFakeTimers:!0,useFakeServer:!0},t.test=e,e}function o(t,e,n){var o=t("./util/core");t("./sandbox"),n.exports=r(o)}var i="undefined"!=typeof e&&e.exports&&"function"==typeof t,s="function"==typeof define&&"object"==typeof define.amd&&define.amd;s?define(o):i?o(t,e.exports,e):n&&r(n)}("object"==typeof sinon&&sinon||null)},{"./sandbox":77,"./util/core":84}],81:[function(t,e,n){"use strict";!function(n){function r(t,e,n){return function(){e&&e.apply(this,arguments);var r,o;try{o=t.apply(this,arguments)}catch(i){r=i}if(n&&n.apply(this,arguments),r)throw r;return o}}function o(t){function e(e,n){if(!e||"object"!=typeof e)throw new TypeError("sinon.testCase needs an object with test functions");n=n||"test";var o,i,s,a=new RegExp("^"+n),u={},c=e.setUp,l=e.tearDown;for(o in e)if(e.hasOwnProperty(o)){if(i=e[o],/^(setUp|tearDown)$/.test(o))continue;"function"==typeof i&&a.test(o)?(s=i,(c||l)&&(s=r(i,c,l)),u[o]=t.test(s)):u[o]=e[o]}return u}return t.testCase=e,e}function i(t,e,n){var r=t("./util/core");t("./test"),n.exports=o(r)}var s="undefined"!=typeof e&&e.exports&&"function"==typeof t,a="function"==typeof define&&"object"==typeof define.amd&&define.amd;if(a)define(i);else if(s)i(t,e.exports,e);else{if(!n)return;o(n)}}("object"==typeof sinon&&sinon||null)},{"./test":80,"./util/core":84}],82:[function(t,e,n){"use strict";!function(n){function r(t){function e(t){switch(t){case 1:return"once";case 2:return"twice";case 3:return"thrice";default:return(t||0)+" times"}}return t.timesInWords=e,t.timesInWords}function o(t,e,n){var o=t("./util/core");n.exports=r(o)}var i="undefined"!=typeof e&&e.exports&&"function"==typeof t,s="function"==typeof define&&"object"==typeof define.amd&&define.amd;if(s)define(o);else if(i)o(t,e.exports,e);else{if(!n)return;r(n)}}("object"==typeof sinon&&sinon||null)},{"./util/core":84}],83:[function(t,e,n){"use strict";!function(n,r){function o(t){function e(t){if(null===t)return"null";if(void 0===t)return"undefined";var e=Object.prototype.toString.call(t);return e.substring(8,e.length-1).toLowerCase()}return t.typeOf=e,t.typeOf}function i(t,e,n){var r=t("./util/core");n.exports=o(r)}var s="undefined"!=typeof e&&e.exports&&"function"==typeof t,a="function"==typeof define&&"object"==typeof define.amd&&define.amd;if(a)define(i);else if(s)i(t,e.exports,e);else{if(!n)return;o(n)}}("object"==typeof sinon&&sinon||null,"object"==typeof formatio&&formatio)},{"./util/core":84}],84:[function(t,e,n){"use strict";!function(n){function r(t){var e=!1;try{t.appendChild(f),e=f.parentNode==t}catch(n){return!1}finally{try{t.removeChild(f)}catch(n){}}return e}function o(t){return f&&t&&1===t.nodeType&&r(t)}function i(t){return"function"==typeof t||!!(t&&t.constructor&&t.call&&t.apply)}function s(t){return"number"==typeof t&&isNaN(t)}function a(t,e){for(var n in e)p.call(t,n)||(t[n]=e[n])}function u(t){return"function"==typeof t&&"function"==typeof t.restore&&t.restore.sinon}function c(t){return t.wrapMethod=function(e,n,r){function o(t){if(i(t)){if(t.restore&&t.restore.sinon)s=new TypeError("Attempted to wrap "+n+" which is already wrapped");else if(t.calledBefore){var e=t.returns?"stubbed":"spied on";s=new TypeError("Attempted to wrap "+n+" which is already "+e)}}else s=new TypeError("Attempted to wrap "+typeof t+" property "+n+" as function");if(s)throw t&&t.stackTrace&&(s.stack+="\n--------------\n"+t.stackTrace),s}if(!e)throw new TypeError("Should wrap property of object");if("function"!=typeof r&&"object"!=typeof r)throw new TypeError("Method wrapper should be a function or a property descriptor");var s,u,c=e.hasOwnProperty?e.hasOwnProperty(n):p.call(e,n);if(h){var l,f="function"==typeof r?{value:r}:r,d=t.getPropertyDescriptor(e,n);if(d?d.restore&&d.restore.sinon&&(s=new TypeError("Attempted to wrap "+n+" which is already wrapped")):s=new TypeError("Attempted to wrap "+typeof u+" property "+n+" as function"),s)throw d&&d.stackTrace&&(s.stack+="\n--------------\n"+d.stackTrace),s;var y=t.objectKeys(f);for(l=0;l<y.length;l++)u=d[y[l]],o(u);for(a(f,d),l=0;l<y.length;l++)a(f[y[l]],d[y[l]]);Object.defineProperty(e,n,f)}else u=e[n],o(u),e[n]=r,r.displayName=n;return r.displayName=n,r.stackTrace=new Error("Stack Trace for original").stack,r.restore=function(){if(c)h&&Object.defineProperty(e,n,d);else{try{delete e[n]}catch(t){}e[n]===r&&(e[n]=u)}h||e[n]!==r||(e[n]=u)},r.restore.sinon=!0,h||a(r,u),r},t.create=function(t){var e=function(){};return e.prototype=t,new e},t.deepEqual=function e(n,r){if(t.match&&t.match.isMatcher(n))return n.test(r);if("object"!=typeof n||"object"!=typeof r)return s(n)&&s(r)?!0:n===r;if(o(n)||o(r))return n===r;if(n===r)return!0;if(null===n&&null!==r||null!==n&&null===r)return!1;if(n instanceof RegExp&&r instanceof RegExp)return n.source===r.source&&n.global===r.global&&n.ignoreCase===r.ignoreCase&&n.multiline===r.multiline;var i=Object.prototype.toString.call(n);if(i!=Object.prototype.toString.call(r))return!1;if("[object Date]"==i)return n.valueOf()===r.valueOf();var a,u=0,c=0;if("[object Array]"==i&&n.length!==r.length)return!1;for(a in n){if(u+=1,!(a in r))return!1;if(!e(n[a],r[a]))return!1}for(a in r)c+=1;return u==c},t.functionName=function(t){var e=t.displayName||t.name;if(!e){var n=t.toString().match(/function ([^\s\(]+)/);e=n&&n[1]}return e},t.functionToString=function(){if(this.getCall&&this.callCount)for(var t,e,n=this.callCount;n--;){t=this.getCall(n).thisValue;for(e in t)if(t[e]===this)return e}return this.displayName||"sinon fake"},t.objectKeys=function(t){if(t!==Object(t))throw new TypeError("sinon.objectKeys called on a non-object");var e,n=[];for(e in t)p.call(t,e)&&n.push(e);return n},t.getPropertyDescriptor=function(t,e){for(var n,r=t;r&&!(n=Object.getOwnPropertyDescriptor(r,e));)r=Object.getPrototypeOf(r);return n},t.getConfig=function(e){var n={};e=e||{};var r=t.defaultConfig;for(var o in r)r.hasOwnProperty(o)&&(n[o]=e.hasOwnProperty(o)?e[o]:r[o]);return n},t.defaultConfig={injectIntoThis:!0,injectInto:null,properties:["spy","stub","mock","clock","server","requests"],useFakeTimers:!0,useFakeServer:!0},t.timesInWords=function(t){return 1==t&&"once"||2==t&&"twice"||3==t&&"thrice"||(t||0)+" times"},t.calledInOrder=function(t){for(var e=1,n=t.length;n>e;e++)if(!t[e-1].calledBefore(t[e])||!t[e].called)return!1;return!0},t.orderByFirstCall=function(t){return t.sort(function(t,e){var n=t.getCall(0),r=e.getCall(0),o=n&&n.callId||-1,i=r&&r.callId||-1;return i>o?-1:1})},t.createStubInstance=function(e){if("function"!=typeof e)throw new TypeError("The constructor should be a function.");return t.stub(t.create(e.prototype))},t.restore=function(t){if(null!==t&&"object"==typeof t)for(var e in t)u(t[e])&&t[e].restore();else u(t)&&t.restore()},t}function l(t,e){c(e)}var f="undefined"!=typeof document&&document.createElement("div"),p=Object.prototype.hasOwnProperty,h="keys"in Object,d="undefined"!=typeof e&&e.exports&&"function"==typeof t,y="function"==typeof define&&"object"==typeof define.amd&&define.amd;if(y)define(l);else if(d)l(t,e.exports);else{if(!n)return;c(n)}}("object"==typeof sinon&&sinon||null)},{}],85:[function(t,e,n){"use strict";"undefined"==typeof sinon&&(this.sinon={}),function(){function n(t){t.Event=function(t,e,n,r){this.initEvent(t,e,n,r)},t.Event.prototype={initEvent:function(t,e,n,r){this.type=t,this.bubbles=e,this.cancelable=n,this.target=r},stopPropagation:function(){},preventDefault:function(){this.defaultPrevented=!0}},t.ProgressEvent=function(t,e,n){this.initEvent(t,!1,!1,n),this.loaded=e.loaded||null,this.total=e.total||null,this.lengthComputable=!!e.total},t.ProgressEvent.prototype=new t.Event,t.ProgressEvent.prototype.constructor=t.ProgressEvent,t.CustomEvent=function(t,e,n){this.initEvent(t,!1,!1,n),this.detail=e.detail||null},t.CustomEvent.prototype=new t.Event,t.CustomEvent.prototype.constructor=t.CustomEvent,t.EventTarget={addEventListener:function(t,e){this.eventListeners=this.eventListeners||{},this.eventListeners[t]=this.eventListeners[t]||[],o.call(this.eventListeners[t],e)},removeEventListener:function(t,e){for(var n=this.eventListeners&&this.eventListeners[t]||[],r=0,o=n.length;o>r;++r)if(n[r]==e)return n.splice(r,1)},dispatchEvent:function(t){for(var e=t.type,n=this.eventListeners&&this.eventListeners[e]||[],r=0;r<n.length;r++)"function"==typeof n[r]?n[r].call(this,t):n[r].handleEvent(t);return!!t.defaultPrevented}}}function r(t){var e=t("./core");n(e)}var o=[].push,i="undefined"!=typeof e&&e.exports&&"function"==typeof t,s="function"==typeof define&&"object"==typeof define.amd&&define.amd;s?define(r):i?r(t):n(sinon)}()},{"./core":84}],86:[function(t,e,n){"use strict";if("undefined"==typeof r)var r={};!function(){function n(){}function o(t){return n.prototype=t,new n}function i(t){var e=t;if("[object Array]"!=Object.prototype.toString.call(t)&&(e=[200,{},t]),"string"!=typeof e[2])throw new TypeError("Fake server response body should be string, but was "+typeof e[2]);return e}function s(t,e,n){var r=t.method,o=!r||r.toLowerCase()==e.toLowerCase(),i=t.url,s=!i||i==n||"function"==typeof i.test&&i.test(n);return o&&s}function a(t,e){var n=e.url;if((!/^https?:\/\//.test(n)||p.test(n))&&(n=n.replace(p,"")),s(t,this.getHTTPMethod(e),n)){if("function"==typeof t.response){var r=t.url,o=[e].concat(r&&"function"==typeof r.exec?r.exec(n).slice(1):[]);return t.response.apply(t,o)}return!0}return!1}function u(t){t.fakeServer={create:function(){var e=o(this);return this.xhr=t.xhr.supportsCORS?t.useFakeXMLHttpRequest():t.useFakeXDomainRequest(),e.requests=[],this.xhr.onCreate=function(t){e.addRequest(t)},e},addRequest:function(t){var e=this;l.call(this.requests,t),t.onSend=function(){e.handleRequest(this),e.respondImmediately?e.respond():e.autoRespond&&!e.responding&&(setTimeout(function(){e.responding=!1,e.respond()},e.autoRespondAfter||10),e.responding=!0)}},getHTTPMethod:function(t){if(this.fakeHTTPMethods&&/post/i.test(t.method)){var e=(t.requestBody||"").match(/_method=([^\b;]+)/);return e?e[1]:t.method}return t.method},handleRequest:function(t){t.async?(this.queue||(this.queue=[]),l.call(this.queue,t)):this.processRequest(t)},log:function(e,n){var r;r="Request:\n"+t.format(n)+"\n\n",r+="Response:\n"+t.format(e)+"\n\n",t.log(r)},respondWith:function(t,e,n){return 1==arguments.length&&"function"!=typeof t?void(this.response=i(t)):(this.responses||(this.responses=[]),1==arguments.length&&(n=t,e=t=null),2==arguments.length&&(n=e,e=t,t=null),void l.call(this.responses,{method:t,url:e,response:"function"==typeof n?n:i(n)}))},respond:function(){arguments.length>0&&this.respondWith.apply(this,arguments);for(var t,e=this.queue||[],n=e.splice(0,e.length);t=n.shift();)this.processRequest(t)},processRequest:function(e){try{if(e.aborted)return;var n=this.response||[404,{},""];if(this.responses)for(var r=this.responses.length,o=r-1;o>=0;o--)if(a.call(this,this.responses[o],e)){n=this.responses[o].response;break}4!=e.readyState&&(this.log(n,e),e.respond(n[0],n[1],n[2]))}catch(i){t.logError("Fake server request processing",i)}},restore:function(){return this.xhr.restore&&this.xhr.restore.apply(this.xhr,arguments)}}}function c(t,e,n){var r=t("./core");t("./fake_xdomain_request"),t("./fake_xml_http_request"),t("../format"),u(r),n.exports=r}var l=[].push,f="undefined"!=typeof window?window.location:{},p=new RegExp("^"+f.protocol+"//"+f.host),h="undefined"!=typeof e&&e.exports&&"function"==typeof t,d="function"==typeof define&&"object"==typeof define.amd&&define.amd;d?define(c):h?c(t,e.exports,e):u(r)}()},{"../format":73,"./core":84,"./fake_xdomain_request":89,"./fake_xml_http_request":90}],87:[function(t,e,n){"use strict";!function(){function n(t){function e(){}e.prototype=t.fakeServer,t.fakeServerWithClock=new e,t.fakeServerWithClock.addRequest=function(e){if(e.async&&("object"==typeof setTimeout.clock?this.clock=setTimeout.clock:(this.clock=t.useFakeTimers(),this.resetClock=!0),!this.longestTimeout)){var n=this.clock.setTimeout,r=this.clock.setInterval,o=this;this.clock.setTimeout=function(t,e){return o.longestTimeout=Math.max(e,o.longestTimeout||0),n.apply(this,arguments)},this.clock.setInterval=function(t,e){return o.longestTimeout=Math.max(e,o.longestTimeout||0),r.apply(this,arguments)}}return t.fakeServer.addRequest.call(this,e)},t.fakeServerWithClock.respond=function(){var e=t.fakeServer.respond.apply(this,arguments);return this.clock&&(this.clock.tick(this.longestTimeout||0),this.longestTimeout=0,this.resetClock&&(this.clock.restore(),this.resetClock=!1)),e},t.fakeServerWithClock.restore=function(){return this.clock&&this.clock.restore(),t.fakeServer.restore.apply(this,arguments)}}function r(t){var e=t("./core");t("./fake_server"),t("./fake_timers"),n(e)}var o="undefined"!=typeof e&&e.exports&&"function"==typeof t,i="function"==typeof define&&"object"==typeof define.amd&&define.amd;i?define(r):o?r(t):n(sinon)}()},{"./core":84,"./fake_server":86,"./fake_timers":88}],88:[function(t,e,n){(function(n){"use strict";if("undefined"==typeof r)var r={};!function(n){function o(t,e){var n="undefined"!=typeof lolex?lolex:e;t.useFakeTimers=function(){var t,e=Array.prototype.slice.call(arguments);t="string"==typeof e[0]?0:e.shift();var r=n.install(t||0,e);return r.restore=r.uninstall,r},t.clock={create:function(t){return n.createClock(t)}},t.timers={setTimeout:setTimeout,clearTimeout:clearTimeout,setImmediate:"undefined"!=typeof setImmediate?setImmediate:void 0,clearImmediate:"undefined"!=typeof clearImmediate?clearImmediate:void 0,setInterval:setInterval,clearInterval:clearInterval,Date:Date}}function i(t,e,n,r){var i=t("./core");o(i,r),n.exports=i}var s="undefined"!=typeof e&&e.exports&&"function"==typeof t,a="function"==typeof define&&"object"==typeof define.amd&&define.amd;a?define(i):s?i(t,e.exports,e,t("lolex")):o(r)}("undefined"!=typeof n&&"function"!=typeof n?n:this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./core":84,lolex:93}],89:[function(t,e,n){"use strict";"undefined"==typeof sinon&&(this.sinon={}),function(n){function r(t){function e(){this.readyState=e.UNSENT,this.requestBody=null,this.requestHeaders={},this.status=0,this.timeout=null,"function"==typeof e.onCreate&&e.onCreate(this)}function r(t){if(t.readyState!==e.OPENED)throw new Error("INVALID_STATE_ERR");if(t.sendFlag)throw new Error("INVALID_STATE_ERR")}function o(t){if(t.readyState==e.UNSENT)throw new Error("Request not sent");if(t.readyState==e.DONE)throw new Error("Request done")}function s(t){if("string"!=typeof t){var e=new Error("Attempted to respond to fake XDomainRequest with "+t+", which is not a string.");throw e.name="InvalidBodyException",e}}t.xdr=i,t.extend(e.prototype,t.EventTarget,{open:function(t,n){this.method=t,this.url=n,this.responseText=null,this.sendFlag=!1,this.readyStateChange(e.OPENED)},readyStateChange:function(n){this.readyState=n;var r="";switch(this.readyState){case e.UNSENT:break;case e.OPENED:break;case e.LOADING:this.sendFlag&&(r="onprogress");break;case e.DONE:r=this.isTimeout?"ontimeout":this.errorFlag||this.status<200||this.status>299?"onerror":"onload"}if(r&&"function"==typeof this[r])try{this[r]()}catch(o){t.logError("Fake XHR "+r+" handler",o)}},send:function(t){r(this),/^(get|head)$/i.test(this.method)||(this.requestBody=t),this.requestHeaders["Content-Type"]="text/plain;charset=utf-8",this.errorFlag=!1,this.sendFlag=!0,this.readyStateChange(e.OPENED),"function"==typeof this.onSend&&this.onSend(this)},abort:function(){this.aborted=!0,this.responseText=null,this.errorFlag=!0,this.readyState>t.FakeXDomainRequest.UNSENT&&this.sendFlag&&(this.readyStateChange(t.FakeXDomainRequest.DONE),this.sendFlag=!1)},setResponseBody:function(t){o(this),s(t);var n=this.chunkSize||10,r=0;this.responseText="";do this.readyStateChange(e.LOADING),this.responseText+=t.substring(r,r+n),r+=n;while(r<t.length);this.readyStateChange(e.DONE)},respond:function(t,e,n){this.status="number"==typeof t?t:200,this.setResponseBody(n||"")},simulatetimeout:function(){this.status=0,this.isTimeout=!0,this.responseText=void 0,this.readyStateChange(e.DONE)}}),t.extend(e,{UNSENT:0,OPENED:1,LOADING:3,DONE:4}),t.useFakeXDomainRequest=function(){return t.FakeXDomainRequest.restore=function(e){i.supportsXDR&&(n.XDomainRequest=i.GlobalXDomainRequest),delete t.FakeXDomainRequest.restore,e!==!0&&delete t.FakeXDomainRequest.onCreate},i.supportsXDR&&(n.XDomainRequest=t.FakeXDomainRequest),t.FakeXDomainRequest},t.FakeXDomainRequest=e}function o(t,e,n){var o=t("./core");t("../extend"),t("./event"),t("../log_error"),r(o),n.exports=o}var i={XDomainRequest:n.XDomainRequest};i.GlobalXDomainRequest=n.XDomainRequest,i.supportsXDR="undefined"!=typeof i.GlobalXDomainRequest,i.workingXDR=i.supportsXDR?i.GlobalXDomainRequest:!1;var s="undefined"!=typeof e&&e.exports&&"function"==typeof t,a="function"==typeof define&&"object"==typeof define.amd&&define.amd;a?define(o):s?o(t,e.exports,e):r(sinon)}(this)},{"../extend":72,"../log_error":74,"./core":84,"./event":85}],90:[function(t,e,n){(function(n){"use strict";!function(n){function r(){function t(t){e.addEventListener(t,function(n){var r=e["on"+t];r&&"function"==typeof r&&r.call(this,n)})}this.readyState=r.UNSENT,this.requestHeaders={},this.requestBody=null,this.status=0,this.statusText="",this.upload=new o,v.supportsCORS&&(this.withCredentials=!1);for(var e=this,n=["loadstart","load","abort","loadend"],i=n.length-1;i>=0;i--)t(n[i]);"function"==typeof r.onCreate&&r.onCreate(this)}function o(){this.eventListeners={progress:[],load:[],abort:[],error:[]}}function i(t){if(t.readyState!==r.OPENED)throw new Error("INVALID_STATE_ERR");if(t.sendFlag)throw new Error("INVALID_STATE_ERR")}function s(t,e){e=e.toLowerCase();for(var n in t)if(n.toLowerCase()==e)return n;return null}function a(t,e){if(t)for(var n=0,r=t.length;r>n;n+=1)e(t[n])}function u(t,e){for(var n=0;n<t.length;n++)if(e(t[n])===!0)return!0;return!1}function c(t){if(t.readyState!=r.OPENED)throw new Error("INVALID_STATE_ERR - "+t.readyState)}function l(t){if(t.readyState==r.DONE)throw new Error("Request done")}function f(t){if(t.async&&t.readyState!=r.HEADERS_RECEIVED)throw new Error("No headers received")}function p(t){if("string"!=typeof t){var e=new Error("Attempted to respond to fake XMLHttpRequest with "+t+", which is not a string.");throw e.name="InvalidBodyException",e}}function h(t){t.xhr=v,t.extend(r.prototype,t.EventTarget,{async:!0,open:function(t,e,n,o,i){if(this.method=t,this.url=e,this.async="boolean"==typeof n?n:!0,this.username=o,this.password=i,this.responseText=null,this.responseXML=null,this.requestHeaders={},this.sendFlag=!1,r.useFilters===!0){var s=arguments,a=u(r.filters,function(t){return t.apply(this,s)});if(a)return r.defake(this,arguments)}this.readyStateChange(r.OPENED)},readyStateChange:function(e){if(this.readyState=e,"function"==typeof this.onreadystatechange)try{this.onreadystatechange()}catch(n){t.logError("Fake XHR onreadystatechange handler",n)}switch(this.dispatchEvent(new t.Event("readystatechange")),this.readyState){case r.DONE:this.dispatchEvent(new t.Event("load",!1,!1,this)),this.dispatchEvent(new t.Event("loadend",!1,!1,this)),this.upload.dispatchEvent(new t.Event("load",!1,!1,this)),y&&(this.upload.dispatchEvent(new t.ProgressEvent("progress",{loaded:100,total:100})),this.dispatchEvent(new t.ProgressEvent("progress",{loaded:100,total:100})))}},setRequestHeader:function(t,e){if(i(this),m[t]||/^(Sec-|Proxy-)/.test(t))throw new Error('Refused to set unsafe header "'+t+'"');this.requestHeaders[t]?this.requestHeaders[t]+=","+e:this.requestHeaders[t]=e},setResponseHeaders:function(t){c(this),this.responseHeaders={};for(var e in t)t.hasOwnProperty(e)&&(this.responseHeaders[e]=t[e]);this.async?this.readyStateChange(r.HEADERS_RECEIVED):this.readyState=r.HEADERS_RECEIVED},send:function(e){if(i(this),!/^(get|head)$/i.test(this.method)){var n=s(this.requestHeaders,"Content-Type");if(this.requestHeaders[n]){var o=this.requestHeaders[n].split(";");this.requestHeaders[n]=o[0]+";charset=utf-8"}else e instanceof FormData||(this.requestHeaders["Content-Type"]="text/plain;charset=utf-8");this.requestBody=e}this.errorFlag=!1,this.sendFlag=this.async,this.readyStateChange(r.OPENED),"function"==typeof this.onSend&&this.onSend(this),this.dispatchEvent(new t.Event("loadstart",!1,!1,this))},abort:function(){this.aborted=!0,this.responseText=null,this.errorFlag=!0,this.requestHeaders={},this.readyState>r.UNSENT&&this.sendFlag&&(this.readyStateChange(r.DONE),this.sendFlag=!1),this.readyState=r.UNSENT,this.dispatchEvent(new t.Event("abort",!1,!1,this)),this.upload.dispatchEvent(new t.Event("abort",!1,!1,this)),"function"==typeof this.onerror&&this.onerror()},getResponseHeader:function(t){return this.readyState<r.HEADERS_RECEIVED?null:/^Set-Cookie2?$/i.test(t)?null:(t=s(this.responseHeaders,t),this.responseHeaders[t]||null)},getAllResponseHeaders:function(){if(this.readyState<r.HEADERS_RECEIVED)return"";var t="";for(var e in this.responseHeaders)this.responseHeaders.hasOwnProperty(e)&&!/^Set-Cookie2?$/i.test(e)&&(t+=e+": "+this.responseHeaders[e]+"\r\n");return t},setResponseBody:function(t){l(this),f(this),p(t);var e=this.chunkSize||10,n=0;this.responseText="";do this.async&&this.readyStateChange(r.LOADING),this.responseText+=t.substring(n,n+e),n+=e;while(n<t.length);var o=this.getResponseHeader("Content-Type");if(this.responseText&&(!o||/(text\/xml)|(application\/xml)|(\+xml)/.test(o)))try{this.responseXML=r.parseXML(this.responseText)}catch(i){}this.readyStateChange(r.DONE)},respond:function(t,e,n){this.status="number"==typeof t?t:200,this.statusText=r.statusCodes[this.status],this.setResponseHeaders(e||{}),this.setResponseBody(n||"")},uploadProgress:function(e){y&&this.upload.dispatchEvent(new t.ProgressEvent("progress",e))},downloadProgress:function(e){y&&this.dispatchEvent(new t.ProgressEvent("progress",e))},uploadError:function(e){g&&this.upload.dispatchEvent(new t.CustomEvent("error",{detail:e}))}}),t.extend(r,{UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4}),t.useFakeXMLHttpRequest=function(){return r.restore=function(t){v.supportsXHR&&(n.XMLHttpRequest=v.GlobalXMLHttpRequest),v.supportsActiveX&&(n.ActiveXObject=v.GlobalActiveXObject),delete r.restore,t!==!0&&delete r.onCreate},v.supportsXHR&&(n.XMLHttpRequest=r),v.supportsActiveX&&(n.ActiveXObject=function(t){return"Microsoft.XMLHTTP"==t||/^Msxml2\.XMLHTTP/i.test(t)?new r:new v.GlobalActiveXObject(t)}),r},t.FakeXMLHttpRequest=r}function d(t,e,n){var r=t("./core");t("../extend"),t("./event"),t("../log_error"),h(r),n.exports=r}var y="undefined"!=typeof ProgressEvent,g="undefined"!=typeof CustomEvent,v={XMLHttpRequest:n.XMLHttpRequest};v.GlobalXMLHttpRequest=n.XMLHttpRequest,v.GlobalActiveXObject=n.ActiveXObject,v.supportsActiveX="undefined"!=typeof v.GlobalActiveXObject,v.supportsXHR="undefined"!=typeof v.GlobalXMLHttpRequest,v.workingXHR=v.supportsXHR?v.GlobalXMLHttpRequest:v.supportsActiveX?function(){return new v.GlobalActiveXObject("MSXML2.XMLHTTP.3.0")}:!1,v.supportsCORS=v.supportsXHR&&"withCredentials"in new v.GlobalXMLHttpRequest;var m={"Accept-Charset":!0,"Accept-Encoding":!0,Connection:!0,"Content-Length":!0,Cookie:!0,Cookie2:!0,"Content-Transfer-Encoding":!0,Date:!0,Expect:!0,Host:!0,"Keep-Alive":!0,Referer:!0,TE:!0,Trailer:!0,"Transfer-Encoding":!0,Upgrade:!0,"User-Agent":!0,Via:!0};o.prototype.addEventListener=function(t,e){this.eventListeners[t].push(e)},o.prototype.removeEventListener=function(t,e){for(var n=this.eventListeners[t]||[],r=0,o=n.length;o>r;++r)if(n[r]==e)return n.splice(r,1)},o.prototype.dispatchEvent=function(t){for(var e,n=this.eventListeners[t.type]||[],r=0;null!=(e=n[r]);r++)e(t)};var b=function(t,e,n){switch(n.length){case 0:return t[e]();case 1:return t[e](n[0]);case 2:return t[e](n[0],n[1]);case 3:return t[e](n[0],n[1],n[2]);case 4:return t[e](n[0],n[1],n[2],n[3]);case 5:return t[e](n[0],n[1],n[2],n[3],n[4])}};r.filters=[],r.addFilter=function(t){this.filters.push(t)};var w=/MSIE 6/;r.defake=function(t,e){var n=new v.workingXHR;a(["open","setRequestHeader","send","abort","getResponseHeader","getAllResponseHeaders","addEventListener","overrideMimeType","removeEventListener"],function(e){t[e]=function(){return b(n,e,arguments)}});var o=function(e){a(e,function(e){try{t[e]=n[e]}catch(r){if(!w.test(navigator.userAgent))throw r}})},i=function(){t.readyState=n.readyState,n.readyState>=r.HEADERS_RECEIVED&&o(["status","statusText"]),n.readyState>=r.LOADING&&o(["responseText","response"]),n.readyState===r.DONE&&o(["responseXML"]),t.onreadystatechange&&t.onreadystatechange.call(t,{target:t})};if(n.addEventListener){for(var s in t.eventListeners)t.eventListeners.hasOwnProperty(s)&&a(t.eventListeners[s],function(t){n.addEventListener(s,t)});n.addEventListener("readystatechange",i)}else n.onreadystatechange=i;b(n,"open",e)},r.useFilters=!1,r.parseXML=function(t){var e;if("undefined"!=typeof DOMParser){var n=new DOMParser;e=n.parseFromString(t,"text/xml")}else e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(t);return e},r.statusCodes={100:"Continue",101:"Switching Protocols",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choice",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported"};var x="undefined"!=typeof e&&e.exports&&"function"==typeof t,E="function"==typeof define&&"object"==typeof define.amd&&define.amd;if(E)define(d);else if(x)d(t,e.exports,e);else{if("undefined"==typeof sinon)return;h(sinon)}}("undefined"!=typeof n?n:this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../extend":72,"../log_error":74,"./core":84,"./event":85}],91:[function(t,e,n){(function(n){("function"==typeof define&&define.amd&&function(t){define("formatio",["samsam"],t)}||"object"==typeof e&&function(n){e.exports=n(t("samsam"))}||function(t){this.formatio=t(this.samsam)})(function(t){"use strict";function e(t){if(!t)return"";if(t.displayName)return t.displayName;if(t.name)return t.name;var e=t.toString().match(/function\s+([^\(]+)/m);return e&&e[1]||""}function r(t,n){var r,o,i=e(n&&n.constructor),s=t.excludeConstructors||a.excludeConstructors||[];for(r=0,o=s.length;o>r;++r){if("string"==typeof s[r]&&s[r]===i)return"";if(s[r].test&&s[r].test(i))return""}return i}function o(t,e){if("object"!=typeof t)return!1;var n,r;for(n=0,r=e.length;r>n;++n)if(e[n]===t)return!0;return!1}function i(e,n,r,s){if("string"==typeof n){var a=e.quoteStrings,c="boolean"!=typeof a||a;return r||c?'"'+n+'"':n}if("function"==typeof n&&!(n instanceof RegExp))return i.func(n);if(r=r||[],o(n,r))return"[Circular]";if("[object Array]"===Object.prototype.toString.call(n))return i.array.call(e,n,r);if(!n)return String(1/n===-(1/0)?"-0":n);if(t.isElement(n))return i.element(n);if("function"==typeof n.toString&&n.toString!==Object.prototype.toString)return n.toString();var l,f;for(l=0,f=u.length;f>l;l++)if(n===u[l].object)return u[l].value;return i.object.call(e,n,r,s)}function s(t){for(var e in t)this[e]=t[e]}var a={excludeConstructors:["Object",/^.$/],quoteStrings:!0,limitChildrenCount:0},u=(Object.prototype.hasOwnProperty,[]);return"undefined"!=typeof n&&u.push({object:n,value:"[object global]"}),"undefined"!=typeof document&&u.push({object:document,value:"[object HTMLDocument]"}),"undefined"!=typeof window&&u.push({object:window,value:"[object Window]"}),i.func=function(t){return"function "+e(t)+"() {}"},i.array=function(t,e){e=e||[],e.push(t);var n,r,o=[];for(r=this.limitChildrenCount>0?Math.min(this.limitChildrenCount,t.length):t.length,n=0;r>n;++n)o.push(i(this,t[n],e));return r<t.length&&o.push("[... "+(t.length-r)+" more elements]"),"["+o.join(", ")+"]"},i.object=function(e,n,s){n=n||[],n.push(e),s=s||0;var a,u,c,l,f,p,h=[],d=t.keys(e).sort(),y=3;for(p=this.limitChildrenCount>0?Math.min(this.limitChildrenCount,d.length):d.length,l=0;p>l;++l)a=d[l],c=e[a],u=o(c,n)?"[Circular]":i(this,c,n,s+2),u=(/\s/.test(a)?'"'+a+'"':a)+": "+u,
y+=u.length,h.push(u);var g=r(this,e),v=g?"["+g+"] ":"",m="";for(l=0,f=s;f>l;++l)m+=" ";return p<d.length&&h.push("[... "+(d.length-p)+" more elements]"),y+s>80?v+"{\n  "+m+h.join(",\n  "+m)+"\n"+m+"}":v+"{ "+h.join(", ")+" }"},i.element=function(t){var e,n,r,o,i,s=t.tagName.toLowerCase(),a=t.attributes,u=[];for(r=0,o=a.length;o>r;++r)e=a.item(r),n=e.nodeName.toLowerCase().replace("html:",""),i=e.nodeValue,("contenteditable"!==n||"inherit"!==i)&&i&&u.push(n+'="'+i+'"');var c="<"+s+(u.length>0?" ":""),l=t.innerHTML;l.length>20&&(l=l.substr(0,20)+"[...]");var f=c+u.join(" ")+">"+l+"</"+s+">";return f.replace(/ contentEditable="inherit"/,"")},s.prototype={functionName:e,configure:function(t){return new s(t)},constructorName:function(t){return r(this,t)},ascii:function(t,e,n){return i(this,t,e,n)}},s.prototype})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{samsam:92}],92:[function(t,e,n){("function"==typeof define&&define.amd&&function(t){define("samsam",t)}||"object"==typeof e&&function(t){e.exports=t()}||function(t){this.samsam=t()})(function(){function t(t){var e=t;return"number"==typeof t&&t!==e}function e(t){return f.toString.call(t).split(/[ \]]/)[1]}function n(t){if("Arguments"===e(t))return!0;if("object"!=typeof t||"number"!=typeof t.length||"Array"===e(t))return!1;if("function"==typeof t.callee)return!0;try{t[t.length]=6,delete t[t.length]}catch(n){return!0}return!1}function r(t){if(!t||1!==t.nodeType||!p)return!1;try{t.appendChild(p),t.removeChild(p)}catch(e){return!1}return!0}function o(t){var e,n=[];for(e in t)f.hasOwnProperty.call(t,e)&&n.push(e);return n}function i(t){return"function"==typeof t.getTime&&t.getTime()==t.valueOf()}function s(t){return 0===t&&1/t===-(1/0)}function a(e,n){return e===n||t(e)&&t(n)?0!==e||s(e)===s(n):void 0}function u(s,u){function c(t){return"object"!=typeof t||null===t||t instanceof Boolean||t instanceof Date||t instanceof Number||t instanceof RegExp||t instanceof String?!1:!0}function l(t,e){var n;for(n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var p=[],h=[],d=[],y=[],g={};return function v(s,u,m,b){var w=typeof s,x=typeof u;if(s===u||t(s)||t(u)||null==s||null==u||"object"!==w||"object"!==x)return a(s,u);if(r(s)||r(u))return!1;var E=i(s),A=i(u);if(!(!E&&!A||E&&A&&s.getTime()===u.getTime()))return!1;if(s instanceof RegExp&&u instanceof RegExp&&s.toString()!==u.toString())return!1;var C=e(s),T=e(u),S=o(s),j=o(u);if(n(s)||n(u)){if(s.length!==u.length)return!1}else if(w!==x||C!==T||S.length!==j.length)return!1;var P,O,k,M,N,R,D,I,L,_,B;for(O=0,k=S.length;k>O;O++){if(P=S[O],!f.hasOwnProperty.call(u,P))return!1;if(M=s[P],N=u[P],R=c(M),D=c(N),I=R?l(p,M):-1,L=D?l(h,N):-1,_=-1!==I?d[I]:m+"["+JSON.stringify(P)+"]",B=-1!==L?y[L]:b+"["+JSON.stringify(P)+"]",g[_+B])return!0;if(-1===I&&R&&(p.push(M),d.push(_)),-1===L&&D&&(h.push(N),y.push(B)),R&&D&&(g[_+B]=!0),!v(M,N,_,B))return!1}return!0}(s,u,"$1","$2")}function c(t,e){if(0===e.length)return!0;var n,r,o,i;for(n=0,r=t.length;r>n;++n)if(l(t[n],e[0])){for(o=0,i=e.length;i>o;++o)if(!l(t[n+o],e[o]))return!1;return!0}return!1}var l,f=Object.prototype,p="undefined"!=typeof document&&document.createElement("div");return l=function h(t,n){if(n&&"function"==typeof n.test)return n.test(t);if("function"==typeof n)return n(t)===!0;if("string"==typeof n){n=n.toLowerCase();var r="string"==typeof t||!!t;return r&&String(t).toLowerCase().indexOf(n)>=0}if("number"==typeof n)return n===t;if("boolean"==typeof n)return n===t;if("undefined"==typeof n)return"undefined"==typeof t;if(null===n)return null===t;if("Array"===e(t)&&"Array"===e(n))return c(t,n);if(n&&"object"==typeof n){if(n===t)return!0;var o;for(o in n){var i=t[o];if("undefined"==typeof i&&"function"==typeof t.getAttribute&&(i=t.getAttribute(o)),null===n[o]||"undefined"==typeof n[o]){if(i!==n[o])return!1}else if("undefined"==typeof i||!h(i,n[o]))return!1}return!0}throw new Error("Matcher was not a string, a number, a function, a boolean or an object")},{isArguments:n,isElement:r,isDate:i,isNegZero:s,identical:a,deepEqual:u,match:l,keys:o}})},{}],93:[function(require,module,exports){(function(global){"use strict";function parseTime(t){if(!t)return 0;var e,n=t.split(":"),r=n.length,o=r,i=0;if(r>3||!/^(\d\d:){0,2}\d\d?$/.test(t))throw new Error("tick only understands numbers and 'h:m:s'");for(;o--;){if(e=parseInt(n[o],10),e>=60)throw new Error("Invalid time "+t);i+=e*Math.pow(60,r-o-1)}return 1e3*i}function getEpoch(t){if(!t)return 0;if("function"==typeof t.getTime)return t.getTime();if("number"==typeof t)return t;throw new TypeError("now should be milliseconds since UNIX epoch")}function inRange(t,e,n){return n&&n.callAt>=t&&n.callAt<=e}function mirrorDateProperties(t,e){e.now?t.now=function(){return t.clock.now}:delete t.now,e.toSource?t.toSource=function(){return e.toSource()}:delete t.toSource,t.toString=function(){return e.toString()},t.prototype=e.prototype,t.parse=e.parse,t.UTC=e.UTC,t.prototype.toUTCString=e.prototype.toUTCString;for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function createDate(){function t(e,n,r,o,i,s,a){switch(arguments.length){case 0:return new NativeDate(t.clock.now);case 1:return new NativeDate(e);case 2:return new NativeDate(e,n);case 3:return new NativeDate(e,n,r);case 4:return new NativeDate(e,n,r,o);case 5:return new NativeDate(e,n,r,o,i);case 6:return new NativeDate(e,n,r,o,i,s);default:return new NativeDate(e,n,r,o,i,s,a)}}return mirrorDateProperties(t,NativeDate)}function addTimer(t,e){if("undefined"==typeof e.func)throw new Error("Callback must be provided to timer calls");return t.timers||(t.timers={}),e.id=id++,e.createdAt=t.now,e.callAt=t.now+(e.delay||0),t.timers[e.id]=e,addTimerReturnsObject?{id:e.id,ref:function(){},unref:function(){}}:e.id}function firstTimerInRange(t,e,n){var r=t.timers,o=null;for(var i in r)inRange(e,n,r[i])&&(!o||~compareTimers(o,r[i]))&&(o=r[i]);return o}function compareTimers(t,e){return t.callAt<e.callAt?-1:t.callAt>e.callAt?1:t.immediate&&!e.immediate?-1:!t.immediate&&e.immediate?1:t.createdAt<e.createdAt?-1:t.createdAt>e.createdAt?1:t.id<e.id?-1:t.id>e.id?1:void 0}function callTimer(clock,timer){"number"==typeof timer.interval?clock.timers[timer.id].callAt+=timer.interval:delete clock.timers[timer.id];try{"function"==typeof timer.func?timer.func.apply(null,timer.args):eval(timer.func)}catch(e){var exception=e}if(clock.timers[timer.id]){if(exception)throw exception}else if(exception)throw exception}function uninstall(t,e){for(var n,r=0,o=t.methods.length;o>r;r++)if(n=t.methods[r],e[n].hadOwnProperty)e[n]=t["_"+n];else try{delete e[n]}catch(i){}t.methods=[]}function hijackMethod(t,e,n){if(n[e].hadOwnProperty=Object.prototype.hasOwnProperty.call(t,e),n["_"+e]=t[e],"Date"==e){var r=mirrorDateProperties(n[e],t[e]);t[e]=r}else{t[e]=function(){return n[e].apply(n,arguments)};for(var o in n[e])n[e].hasOwnProperty(o)&&(t[e][o]=n[e][o])}t[e].clock=n}var timeoutResult=setTimeout(function(){},0),addTimerReturnsObject="object"==typeof timeoutResult;clearTimeout(timeoutResult);var NativeDate=Date,id=1,timers={setTimeout:setTimeout,clearTimeout:clearTimeout,setImmediate:"undefined"!=typeof setImmediate?setImmediate:void 0,clearImmediate:"undefined"!=typeof clearImmediate?clearImmediate:void 0,setInterval:setInterval,clearInterval:clearInterval,Date:Date},keys=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};exports.timers=timers;var createClock=exports.createClock=function(t){var e={now:getEpoch(t),timeouts:{},Date:createDate()};return e.Date.clock=e,e.setTimeout=function(t,n){return addTimer(e,{func:t,args:Array.prototype.slice.call(arguments,2),delay:n})},e.clearTimeout=function(t){t&&(e.timers||(e.timers=[]),"object"==typeof t&&(t=t.id),t in e.timers&&delete e.timers[t])},e.setInterval=function(t,n){return addTimer(e,{func:t,args:Array.prototype.slice.call(arguments,2),delay:n,interval:n})},e.clearInterval=function(t){e.clearTimeout(t)},e.setImmediate=function(t){return addTimer(e,{func:t,args:Array.prototype.slice.call(arguments,1),immediate:!0})},e.clearImmediate=function(t){e.clearTimeout(t)},e.tick=function(t){t="number"==typeof t?t:parseTime(t);for(var n,r=e.now,o=e.now+t,i=e.now,s=firstTimerInRange(e,r,o);s&&o>=r;){if(e.timers[s.id]){r=e.now=s.callAt;try{callTimer(e,s)}catch(a){n=n||a}}s=firstTimerInRange(e,i,o),i=r}if(e.now=o,n)throw n;return e.now},e.reset=function(){e.timers={}},e};exports.install=function(t,e,n){"number"==typeof t&&(n=e,e=t,t=null),t||(t=global);var r=createClock(e);r.uninstall=function(){uninstall(r,t)},r.methods=n||[],0===r.methods.length&&(r.methods=keys(timers));for(var o=0,i=r.methods.length;i>o;o++)hijackMethod(t,r.methods[o],r);return r}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],94:[function(t,e,n){"use strict";function r(t,e,n){return e===p?t.beanFromDolphin.get(n):n}function o(t,e,n){return e===p?t.beanToDolphin.get(n):n}function i(t,e,n,r,o){var i=t[e];c(i)?Array.isArray(i)||(t[e]=i=[i]):t[e]=i=[],"undefined"==typeof o?i.splice(n,r):i.splice(n,r,o)}function s(){this.classes=new u,this.beanFromDolphin=new u,this.beanToDolphin=new u,this.classInfos=new u}t("./polyfills.js");var a=window.ObjectObserver,u=t("../bower_components/core.js/library/fn/map"),c=t("./utils.js").exists,l=0,f=1,p=2;s.prototype.registerClass=function(t){if(!this.classes.has(t.id)){var e={};t.attributes.forEach(function(t){e[t.propertyName]=l,t.onValueChange(function(n){e[t.propertyName]=n.newValue})}),this.classes.set(t.id,e)}},s.prototype.unregisterClass=function(t){this.classes["delete"](t.id)},s.prototype.load=function(t){var e=this,n=this.classes.get(t.presentationModelType),i={};t.attributes.filter(function(t){return t.tag===opendolphin.Tag.value()}).forEach(function(t){i[t.propertyName]=null,t.onValueChange(function(o){o.oldValue!==o.newValue&&(i[t.propertyName]=r(e,n[t.propertyName],o.newValue))})});var s=new a(i);return s.open(function(r,i,s){Object.keys(r).forEach(function(i){var s=t.findAttributeByPropertyName(i);if(c(s)){var a=o(e,n[i],r[i]);s.setValue(a)}}),Object.keys(i).forEach(function(e){var n=t.findAttributeByPropertyName(e);c(n)&&n.setValue(null)}),Object.keys(s).forEach(function(r){var i=t.findAttributeByPropertyName(r);if(c(i)){var a=o(e,n[r],s[r]);i.setValue(a)}})}),this.beanFromDolphin.set(t.id,i),this.beanToDolphin.set(i,t.id),this.classInfos.set(t.id,n),i},s.prototype.unload=function(t){var e=this.beanFromDolphin.get(t.id);return this.beanFromDolphin["delete"](t.id),this.beanToDolphin["delete"](e),this.classInfos["delete"](t.id),e},s.prototype.addListEntry=function(t){var e=t.findAttributeByPropertyName("source"),n=t.findAttributeByPropertyName("attribute"),o=t.findAttributeByPropertyName("pos"),s=t.findAttributeByPropertyName("element");if(!(c(e)&&c(n)&&c(o)&&c(s)))throw new Error("Invalid list modification update received");var a=this.classInfos.get(e.value),u=this.beanFromDolphin.get(e.value);if(!c(u)||!c(a))throw new Error("Invalid list modification update received. Source bean unknown.");var l=r(this,a[n.value],s.value);i(u,n.value,o.value,0,l)},s.prototype.delListEntry=function(t){var e=t.findAttributeByPropertyName("source"),n=t.findAttributeByPropertyName("attribute"),r=t.findAttributeByPropertyName("from"),o=t.findAttributeByPropertyName("to");if(!(c(e)&&c(n)&&c(r)&&c(o)))throw new Error("Invalid list modification update received");var s=this.beanFromDolphin.get(e.value);if(!c(s))throw new Error("Invalid list modification update received. Source bean unknown.");i(s,n.value,r.value,o.value-r.value)},s.prototype.setListEntry=function(t){var e=t.findAttributeByPropertyName("source"),n=t.findAttributeByPropertyName("attribute"),o=t.findAttributeByPropertyName("pos"),s=t.findAttributeByPropertyName("element");if(!(c(e)&&c(n)&&c(o)&&c(s)))throw new Error("Invalid list modification update received");var a=this.classInfos.get(e.value),u=this.beanFromDolphin.get(e.value);if(!c(u)||!c(a))throw new Error("Invalid list modification update received. Source bean unknown.");var l=r(this,a[n.value],s.value);i(u,n.value,o.value,1,l)},s.prototype.mapParamToDolphin=function(t){if(!c(t))return{value:t,type:l};var e=typeof t;if("object"===e){var n=this.beanToDolphin.get(t);if(c(n))return{value:n,type:p};throw new TypeError("Only managed Dolphin Beans can be used")}if("string"===e||"number"===e||"boolean"===e)return{value:t,type:f};throw new TypeError("Only managed Dolphin Beans and primitive types can be used")},n.ClassRepository=s,n.UNKNOWN=l,n.BASIC_TYPE=f,n.DOLPHIN_BEAN=p},{"../bower_components/core.js/library/fn/map":5,"./polyfills.js":96,"./utils.js":97}],95:[function(t,e,n){"use strict";function r(t,e){var n=e.presentationModelType;switch(n){case c:t.classRepository.registerClass(e);break;case l:t.classRepository.addListEntry(e),t.dolphin.deletePresentationModel(e);break;case f:t.classRepository.delListEntry(e),t.dolphin.deletePresentationModel(e);break;case p:t.classRepository.setListEntry(e),t.dolphin.deletePresentationModel(e);break;default:var r=t.classRepository.load(e),o=t.addedHandlers.get(n);a(o)&&o.forEach(function(t){t(r)}),t.allAddedHandlers.forEach(function(t){t(r)})}}function o(t,e){var n=e.presentationModelType;switch(n){case c:t.classRepository.unregisterClass(e);break;case l:case f:case p:break;default:var r=t.classRepository.unload(e);if(a(r)){var o=t.removedHandlers.get(n);a(o)&&o.forEach(function(t){t(r)}),t.allRemovedHandlers.forEach(function(t){t(r)})}}}function i(t,e){var n=this,i=50;this.dolphin=opendolphin.dolphin(t,!0,4),a(e)&&(e.serverPush&&this.dolphin.startPushListening("ServerPushController:longPoll","ServerPushController:release"),e.observeInterval&&(i=e.observeInterval)),this.classRepository=new u,this.addedHandlers=new s,this.removedHandlers=new s,this.allAddedHandlers=[],this.allRemovedHandlers=[];var c=!1;!function l(){setTimeout(function(){Platform.performMicrotaskCheckpoint(),c||l()},i)}(),this.shutdown=function(){c=!0},this.dolphin.getClientModelStore().onModelStoreChange(function(t){var e=t.clientPresentationModel,i=e.findAttributeByPropertyName(h);a(i)&&i.value===y&&(t.eventType===opendolphin.Type.ADDED?r(n,e):t.eventType===opendolphin.Type.REMOVED&&o(n,e))})}t("./polyfills.js");var s=t("../bower_components/core.js/library/fn/map"),a=t("./utils.js").exists,u=t("./classrepo.js").ClassRepository;n.connect=function(t,e){return new i(t,e)};var c="@@@ DOLPHIN_BEAN @@@",l="@@@ LIST_ADD @@@",f="@@@ LIST_DEL @@@",p="@@@ LIST_SET @@@",h="@@@ SOURCE_SYSTEM @@@",d="client",y="server";i.prototype.isManaged=function(t){throw new Error("Not implemented yet")},i.prototype.create=function(t){throw new Error("Not implemented yet")},i.prototype.add=function(t,e){throw new Error("Not implemented yet")},i.prototype.addAll=function(t,e){throw new Error("Not implemented yet")},i.prototype.remove=function(t){throw new Error("Not implemented yet")},i.prototype.removeAll=function(t){throw new Error("Not implemented yet")},i.prototype.removeIf=function(t){throw new Error("Not implemented yet")},i.prototype.onAdded=function(t,e){if(a(e)){var n=this.addedHandlers.get(t);a(n)||(n=[],this.addedHandlers.set(t,n)),n.push(e)}else this.allAddedHandlers.push(t);return null},i.prototype.onRemoved=function(t,e){if(a(e)){var n=this.removedHandlers.get(t);a(n)||(n=[],this.removedHandlers.set(t,n)),n.push(e)}else this.allRemovedHandlers.push(t);return null},i.prototype.send=function(t,e){if(a(e)){var n=[this.dolphin.attribute(h,null,d)];for(var r in e)if(e.hasOwnProperty(r)){var o=this.classRepository.mapParamToDolphin(e[r]);n.push(this.dolphin.attribute(r,null,o.value,"VALUE")),n.push(this.dolphin.attribute(r,null,o.type,"VALUE_TYPE"))}this.dolphin.presentationModel.apply(this.dolphin,[null,"@@@ DOLPHIN_PARAMETER @@@"].concat(n))}return this.dolphin.send(t),null}},{"../bower_components/core.js/library/fn/map":5,"./classrepo.js":94,"./polyfills.js":96,"./utils.js":97}],96:[function(t,e,n){Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var n,r;if(null==this)throw new TypeError(" this is null or not defined");var o=Object(this),i=o.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(arguments.length>1&&(n=e),r=0;i>r;){var s;r in o&&(s=o[r],t.call(n,s,r,o)),r++}}),Array.prototype.filter||(Array.prototype.filter=function(t){"use strict";if(void 0===this||null===this)throw new TypeError;var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var r=[],o=arguments.length>=2?arguments[1]:void 0,i=0;n>i;i++)if(i in e){var s=e[i];t.call(o,s,i,e)&&r.push(s)}return r})},{}],97:[function(t,e,n){"use strict";e.exports.exists=function(t){return"undefined"!=typeof t&&null!==t}},{}]},{},[1,2,3,4]);
//# sourceMappingURL=dolphin.min.js.map