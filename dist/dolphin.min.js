!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.dolphin=e()}}(function(){return function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return o(n?n:e)},u,u.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){"use strict";e("./polyfills.js");var r=e("./utils.js").exists,o=e("./connector.js").Connector,i=e("./beanmanager.js").BeanManager,a=e("./classrepo.js").ClassRepository,s=e("./controllermanager.js").ControllerManager,l=e("./clientcontext.js").ClientContext,c="dolphin_platform_intern_",u=c+"initClientContext";n.connect=function(e,t){var n=opendolphin.makeDolphin().url(e).reset(!1).slackMS(4);r(t)&&r(t.errorHandler)&&n.errorHandler(t.errorHandler);var c=n.build(),f=new a(c),d=new i(f),p=new o(e,c,f),h=new s(d,p),y=new l(c,d,h);return p.invoke(u),y}},{"./beanmanager.js":26,"./classrepo.js":27,"./clientcontext.js":28,"./connector.js":29,"./controllermanager.js":30,"./polyfills.js":32,"./utils.js":33}],2:[function(e,t,n){e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.map"),t.exports=e("../modules/$").core.Map},{"../modules/$":14,"../modules/es6.map":22,"../modules/es6.string.iterator":24,"../modules/web.dom.iterable":25}],3:[function(e,t,n){e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.promise"),t.exports=e("../modules/$").core.Promise},{"../modules/$":14,"../modules/es6.promise":23,"../modules/es6.string.iterator":24,"../modules/web.dom.iterable":25}],4:[function(e,t,n){function r(e,t,n){if(!e)throw TypeError(n?t+n:t)}var o=e("./$");r.def=o.assertDefined,r.fn=function(e){if(!o.isFunction(e))throw TypeError(e+" is not a function!");return e},r.obj=function(e){if(!o.isObject(e))throw TypeError(e+" is not an object!");return e},r.inst=function(e,t,n){if(!(e instanceof t))throw TypeError(n+": use the 'new' operator!");return e},t.exports=r},{"./$":14}],5:[function(e,t,n){function r(e){return a.call(e).slice(8,-1)}var o=e("./$"),i=e("./$.wks")("toStringTag"),a={}.toString;r.classof=function(e){var t,n;return void 0==e?void 0===e?"Undefined":"Null":"string"==typeof(n=(t=Object(e))[i])?n:r(t)},r.set=function(e,t,n){e&&!o.has(e=n?e:e.prototype,i)&&o.hide(e,i,t)},t.exports=r},{"./$":14,"./$.wks":20}],6:[function(e,t,n){"use strict";function r(e,t){if(!d(e))return("string"==typeof e?"S":"P")+e;if(y(e))return"F";if(!u(e,v)){if(!t)return"E";p(e,v,++E)}return"O"+e[v]}function o(e,t){var n,o=r(t);if("F"!=o)return e[m][o];for(n=e[g];n;n=n.n)if(n.k==t)return n}var i=e("./$"),a=e("./$.ctx"),s=e("./$.uid").safe,l=e("./$.assert"),c=e("./$.iter"),u=i.has,f=i.set,d=i.isObject,p=i.hide,h=c.step,y=Object.isFrozen||i.core.Object.isFrozen,v=s("id"),m=s("O1"),b=s("last"),g=s("first"),w=s("iter"),$=i.DESC?s("size"):"size",E=0;t.exports={getConstructor:function(e,t,n){function r(o){var a=l.inst(this,r,e);f(a,m,i.create(null)),f(a,$,0),f(a,b,void 0),f(a,g,void 0),void 0!=o&&c.forOf(o,t,a[n],a)}return i.mix(r.prototype,{clear:function(){for(var e=this,t=e[m],n=e[g];n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete t[n.i];e[g]=e[b]=void 0,e[$]=0},"delete":function(e){var t=this,n=o(t,e);if(n){var r=n.n,i=n.p;delete t[m][n.i],n.r=!0,i&&(i.n=r),r&&(r.p=i),t[g]==n&&(t[g]=r),t[b]==n&&(t[b]=i),t[$]--}return!!n},forEach:function(e){for(var t,n=a(e,arguments[1],3);t=t?t.n:this[g];)for(n(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!o(this,e)}}),i.DESC&&i.setDesc(r.prototype,"size",{get:function(){return l.def(this[$])}}),r},def:function(e,t,n){var i,a,s=o(e,t);return s?s.v=n:(e[b]=s={i:a=r(t,!0),k:t,v:n,p:i=e[b],n:void 0,r:!1},e[g]||(e[g]=s),i&&(i.n=s),e[$]++,"F"!=a&&(e[m][a]=s)),e},getEntry:o,getIterConstructor:function(){return function(e,t){f(this,w,{o:e,k:t})}},next:function(){for(var e=this[w],t=e.k,n=e.l;n&&n.r;)n=n.p;return e.o&&(e.l=n=n?n.n:e.o[g])?"key"==t?h(0,n.k):"value"==t?h(0,n.v):h(0,[n.k,n.v]):(e.o=void 0,h(1))}}},{"./$":14,"./$.assert":4,"./$.ctx":8,"./$.iter":13,"./$.uid":18}],7:[function(e,t,n){"use strict";var r=e("./$"),o=e("./$.def"),i=e("./$.iter"),a=e("./$.assert").inst;t.exports=function(t,n,s,l,c){function u(e,t){var n=h[e];r.FW&&(h[e]=function(e,r){var o=n.call(this,0===e?0:e,r);return t?this:o})}var f=r.g[t],d=f,p=l?"set":"add",h=d&&d.prototype,y={};if(r.isFunction(d)&&(c||!i.BUGGY&&h.forEach&&h.entries)){var v,m=new d,b=m[p](c?{}:-0,1);e("./$.iter-detect")(function(e){new d(e)})||(d=function(e){a(this,d,t);var n=new f;return void 0!=e&&i.forOf(e,l,n[p],n),n},d.prototype=h,r.FW&&(h.constructor=d)),c||m.forEach(function(e,t){v=1/t===-(1/0)}),v&&(u("delete"),u("has"),l&&u("get")),(v||b!==m)&&u(p,!0)}else d=s.getConstructor(t,l,p),r.mix(d.prototype,n);return e("./$.cof").set(d,t),e("./$.species")(d),y[t]=d,o(o.G+o.W+o.F*(d!=f),y),c||i.std(d,t,s.getIterConstructor(),s.next,l?"key+value":"value",!l,!0),d}},{"./$":14,"./$.assert":4,"./$.cof":5,"./$.def":9,"./$.iter":13,"./$.iter-detect":12,"./$.species":15}],8:[function(e,t,n){var r=e("./$.assert").fn;t.exports=function(e,t,n){if(r(e),~n&&void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},{"./$.assert":4}],9:[function(e,t,n){function r(e,t){return function(){return e.apply(t,arguments)}}function o(e,t,n){var c,u,f,d,p=e&o.G,h=p?a:e&o.S?a[t]:(a[t]||{}).prototype,y=p?s:s[t]||(s[t]={});p&&(n=t);for(c in n)u=!(e&o.F)&&h&&c in h,u&&c in y||(f=u?h[c]:n[c],p&&!l(h[c])?d=n[c]:e&o.B&&u?d=r(f,a):e&o.W&&h[c]==f?!function(e){d=function(t){return this instanceof e?new e(t):e(t)},d.prototype=e.prototype}(f):d=e&o.P&&l(f)?r(Function.call,f):f,i.hide(y,c,d))}var i=e("./$"),a=i.g,s=i.core,l=i.isFunction;o.F=1,o.G=2,o.S=4,o.P=8,o.B=16,o.W=32,t.exports=o},{"./$":14}],10:[function(e,t,n){t.exports=function(e){return e.FW=!1,e.path=e.core,e}},{}],11:[function(e,t,n){t.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3]);case 5:return r?e(t[0],t[1],t[2],t[3],t[4]):e.call(n,t[0],t[1],t[2],t[3],t[4])}return e.apply(n,t)}},{}],12:[function(e,t,n){var r=e("./$.wks")("iterator"),o=!1;try{var i=[7][r]();i["return"]=function(){o=!0},Array.from(i,function(){throw 2})}catch(a){}t.exports=function(e){if(!o)return!1;var t=!1;try{var n=[7],i=n[r]();i.next=function(){t=!0},n[r]=function(){return i},e(n)}catch(a){}return t}},{"./$.wks":20}],13:[function(e,t,n){"use strict";function r(e,t){l.hide(e,p,t),h in[]&&l.hide(e,h,t)}function o(e,t,n,o){var i=e.prototype,a=i[p]||i[h]||o&&i[o]||n;if(l.FW&&r(i,a),a!==n){var s=l.getProto(a.call(new e));u.set(s,t+" Iterator",!0),l.FW&&l.has(i,h)&&r(s,l.that)}return y[t]=a,y[t+" Iterator"]=l.that,a}function i(e){var t=l.g.Symbol,n=e[t&&t.iterator||h],r=n||e[p]||y[u.classof(e)];return d(r.call(e))}function a(e){var t=e["return"];void 0!==t&&d(t.call(e))}function s(e,t,n,r){try{return r?t(d(n)[0],n[1]):t(n)}catch(o){throw a(e),o}}var l=e("./$"),c=e("./$.ctx"),u=e("./$.cof"),f=e("./$.def"),d=e("./$.assert").obj,p=e("./$.wks")("iterator"),h="@@iterator",y={},v={},m="keys"in[]&&!("next"in[].keys());r(v,l.that);var b=t.exports={BUGGY:m,Iterators:y,prototype:v,step:function(e,t){return{value:t,done:!!e}},stepCall:s,close:a,is:function(e){var t=Object(e),n=l.g.Symbol,r=n&&n.iterator||h;return r in t||p in t||l.has(y,u.classof(t))},get:i,set:r,create:function(e,t,n,r){e.prototype=l.create(r||b.prototype,{next:l.desc(1,n)}),u.set(e,t+" Iterator")},define:o,std:function(e,t,n,r,i,a,s){function c(e){return function(){return new n(this,e)}}b.create(n,t,r);var u,d,p=c("key+value"),h=c("value"),y=e.prototype;if("value"==i?h=o(e,t,h,"values"):p=o(e,t,p,"entries"),i&&(u={entries:p,keys:a?h:c("key"),values:h},f(f.P+f.F*m,t,u),s))for(d in u)d in y||l.hide(y,d,u[d])},forOf:function(e,t,n,r){for(var o,l=i(e),u=c(n,r,t?2:1);!(o=l.next()).done;)if(s(l,u,o.value,t)===!1)return a(l)}}},{"./$":14,"./$.assert":4,"./$.cof":5,"./$.ctx":8,"./$.def":9,"./$.wks":20}],14:[function(e,t,n){"use strict";function r(e){return isNaN(e=+e)?0:(e>0?y:h)(e)}function o(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}function i(e,t,n){return e[t]=n,e}function a(e){return b?function(t,n,r){return w.setDesc(t,n,o(e,r))}:i}function s(e){return null!==e&&("object"==typeof e||"function"==typeof e)}function l(e){return"function"==typeof e}function c(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}var u="undefined"!=typeof self?self:Function("return this")(),f={},d=Object.defineProperty,p={}.hasOwnProperty,h=Math.ceil,y=Math.floor,v=Math.max,m=Math.min,b=!!function(){try{return 2==d({},"a",{get:function(){return 2}}).a}catch(e){}}(),g=a(1),w=t.exports=e("./$.fw")({g:u,core:f,html:u.document&&document.documentElement,isObject:s,isFunction:l,it:function(e){return e},that:function(){return this},toInteger:r,toLength:function(e){return e>0?m(r(e),9007199254740991):0},toIndex:function(e,t){return e=r(e),0>e?v(e+t,0):m(e,t)},has:function(e,t){return p.call(e,t)},create:Object.create,getProto:Object.getPrototypeOf,DESC:b,desc:o,getDesc:Object.getOwnPropertyDescriptor,setDesc:d,getKeys:Object.keys,getNames:Object.getOwnPropertyNames,getSymbols:Object.getOwnPropertySymbols,assertDefined:c,ES5Object:Object,toObject:function(e){return w.ES5Object(c(e))},hide:g,def:a(0),set:u.Symbol?i:g,mix:function(e,t){for(var n in t)g(e,n,t[n]);return e},each:[].forEach});"undefined"!=typeof __e&&(__e=f),"undefined"!=typeof __g&&(__g=u)},{"./$.fw":10}],15:[function(e,t,n){var r=e("./$");t.exports=function(t){r.DESC&&r.FW&&r.setDesc(t,e("./$.wks")("species"),{configurable:!0,get:r.that})}},{"./$":14,"./$.wks":20}],16:[function(e,t,n){"use strict";var r=e("./$");t.exports=function(e){return function(t){var n,o,i=String(r.assertDefined(this)),a=r.toInteger(t),s=i.length;return 0>a||a>=s?e?"":void 0:(n=i.charCodeAt(a),55296>n||n>56319||a+1===s||(o=i.charCodeAt(a+1))<56320||o>57343?e?i.charAt(a):n:e?i.slice(a,a+2):(n-55296<<10)+(o-56320)+65536)}}},{"./$":14}],17:[function(e,t,n){"use strict";function r(){var e=+this;if(l.has(j,e)){var t=j[e];delete j[e],t()}}function o(e){r.call(e.data)}var i,a,s,l=e("./$"),c=e("./$.ctx"),u=e("./$.cof"),f=e("./$.invoke"),d=l.g,p=l.isFunction,h=l.html,y=d.document,v=d.process,m=d.setImmediate,b=d.clearImmediate,g=d.postMessage,w=d.addEventListener,$=d.MessageChannel,E=0,j={},A="onreadystatechange";p(m)&&p(b)||(m=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return j[++E]=function(){f(p(e)?e:Function(e),t)},i(E),E},b=function(e){delete j[e]},"process"==u(v)?i=function(e){v.nextTick(c(r,e,1))}:w&&p(g)&&!d.importScripts?(i=function(e){g(e,"*")},w("message",o,!1)):p($)?(a=new $,s=a.port2,a.port1.onmessage=o,i=c(s.postMessage,s,1)):i=y&&A in y.createElement("script")?function(e){h.appendChild(y.createElement("script"))[A]=function(){h.removeChild(this),r.call(e)}}:function(e){setTimeout(c(r,e,1),0)}),t.exports={set:m,clear:b}},{"./$":14,"./$.cof":5,"./$.ctx":8,"./$.invoke":11}],18:[function(e,t,n){function r(e){return"Symbol("+e+")_"+(++o+Math.random()).toString(36)}var o=0;r.safe=e("./$").g.Symbol||r,t.exports=r},{"./$":14}],19:[function(e,t,n){var r=e("./$"),o=e("./$.wks")("unscopables");!r.FW||o in[]||r.hide(Array.prototype,o,{}),t.exports=function(e){r.FW&&([][o][e]=!0)}},{"./$":14,"./$.wks":20}],20:[function(e,t,n){var r=e("./$").g,o={};t.exports=function(t){return o[t]||(o[t]=r.Symbol&&r.Symbol[t]||e("./$.uid").safe("Symbol."+t))}},{"./$":14,"./$.uid":18}],21:[function(e,t,n){var r=e("./$"),o=e("./$.unscope"),i=e("./$.uid").safe("iter"),a=e("./$.iter"),s=a.step,l=a.Iterators;a.std(Array,"Array",function(e,t){r.set(this,i,{o:r.toObject(e),i:0,k:t})},function(){var e=this[i],t=e.o,n=e.k,r=e.i++;return!t||r>=t.length?(e.o=void 0,s(1)):"key"==n?s(0,r):"value"==n?s(0,t[r]):s(0,[r,t[r]])},"value"),l.Arguments=l.Array,o("keys"),o("values"),o("entries")},{"./$":14,"./$.iter":13,"./$.uid":18,"./$.unscope":19}],22:[function(e,t,n){"use strict";var r=e("./$.collection-strong");e("./$.collection")("Map",{get:function(e){var t=r.getEntry(this,e);return t&&t.v},set:function(e,t){return r.def(this,0===e?0:e,t)}},r,!0)},{"./$.collection":7,"./$.collection-strong":6}],23:[function(e,t,n){"use strict";function r(e){var t=k(e)[v];return void 0!=t?t:e}function o(e){var t;return x(e)&&(t=e.then),H(t)?t:!1}function i(e){var t,n=e[m],r=n.c,o=0;if(n.h)return!1;for(;r.length>o;)if(t=r[o++],t.fail||!i(t.P))return!1;return!0}function a(e,t){var n=e.c;(t||n.length)&&E(function(){var r=e.p,a=e.v,s=1==e.s,l=0;if(t&&i(r))setTimeout(function(){i(r)&&("process"==d($)?$.emit("unhandledRejection",a,r):w.console&&H(console.error)&&console.error("Unhandled promise rejection",a))},1e3);else for(;n.length>l;)!function(t){var n,r,i=s?t.ok:t.fail;try{i?(s||(e.h=!0),n=i===!0?a:i(a),n===t.P?t.rej(TypeError(g+"-chain cycle")):(r=o(n))?r.call(n,t.res,t.rej):t.res(n)):t.rej(a)}catch(l){t.rej(l)}}(n[l++]);n.length=0})}function s(e){var t=this;t.d||(t.d=!0,t=t.r||t,t.v=e,t.s=2,a(t,!0))}function l(e){var t,n,r=this;if(!r.d){r.d=!0,r=r.r||r;try{(t=o(e))?(n={r:r,d:!1},t.call(e,f(l,n,1),f(s,n,1))):(r.v=e,r.s=1,a(r))}catch(i){s.call(n||{r:r,d:!1},i)}}}var c,u=e("./$"),f=e("./$.ctx"),d=e("./$.cof"),p=e("./$.def"),h=e("./$.assert"),y=e("./$.iter"),v=e("./$.wks")("species"),m=e("./$.uid").safe("record"),b=y.forOf,g="Promise",w=u.g,$=w.process,E=$&&$.nextTick||e("./$.task").set,j=w[g],A=j,H=u.isFunction,x=u.isObject,C=h.fn,k=h.obj;H(j)&&H(j.resolve)&&j.resolve(c=new j(function(){}))==c||(j=function(e){C(e);var t={p:h.inst(this,j,g),c:[],s:0,d:!1,v:void 0,h:!1};u.hide(this,m,t);try{e(f(l,t,1),f(s,t,1))}catch(n){s.call(t,n)}},u.mix(j.prototype,{then:function(e,t){var n=k(k(this).constructor)[v],r={ok:H(e)?e:!0,fail:H(t)?t:!1},o=r.P=new(void 0!=n?n:j)(function(e,t){r.res=C(e),r.rej=C(t)}),i=this[m];return i.c.push(r),i.s&&a(i),o},"catch":function(e){return this.then(void 0,e)}})),p(p.G+p.W+p.F*(j!=A),{Promise:j}),d.set(j,g),e("./$.species")(j),p(p.S,g,{reject:function(e){return new(r(this))(function(t,n){n(e)})},resolve:function(e){return x(e)&&m in e&&u.getProto(e)===this.prototype?e:new(r(this))(function(t){t(e)})}}),p(p.S+p.F*!e("./$.iter-detect")(function(e){j.all(e)["catch"](function(){})}),g,{all:function(e){var t=r(this),n=[];return new t(function(r,o){b(e,!1,n.push,n);var i=n.length,a=Array(i);i?u.each.call(n,function(e,n){t.resolve(e).then(function(e){a[n]=e,--i||r(a)},o)}):r(a)})},race:function(e){var t=r(this);return new t(function(n,r){b(e,!1,function(e){t.resolve(e).then(n,r)})})}})},{"./$":14,"./$.assert":4,"./$.cof":5,"./$.ctx":8,"./$.def":9,"./$.iter":13,"./$.iter-detect":12,"./$.species":15,"./$.task":17,"./$.uid":18,"./$.wks":20}],24:[function(e,t,n){var r=e("./$").set,o=e("./$.string-at")(!0),i=e("./$.uid").safe("iter"),a=e("./$.iter"),s=a.step;a.std(String,"String",function(e){r(this,i,{o:String(e),i:0})},function(){var e,t=this[i],n=t.o,r=t.i;return r>=n.length?s(1):(e=o.call(n,r),t.i+=e.length,s(0,e))})},{"./$":14,"./$.iter":13,"./$.string-at":16,"./$.uid":18}],25:[function(e,t,n){e("./es6.array.iterator");var r=e("./$"),o=e("./$.iter").Iterators,i=e("./$.wks")("iterator"),a=o.Array,s=r.g.NodeList;!r.FW||!s||i in s.prototype||r.hide(s.prototype,i,a),o.NodeList=a},{"./$":14,"./$.iter":13,"./$.wks":20,"./es6.array.iterator":21}],26:[function(e,t,n){"use strict";function r(e){this.classRepository=e,this.addedHandlers=new o,this.removedHandlers=new o,this.updatedHandlers=new o,this.arrayUpdatedHandlers=new o,this.allAddedHandlers=[],this.allRemovedHandlers=[],this.allUpdatedHandlers=[],this.allArrayUpdatedHandlers=[];var t=this;this.classRepository.onBeanAdded(function(e,n){var r=t.addedHandlers.get(e);i(r)&&r.forEach(function(e){e(n)}),t.allAddedHandlers.forEach(function(e){e(n)})}),this.classRepository.onBeanRemoved(function(e,n){var r=t.removedHandlers.get(e);i(r)&&r.forEach(function(e){e(n)}),t.allRemovedHandlers.forEach(function(e){e(n)})}),this.classRepository.onBeanUpdate(function(e,n,r,o,a){var s=t.updatedHandlers.get(e);i(s)&&s.forEach(function(e){e(n,r,o,a)}),t.allUpdatedHandlers.forEach(function(e){e(n,r,o,a)})}),this.classRepository.onArrayUpdate(function(e,n,r,o,a,s){var l=t.arrayUpdatedHandlers.get(e);i(l)&&l.forEach(function(e){e(n,r,o,a,s)}),t.allArrayUpdatedHandlers.forEach(function(e){e(n,r,o,a,s)})})}e("./polyfills.js");var o=e("../bower_components/core.js/library/fn/map"),i=e("./utils.js").exists;r.prototype.notifyBeanChange=function(e,t,n){return this.classRepository.notifyBeanChange(e,t,n)},r.prototype.notifyArrayChange=function(e,t,n,r,o){this.classRepository.notifyArrayChange(e,t,n,r,o)},r.prototype.isManaged=function(e){throw new Error("Not implemented yet")},r.prototype.create=function(e){throw new Error("Not implemented yet")},r.prototype.add=function(e,t){throw new Error("Not implemented yet")},r.prototype.addAll=function(e,t){throw new Error("Not implemented yet")},r.prototype.remove=function(e){throw new Error("Not implemented yet")},r.prototype.removeAll=function(e){throw new Error("Not implemented yet")},r.prototype.removeIf=function(e){throw new Error("Not implemented yet")},r.prototype.onAdded=function(e,t){var n=this;if(i(t)){var r=n.addedHandlers.get(e);return i(r)||(r=[]),n.addedHandlers.set(e,r.concat(t)),{unsubscribe:function(){var r=n.addedHandlers.get(e);i(r)&&n.addedHandlers.set(e,r.filter(function(e){return e!==t}))}}}return t=e,n.allAddedHandlers=n.allAddedHandlers.concat(t),{unsubscribe:function(){n.allAddedHandlers=n.allAddedHandlers.filter(function(e){return e!==t})}}},r.prototype.onRemoved=function(e,t){var n=this;if(i(t)){var r=n.removedHandlers.get(e);return i(r)||(r=[]),n.removedHandlers.set(e,r.concat(t)),{unsubscribe:function(){var r=n.removedHandlers.get(e);i(r)&&n.removedHandlers.set(e,r.filter(function(e){return e!==t}))}}}return t=e,n.allRemovedHandlers=n.allRemovedHandlers.concat(t),{unsubscribe:function(){n.allRemovedHandlers=n.allRemovedHandlers.filter(function(e){return e!==t})}}},r.prototype.onBeanUpdate=function(e,t){var n=this;if(i(t)){var r=n.updatedHandlers.get(e);return i(r)||(r=[]),n.updatedHandlers.set(e,r.concat(t)),{unsubscribe:function(){var r=n.updatedHandlers.get(e);i(r)&&n.updatedHandlers.set(e,r.filter(function(e){return e!==t}))}}}return t=e,n.allUpdatedHandlers=n.allUpdatedHandlers.concat(t),{unsubscribe:function(){n.allUpdatedHandlers=n.allUpdatedHandlers.filter(function(e){return e!==t})}}},r.prototype.onArrayUpdate=function(e,t){var n=this;if(i(t)){var r=n.arrayUpdatedHandlers.get(e);return i(r)||(r=[]),n.arrayUpdatedHandlers.set(e,r.concat(t)),{unsubscribe:function(){var r=n.arrayUpdatedHandlers.get(e);i(r)&&n.arrayUpdatedHandlers.set(e,r.filter(function(e){return e!==t}))}}}return t=e,n.allArrayUpdatedHandlers=n.allArrayUpdatedHandlers.concat(t),{unsubscribe:function(){n.allArrayUpdatedHandlers=n.allArrayUpdatedHandlers.filter(function(e){return e!==t})}}},n.BeanManager=r},{"../bower_components/core.js/library/fn/map":2,"./polyfills.js":32,"./utils.js":33}],27:[function(e,t,n){"use strict";function r(e,t,n){return null===n?null:t===v?e.beanFromDolphin.get(n):n}function o(e,t){return"object"==typeof t?e.beanToDolphin.get(t):t}function i(e,t,n,r,o){var i=[e.attribute("@@@ SOURCE_SYSTEM @@@",null,"client"),e.attribute("source",null,t),e.attribute("attribute",null,n),e.attribute("pos",null,r),e.attribute("element",null,o)];e.presentationModel.apply(e,[null,"@@@ LIST_ADD @@@"].concat(i))}function a(e,t,n,r,o){var i=[e.attribute("@@@ SOURCE_SYSTEM @@@",null,"client"),e.attribute("source",null,t),e.attribute("attribute",null,n),e.attribute("from",null,r),e.attribute("to",null,o)];e.presentationModel.apply(e,[null,"@@@ LIST_DEL @@@"].concat(i))}function s(e,t,n,r){var o=n[r];p(o)||e.propertyUpdateHandlers.forEach(function(e){e(t,n,r,[],void 0)})}function l(e,t){if(p(m))throw new Error("Trying to create a block while another block exists");m={bean:e,propertyName:t}}function c(e,t){return p(m)&&m.bean===e&&m.propertyName===t}function u(){m=null}function f(e){this.dolphin=e,this.classes=new d,this.beanFromDolphin=new d,this.beanToDolphin=new d,this.classInfos=new d,this.beanAddedHandlers=[],this.beanRemovedHandlers=[],this.propertyUpdateHandlers=[],this.arrayUpdateHandlers=[]}e("./polyfills.js");var d=(window.ObjectObserver,e("../bower_components/core.js/library/fn/map")),p=e("./utils.js").exists,h=0,y=1,v=2,m=null;f.prototype.notifyBeanChange=function(e,t,n){var i=this.beanToDolphin.get(e);if(p(i)){var a=this.dolphin.findPresentationModelById(i);if(p(a)){var s=this.classes.get(a.presentationModelType),l=s[t],c=a.findAttributeByPropertyName(t);if(p(l)&&p(c)){var u=c.getValue();return c.setValue(o(this,n)),r(this,l,u)}}}},f.prototype.notifyArrayChange=function(e,t,n,r,s){if(!c(e,t)){var l=this.beanToDolphin.get(e),u=e[t];if(p(l)&&p(u)){Array.isArray(s)&&s.length>0&&a(this.dolphin,l,t,n,n+s.length);for(var f=n;n+r>f;f++)i(this.dolphin,l,t,f,o(this,u[f]))}}},f.prototype.onBeanAdded=function(e){this.beanAddedHandlers.push(e)},f.prototype.onBeanRemoved=function(e){this.beanRemovedHandlers.push(e)},f.prototype.onBeanUpdate=function(e){this.propertyUpdateHandlers.push(e)},f.prototype.onArrayUpdate=function(e){this.arrayUpdateHandlers.push(e)},f.prototype.registerClass=function(e){if(!this.classes.has(e.id)){var t={};e.attributes.filter(function(e){return e.propertyName.search(/^@@@ /)<0}).forEach(function(e){t[e.propertyName]=h,e.onValueChange(function(n){t[e.propertyName]=n.newValue})}),this.classes.set(e.id,t)}},f.prototype.unregisterClass=function(e){this.classes["delete"](e.id)},f.prototype.load=function(e){var t=this,n=this.classes.get(e.presentationModelType),o={};return e.attributes.filter(function(e){return e.tag===opendolphin.Tag.value()&&e.propertyName.search(/^@@@ /)<0}).forEach(function(i){o[i.propertyName]=null,i.onValueChange(function(a){if(a.oldValue!==a.newValue){var s=r(t,n[i.propertyName],a.oldValue),l=r(t,n[i.propertyName],a.newValue);t.propertyUpdateHandlers.forEach(function(t){t(e.presentationModelType,o,i.propertyName,l,s)})}})}),this.beanFromDolphin.set(e.id,o),this.beanToDolphin.set(o,e.id),this.classInfos.set(e.id,n),this.beanAddedHandlers.forEach(function(t){t(e.presentationModelType,o)}),o},f.prototype.unload=function(e){var t=this.beanFromDolphin.get(e.id);return this.beanFromDolphin["delete"](e.id),this.beanToDolphin["delete"](t),this.classInfos["delete"](e.id),p(t)&&this.beanRemovedHandlers.forEach(function(n){n(e.presentationModelType,t)}),t},f.prototype.addListEntry=function(e){var t=e.findAttributeByPropertyName("source"),n=e.findAttributeByPropertyName("attribute"),o=e.findAttributeByPropertyName("pos"),i=e.findAttributeByPropertyName("element");if(!(p(t)&&p(n)&&p(o)&&p(i)))throw new Error("Invalid list modification update received");var a=this.classInfos.get(t.value),c=this.beanFromDolphin.get(t.value);if(!p(c)||!p(a))throw new Error("Invalid list modification update received. Source bean unknown.");var f=e.presentationModelType,d=r(this,a[n.value],i.value);s(this,f,c,n.value);try{l(c,n.value),this.arrayUpdateHandlers.forEach(function(e){e(f,c,n.value,o.value,0,d)})}finally{u()}},f.prototype.delListEntry=function(e){var t=e.findAttributeByPropertyName("source"),n=e.findAttributeByPropertyName("attribute"),r=e.findAttributeByPropertyName("from"),o=e.findAttributeByPropertyName("to");if(!(p(t)&&p(n)&&p(r)&&p(o)))throw new Error("Invalid list modification update received");var i=this.beanFromDolphin.get(t.value);if(!p(i))throw new Error("Invalid list modification update received. Source bean unknown.");var a=e.presentationModelType;s(this,a,i,n.value);try{l(i,n.value),this.arrayUpdateHandlers.forEach(function(e){e(a,i,n.value,r.value,o.value-r.value)})}finally{u()}},f.prototype.setListEntry=function(e){var t=e.findAttributeByPropertyName("source"),n=e.findAttributeByPropertyName("attribute"),o=e.findAttributeByPropertyName("pos"),i=e.findAttributeByPropertyName("element");if(!(p(t)&&p(n)&&p(o)&&p(i)))throw new Error("Invalid list modification update received");var a=this.classInfos.get(t.value),c=this.beanFromDolphin.get(t.value);if(!p(c)||!p(a))throw new Error("Invalid list modification update received. Source bean unknown.");var f=e.presentationModelType,d=r(this,a[n.value],i.value);s(this,f,c,n.value);try{l(c,n.value),this.arrayUpdateHandlers.forEach(function(e){e(f,c,n.value,o.value,1,d)})}finally{u()}},f.prototype.mapParamToDolphin=function(e){if(!p(e))return{value:e,type:h};var t=typeof e;if("object"===t){var n=this.beanToDolphin.get(e);if(p(n))return{value:n,type:v};throw new TypeError("Only managed Dolphin Beans can be used")}if("string"===t||"number"===t||"boolean"===t)return{value:e,type:y};throw new TypeError("Only managed Dolphin Beans and primitive types can be used")},n.ClassRepository=f,n.UNKNOWN=h,n.BASIC_TYPE=y,n.DOLPHIN_BEAN=v},{"../bower_components/core.js/library/fn/map":2,"./polyfills.js":32,"./utils.js":33}],28:[function(e,t,n){"use strict";function r(e,t,n){this.dolphin=e,this.beanManager=t,this._controllerManager=n}e("./polyfills.js");e("../bower_components/core.js/library/fn/promise"),e("./utils.js").exists;r.prototype.createController=function(e){return this._controllerManager.createController(e)},r.prototype.disconnect=function(){throw new Error("Not implemented yet")},n.ClientContext=r},{"../bower_components/core.js/library/fn/promise":3,"./polyfills.js":32,"./utils.js":33}],29:[function(e,t,n){"use strict";function r(e,t,n){var r=n.presentationModelType;switch(r){case d:t.registerClass(n);break;case p:t.addListEntry(n),e.deletePresentationModel(n);break;case h:t.delListEntry(n),e.deletePresentationModel(n);break;case y:t.setListEntry(n),e.deletePresentationModel(n);break;default:t.load(n)}}function o(e,t){var n=t.presentationModelType;switch(n){case d:e.unregisterClass(t);break;case p:case h:case y:break;default:e.unload(t)}}function i(e,t,n){this.dolphin=t,this.classRepository=n,t.getClientModelStore().onModelStoreChange(function(e){var i=e.clientPresentationModel,a=i.findAttributeByPropertyName(v);l(a)&&a.value===b&&(e.eventType===opendolphin.Type.ADDED?r(t,n,i):e.eventType===opendolphin.Type.REMOVED&&o(n,i))}),a=new s(function(n,r){var o=new XMLHttpRequest;o.withCredentials=!0,o.onload=function(){200==o.status?(t.startPushListening(u,f),a=null,n()):r(Error(o.statusText))},o.onerror=function(){r(Error("Network Error"))},o.open("POST",e+"invalidate?"),o.send()})}e("./polyfills.js");var a,s=e("../bower_components/core.js/library/fn/promise"),l=e("./utils.js").exists,c="dolphin_platform_intern_",u=c+"longPoll",f=c+"release",d="@@@ DOLPHIN_BEAN @@@",p="@@@ LIST_ADD @@@",h="@@@ LIST_DEL @@@",y="@@@ LIST_SET @@@",v="@@@ SOURCE_SYSTEM @@@",m="client",b="server";i.prototype.invoke=function(e,t){if(l(t)){var n=[this.dolphin.attribute(v,null,m)];for(var r in t)if(t.hasOwnProperty(r)){var o=this.classRepository.mapParamToDolphin(t[r]);n.push(this.dolphin.attribute(r,null,o.value,"VALUE")),n.push(this.dolphin.attribute(r,null,o.type,"VALUE_TYPE"))}this.dolphin.presentationModel.apply(this.dolphin,[null,"@@@ DOLPHIN_PARAMETER @@@"].concat(n))}var i=this.dolphin,c=function(t){i.send(e,{onFinished:function(){t()}})},u=l(a)?function(e){a.then(function(){c(e)})}:c;return new s(u)},n.Connector=i},{"../bower_components/core.js/library/fn/promise":3,"./polyfills.js":32,"./utils.js":33}],30:[function(e,t,n){"use strict";function r(e,t){this.beanManager=e,this.connector=t;var n=this;this.controllerRegistryBeanPromise=new o(function(e){n.beanManager.onAdded(u,function(t){e(t)})}),this.controllerActionCallBeanPromise=new o(function(e){n.beanManager.onAdded(f,function(t){e(t)})}),this.controllerDestroyBeanPromise=new o(function(e){n.beanManager.onAdded(d,function(t){e(t)})})}e("./polyfills.js");var o=e("../bower_components/core.js/library/fn/promise"),i=(e("./utils.js").exists,e("./controllerproxy.js").ControllerProxy),a="dolphin_platform_intern_",s=a+"registerController",l=a+"callControllerAction",c=a+"destroyController",u="com.canoo.dolphin.impl.ControllerRegistryBean",f="com.canoo.dolphin.impl.ControllerActionCallBean",d="com.canoo.dolphin.impl.ControllerDestroyBean";r.prototype.createController=function(e){var t=this;return new o(function(n){t.controllerRegistryBeanPromise.then(function(r){t.beanManager.notifyBeanChange(r,"controllerName",e),t.connector.invoke(s).then(function(){n(new i(r.controllerId,r.model,t))})})})},r.prototype.invokeAction=function(e,t){var n=this;return new o(function(r){n.controllerActionCallBeanPromise.then(function(o){n.beanManager.notifyBeanChange(o,"controllerId",e),n.beanManager.notifyBeanChange(o,"actionName",t),n.connector.invoke(l).then(r)})})},r.prototype.destroyController=function(e){var t=this;return new o(function(n){t.controllerDestroyBeanPromise.then(function(r){t.beanManager.notifyBeanChange(r,"controllerId",e),t.connector.invoke(c).then(n)})})},n.ControllerManager=r},{"../bower_components/core.js/library/fn/promise":3,"./controllerproxy.js":31,"./polyfills.js":32,"./utils.js":33}],31:[function(e,t,n){"use strict";function r(e,t,n){this.controllerId=e,this.model=t,this.manager=n,this.destroyed=!1}e("./polyfills.js");e("../bower_components/core.js/library/fn/promise"),e("./utils.js").exists;r.prototype.invoke=function(e){if(this.destroyed)throw new Error("The controller was already destroyed");return this.manager.invokeAction(this.controllerId,e)},r.prototype.destroy=function(){if(this.destroyed)throw new Error("The controller was already destroyed");return this.destroyed=!0,this.manager.destroyController(this)},n.ControllerProxy=r},{"../bower_components/core.js/library/fn/promise":3,"./polyfills.js":32,"./utils.js":33}],32:[function(e,t,n){Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n,r;if(null==this)throw new TypeError(" this is null or not defined");var o=Object(this),i=o.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(n=t),r=0;i>r;){var a;r in o&&(a=o[r],e.call(n,a,r,o)),r++}}),Array.prototype.filter||(Array.prototype.filter=function(e){"use strict";if(void 0===this||null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var r=[],o=arguments.length>=2?arguments[1]:void 0,i=0;n>i;i++)if(i in t){var a=t[i];e.call(o,a,i,t)&&r.push(a)}return r})},{}],33:[function(e,t,n){"use strict";t.exports.exists=function(e){return"undefined"!=typeof e&&null!==e}},{}]},{},[1])(1)});
//# sourceMappingURL=dolphin.min.js.map