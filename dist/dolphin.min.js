!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.dolphin=e()}}(function(){return function e(t,r,n){function o(s,a){if(!r[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[s]={exports:{}};t[s][0].call(l.exports,function(e){var r=t[s][1][e];return o(r?r:e)},l,l.exports,e,t,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,r){"use strict";function n(e,t){function r(e){var t=e.presentationModelType;switch(t){case s:h.classRepository.registerClass(e);break;case a:h.classRepository.addListEntry(e),h.dolphin.getClientModelStore().deletePresentationModel(e);break;case u:h.classRepository.delListEntry(e),h.dolphin.getClientModelStore().deletePresentationModel(e);break;case c:h.classRepository.setListEntry(e),h.dolphin.getClientModelStore().deletePresentationModel(e);break;case l:case f:case d:break;default:var r=h.classRepository.load(e),n=h.addedHandlers.get(t);o(n)&&n.forEach(function(e){e(r)}),h.allAddedHandlers.forEach(function(e){e(r)})}}function n(e){var t=e.presentationModelType;switch(t){case s:h.classRepository.unregisterClass(e);break;case a:case u:case c:case l:case f:case d:break;default:var r=h.classRepository.unload(e);if(o(r)){var n=h.removedHandlers.get(t);o(n)&&n.forEach(function(e){e(r)}),h.allRemovedHandlers.forEach(function(e){e(r)})}else console.warn("Attempt to remove unknown bean",e)}}var h=this;this.dolphin=opendolphin.dolphin(e,!0,4),o(t)&&t.serverPush&&this.dolphin.startPushListening("ServerPushController:longPoll","ServerPushController:release"),this.classRepository=new i,this.addedHandlers=new Map,this.removedHandlers=new Map,this.allAddedHandlers=[],this.allRemovedHandlers=[],this.dolphin.getClientModelStore().onModelStoreChange(function(e){var t=e.clientPresentationModel;e.eventType===opendolphin.Type.ADDED?r(t):e.eventType===opendolphin.Type.REMOVED&&n(t)})}e("./polyfills.js");var o=e("./utils.js").exists,i=e("./classrepo.js").ClassRepository;r.connect=function(e,t){return console.debug("Connecting to Dolphin... ["+e+"]"),new n(e,t)};var s="@@@ DOLPHIN_BEAN @@@",a="@@@ LIST_ADD_FROM_SERVER @@@",u="@@@ LIST_DEL_FROM_SERVER @@@",c="@@@ LIST_SET_FROM_SERVER @@@",l="@@@ LIST_ADD_FROM_CLIENT @@@",f="@@@ LIST_DEL_FROM_CLIENT @@@",d="@@@ LIST_SET_FROM_CLIENT @@@";n.prototype.isManaged=function(e){throw"Not implemented yet"},n.prototype.create=function(e){throw"Not implemented yet"},n.prototype.add=function(e,t){throw"Not implemented yet"},n.prototype.addAll=function(e,t){throw"Not implemented yet"},n.prototype.remove=function(e){throw"Not implemented yet"},n.prototype.removeAll=function(e){throw"Not implemented yet"},n.prototype.removeIf=function(e){throw"Not implemented yet"},n.prototype.onAdded=function(e,t){if(o(t)){var r=this.addedHandlers.get(e);o(r)||(r=[],this.addedHandlers.set(e,r)),r.push(t)}else this.allAddedHandlers.push(e);return null},n.prototype.onRemoved=function(e,t){if(o(t)){var r=this.removedHandlers.get(e);o(r)||(r=[],this.removedHandlers.set(e,r)),r.push(t)}else this.allRemovedHandlers.push(e);return null},n.prototype.send=function(e,t){if(o(t)){var r=[];for(var n in t)if(t.hasOwnProperty(n)){var i=this.classRepository.mapParamToDolphin(t[n]);r.push(this.dolphin.attribute(n,null,i.value,"VALUE")),r.push(this.dolphin.attribute(n,null,i.type,"VALUE_TYPE"))}this.dolphin.presentationModel.apply(this.dolphin,[null,"@@@ DOLPHIN_PARAMETER @@@"].concat(r))}return this.dolphin.send(e),null}},{"./classrepo.js":23,"./polyfills.js":24,"./utils.js":25}],2:[function(e,t,r){e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.map"),t.exports=e("../modules/$").core.Map},{"../modules/$":12,"../modules/es6.map":19,"../modules/es6.string.iterator":20,"../modules/web.dom.iterable":21}],3:[function(e,t,r){function n(e,t,r){if(!e)throw TypeError(r?t+r:t)}var o=e("./$");n.def=o.assertDefined,n.fn=function(e){if(!o.isFunction(e))throw TypeError(e+" is not a function!");return e},n.obj=function(e){if(!o.isObject(e))throw TypeError(e+" is not an object!");return e},n.inst=function(e,t,r){if(!(e instanceof t))throw TypeError(r+": use the 'new' operator!");return e},t.exports=n},{"./$":12}],4:[function(e,t,r){function n(e){return s.call(e).slice(8,-1)}var o=e("./$"),i=e("./$.wks")("toStringTag"),s={}.toString;n.classof=function(e){var t,r;return void 0==e?void 0===e?"Undefined":"Null":"string"==typeof(r=(t=Object(e))[i])?r:n(t)},n.set=function(e,t,r){e&&!o.has(e=r?e:e.prototype,i)&&o.hide(e,i,t)},t.exports=n},{"./$":12,"./$.wks":17}],5:[function(e,t,r){"use strict";function n(e,t){if(!d(e))return("string"==typeof e?"S":"P")+e;if(v(e))return"F";if(!l(e,b)){if(!t)return"E";h(e,b,++w)}return"O"+e[b]}function o(e,t){var r,o=n(t);if("F"!=o)return e[y][o];for(r=e[g];r;r=r.n)if(r.k==t)return r}var i=e("./$"),s=e("./$.ctx"),a=e("./$.uid").safe,u=e("./$.assert"),c=e("./$.iter"),l=i.has,f=i.set,d=i.isObject,h=i.hide,p=c.step,v=Object.isFrozen||i.core.Object.isFrozen,b=a("id"),y=a("O1"),_=a("last"),g=a("first"),m=a("iter"),O=i.DESC?a("size"):"size",w=0;t.exports={getConstructor:function(e,t,r){function n(o){var s=u.inst(this,n,e);f(s,y,i.create(null)),f(s,O,0),f(s,_,void 0),f(s,g,void 0),void 0!=o&&c.forOf(o,t,s[r],s)}return i.mix(n.prototype,{clear:function(){for(var e=this,t=e[y],r=e[g];r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete t[r.i];e[g]=e[_]=void 0,e[O]=0},"delete":function(e){var t=this,r=o(t,e);if(r){var n=r.n,i=r.p;delete t[y][r.i],r.r=!0,i&&(i.n=n),n&&(n.p=i),t[g]==r&&(t[g]=n),t[_]==r&&(t[_]=i),t[O]--}return!!r},forEach:function(e){for(var t,r=s(e,arguments[1],3);t=t?t.n:this[g];)for(r(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!o(this,e)}}),i.DESC&&i.setDesc(n.prototype,"size",{get:function(){return u.def(this[O])}}),n},def:function(e,t,r){var i,s,a=o(e,t);return a?a.v=r:(e[_]=a={i:s=n(t,!0),k:t,v:r,p:i=e[_],n:void 0,r:!1},e[g]||(e[g]=a),i&&(i.n=a),e[O]++,"F"!=s&&(e[y][s]=a)),e},getEntry:o,getIterConstructor:function(){return function(e,t){f(this,m,{o:e,k:t})}},next:function(){for(var e=this[m],t=e.k,r=e.l;r&&r.r;)r=r.p;return e.o&&(e.l=r=r?r.n:e.o[g])?"key"==t?p(0,r.k):"value"==t?p(0,r.v):p(0,[r.k,r.v]):(e.o=void 0,p(1))}}},{"./$":12,"./$.assert":3,"./$.ctx":7,"./$.iter":11,"./$.uid":15}],6:[function(e,t,r){"use strict";var n=e("./$"),o=e("./$.def"),i=e("./$.iter"),s=e("./$.assert").inst;t.exports=function(t,r,a,u,c){function l(e,t){var r=p[e];n.FW&&(p[e]=function(e,n){var o=r.call(this,0===e?0:e,n);return t?this:o})}var f=n.g[t],d=f,h=u?"set":"add",p=d&&d.prototype,v={};if(n.isFunction(d)&&(c||!i.BUGGY&&p.forEach&&p.entries)){var b,y=new d,_=y[h](c?{}:-0,1);e("./$.iter-detect")(function(e){new d(e)})||(d=function(e){s(this,d,t);var r=new f;return void 0!=e&&i.forOf(e,u,r[h],r),r},d.prototype=p,n.FW&&(p.constructor=d)),c||y.forEach(function(e,t){b=1/t===-(1/0)}),b&&(l("delete"),l("has"),u&&l("get")),(b||_!==y)&&l(h,!0)}else d=a.getConstructor(t,u,h),n.mix(d.prototype,r);return e("./$.cof").set(d,t),e("./$.species")(d),v[t]=d,o(o.G+o.W+o.F*(d!=f),v),c||i.std(d,t,a.getIterConstructor(),a.next,u?"key+value":"value",!u,!0),d}},{"./$":12,"./$.assert":3,"./$.cof":4,"./$.def":8,"./$.iter":11,"./$.iter-detect":10,"./$.species":13}],7:[function(e,t,r){var n=e("./$.assert").fn;t.exports=function(e,t,r){if(n(e),~r&&void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},{"./$.assert":3}],8:[function(e,t,r){function n(e,t){return function(){return e.apply(t,arguments)}}function o(e,t,r){var c,l,f,d,h=e&o.G,p=h?s:e&o.S?s[t]:(s[t]||{}).prototype,v=h?a:a[t]||(a[t]={});h&&(r=t);for(c in r)l=!(e&o.F)&&p&&c in p,l&&c in v||(f=l?p[c]:r[c],h&&!u(p[c])?d=r[c]:e&o.B&&l?d=n(f,s):e&o.W&&p[c]==f?!function(e){d=function(t){return this instanceof e?new e(t):e(t)},d.prototype=e.prototype}(f):d=e&o.P&&u(f)?n(Function.call,f):f,i.hide(v,c,d))}var i=e("./$"),s=i.g,a=i.core,u=i.isFunction;o.F=1,o.G=2,o.S=4,o.P=8,o.B=16,o.W=32,t.exports=o},{"./$":12}],9:[function(e,t,r){t.exports=function(e){return e.FW=!1,e.path=e.core,e}},{}],10:[function(e,t,r){var n=e("./$.wks")("iterator"),o=!1;try{var i=[7][n]();i["return"]=function(){o=!0},Array.from(i,function(){throw 2})}catch(s){}t.exports=function(e){if(!o)return!1;var t=!1;try{var r=[7],i=r[n]();i.next=function(){t=!0},r[n]=function(){return i},e(r)}catch(s){}return t}},{"./$.wks":17}],11:[function(e,t,r){"use strict";function n(e,t){u.hide(e,h,t),p in[]&&u.hide(e,p,t)}function o(e,t,r,o){var i=e.prototype,s=i[h]||i[p]||o&&i[o]||r;if(u.FW&&n(i,s),s!==r){var a=u.getProto(s.call(new e));l.set(a,t+" Iterator",!0),u.FW&&u.has(i,p)&&n(a,u.that)}return v[t]=s,v[t+" Iterator"]=u.that,s}function i(e){var t=u.g.Symbol,r=e[t&&t.iterator||p],n=r||e[h]||v[l.classof(e)];return d(n.call(e))}function s(e){var t=e["return"];void 0!==t&&d(t.call(e))}function a(e,t,r,n){try{return n?t(d(r)[0],r[1]):t(r)}catch(o){throw s(e),o}}var u=e("./$"),c=e("./$.ctx"),l=e("./$.cof"),f=e("./$.def"),d=e("./$.assert").obj,h=e("./$.wks")("iterator"),p="@@iterator",v={},b={},y="keys"in[]&&!("next"in[].keys());n(b,u.that);var _=t.exports={BUGGY:y,Iterators:v,prototype:b,step:function(e,t){return{value:t,done:!!e}},stepCall:a,close:s,is:function(e){var t=Object(e),r=u.g.Symbol,n=r&&r.iterator||p;return n in t||h in t||u.has(v,l.classof(t))},get:i,set:n,create:function(e,t,r,n){e.prototype=u.create(n||_.prototype,{next:u.desc(1,r)}),l.set(e,t+" Iterator")},define:o,std:function(e,t,r,n,i,s,a){function c(e){return function(){return new r(this,e)}}_.create(r,t,n);var l,d,h=c("key+value"),p=c("value"),v=e.prototype;if("value"==i?p=o(e,t,p,"values"):h=o(e,t,h,"entries"),i&&(l={entries:h,keys:s?p:c("key"),values:p},f(f.P+f.F*y,t,l),a))for(d in l)d in v||u.hide(v,d,l[d])},forOf:function(e,t,r,n){for(var o,u=i(e),l=c(r,n,t?2:1);!(o=u.next()).done;)if(a(u,l,o.value,t)===!1)return s(u)}}},{"./$":12,"./$.assert":3,"./$.cof":4,"./$.ctx":7,"./$.def":8,"./$.wks":17}],12:[function(e,t,r){"use strict";function n(e){return isNaN(e=+e)?0:(e>0?v:p)(e)}function o(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}function i(e,t,r){return e[t]=r,e}function s(e){return _?function(t,r,n){return m.setDesc(t,r,o(e,n))}:i}function a(e){return null!==e&&("object"==typeof e||"function"==typeof e)}function u(e){return"function"==typeof e}function c(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}var l="undefined"!=typeof self?self:Function("return this")(),f={},d=Object.defineProperty,h={}.hasOwnProperty,p=Math.ceil,v=Math.floor,b=Math.max,y=Math.min,_=!!function(){try{return 2==d({},"a",{get:function(){return 2}}).a}catch(e){}}(),g=s(1),m=t.exports=e("./$.fw")({g:l,core:f,html:l.document&&document.documentElement,isObject:a,isFunction:u,it:function(e){return e},that:function(){return this},toInteger:n,toLength:function(e){return e>0?y(n(e),9007199254740991):0},toIndex:function(e,t){return e=n(e),0>e?b(e+t,0):y(e,t)},has:function(e,t){return h.call(e,t)},create:Object.create,getProto:Object.getPrototypeOf,DESC:_,desc:o,getDesc:Object.getOwnPropertyDescriptor,setDesc:d,getKeys:Object.keys,getNames:Object.getOwnPropertyNames,getSymbols:Object.getOwnPropertySymbols,assertDefined:c,ES5Object:Object,toObject:function(e){return m.ES5Object(c(e))},hide:g,def:s(0),set:l.Symbol?i:g,mix:function(e,t){for(var r in t)g(e,r,t[r]);return e},each:[].forEach});"undefined"!=typeof __e&&(__e=f),"undefined"!=typeof __g&&(__g=l)},{"./$.fw":9}],13:[function(e,t,r){var n=e("./$");t.exports=function(t){n.DESC&&n.FW&&n.setDesc(t,e("./$.wks")("species"),{configurable:!0,get:n.that})}},{"./$":12,"./$.wks":17}],14:[function(e,t,r){"use strict";var n=e("./$");t.exports=function(e){return function(t){var r,o,i=String(n.assertDefined(this)),s=n.toInteger(t),a=i.length;return 0>s||s>=a?e?"":void 0:(r=i.charCodeAt(s),55296>r||r>56319||s+1===a||(o=i.charCodeAt(s+1))<56320||o>57343?e?i.charAt(s):r:e?i.slice(s,s+2):(r-55296<<10)+(o-56320)+65536)}}},{"./$":12}],15:[function(e,t,r){function n(e){return"Symbol("+e+")_"+(++o+Math.random()).toString(36)}var o=0;n.safe=e("./$").g.Symbol||n,t.exports=n},{"./$":12}],16:[function(e,t,r){var n=e("./$"),o=e("./$.wks")("unscopables");!n.FW||o in[]||n.hide(Array.prototype,o,{}),t.exports=function(e){n.FW&&([][o][e]=!0)}},{"./$":12,"./$.wks":17}],17:[function(e,t,r){var n=e("./$").g,o={};t.exports=function(t){return o[t]||(o[t]=n.Symbol&&n.Symbol[t]||e("./$.uid").safe("Symbol."+t))}},{"./$":12,"./$.uid":15}],18:[function(e,t,r){var n=e("./$"),o=e("./$.unscope"),i=e("./$.uid").safe("iter"),s=e("./$.iter"),a=s.step,u=s.Iterators;s.std(Array,"Array",function(e,t){n.set(this,i,{o:n.toObject(e),i:0,k:t})},function(){var e=this[i],t=e.o,r=e.k,n=e.i++;return!t||n>=t.length?(e.o=void 0,a(1)):"key"==r?a(0,n):"value"==r?a(0,t[n]):a(0,[n,t[n]])},"value"),u.Arguments=u.Array,o("keys"),o("values"),o("entries")},{"./$":12,"./$.iter":11,"./$.uid":15,"./$.unscope":16}],19:[function(e,t,r){"use strict";var n=e("./$.collection-strong");e("./$.collection")("Map",{get:function(e){var t=n.getEntry(this,e);return t&&t.v},set:function(e,t){return n.def(this,0===e?0:e,t)}},n,!0)},{"./$.collection":6,"./$.collection-strong":5}],20:[function(e,t,r){var n=e("./$").set,o=e("./$.string-at")(!0),i=e("./$.uid").safe("iter"),s=e("./$.iter"),a=s.step;s.std(String,"String",function(e){n(this,i,{o:String(e),i:0})},function(){var e,t=this[i],r=t.o,n=t.i;return n>=r.length?a(1):(e=o.call(r,n),t.i+=e.length,a(0,e))})},{"./$":12,"./$.iter":11,"./$.string-at":14,"./$.uid":15}],21:[function(e,t,r){e("./es6.array.iterator");var n=e("./$"),o=e("./$.iter").Iterators,i=e("./$.wks")("iterator"),s=o.Array,a=n.g.NodeList;!n.FW||!a||i in a.prototype||n.hide(a.prototype,i,s),o.NodeList=s},{"./$":12,"./$.iter":11,"./$.wks":17,"./es6.array.iterator":18}],22:[function(e,t,r){(function(e){!function(e){"use strict";function n(){function e(e){t=e}if("function"!=typeof Object.observe||"function"!=typeof Array.observe)return!1;var t=[],r={},n=[];return Object.observe(r,e),Array.observe(n,e),r.id=1,r.id=2,delete r.id,n.push(1,2),n.length=0,Object.deliverChangeRecords(e),5!==t.length?!1:"add"!=t[0].type||"update"!=t[1].type||"delete"!=t[2].type||"splice"!=t[3].type||"splice"!=t[4].type?!1:(Object.unobserve(r,e),Array.unobserve(n,e),!0)}function o(){if("undefined"!=typeof chrome&&chrome.app&&chrome.app.runtime)return!1;if("undefined"!=typeof navigator&&navigator.getDeviceStorage)return!1;try{var e=new Function("","return true;");return e()}catch(t){return!1}}function i(e){return+e===e>>>0&&""!==e}function s(e){return+e}function a(e){return e===Object(e)}function u(e,t){return e===t?0!==e||1/e===1/t:G(e)&&G(t)?!0:e!==e&&t!==t}function c(e){if(void 0===e)return"eof";var t=e.charCodeAt(0);switch(t){case 91:case 93:case 46:case 34:case 39:case 48:return e;case 95:case 36:return"ident";case 32:case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"ws"}return t>=97&&122>=t||t>=65&&90>=t?"ident":t>=49&&57>=t?"number":"else"}function l(){}function f(e){function t(){if(!(d>=e.length)){var t=e[d+1];return"inSingleQuote"==h&&"'"==t||"inDoubleQuote"==h&&'"'==t?(d++,n=t,p.append(),!0):void 0}}for(var r,n,o,i,s,a,u,f=[],d=-1,h="beforePath",p={push:function(){void 0!==o&&(f.push(o),o=void 0)},append:function(){void 0===o?o=n:o+=n}};h;)if(d++,r=e[d],"\\"!=r||!t(h)){if(i=c(r),u=Y[h],s=u[i]||u["else"]||"error","error"==s)return;if(h=s[0],a=p[s[1]]||l,n=void 0===s[2]?r:s[2],a(),"afterPath"===h)return f}}function d(e){return Z.test(e)}function h(e,t){if(t!==J)throw Error("Use Path.get to retrieve path objects");for(var r=0;r<e.length;r++)this.push(String(e[r]));U&&this.length&&(this.getValueFrom=this.compiledGetValueFromFn())}function p(e){if(e instanceof h)return e;if((null==e||0==e.length)&&(e=""),"string"!=typeof e){if(i(e.length))return new h(e,J);e=String(e)}var t=K[e];if(t)return t;var r=f(e);if(!r)return X;var t=new h(r,J);return K[e]=t,t}function v(e){return i(e)?"["+e+"]":'["'+e.replace(/"/g,'\\"')+'"]'}function b(t){for(var r=0;te>r&&t.check_();)r++;return H&&(e.dirtyCheckCycleCount=r),r>0}function y(e){for(var t in e)return!1;return!0}function _(e){return y(e.added)&&y(e.removed)&&y(e.changed)}function g(e,t){var r={},n={},o={};for(var i in t){var s=e[i];(void 0===s||s!==t[i])&&(i in e?s!==t[i]&&(o[i]=s):n[i]=void 0)}for(var i in e)i in t||(r[i]=e[i]);return Array.isArray(e)&&e.length!==t.length&&(o.length=e.length),{added:r,removed:n,changed:o}}function m(){if(!re.length)return!1;for(var e=0;e<re.length;e++)re[e]();return re.length=0,!0}function O(){function e(e){t&&t.state_===ae&&!n&&t.check_(e)}var t,r,n=!1,o=!0;return{open:function(r){if(t)throw Error("ObservedObject in use");o||Object.deliverChangeRecords(e),t=r,o=!1},observe:function(t,n){r=t,n?Array.observe(r,e):Object.observe(r,e)},deliver:function(t){n=t,Object.deliverChangeRecords(e),n=!1},close:function(){t=void 0,Object.unobserve(r,e),oe.push(this)}}}function w(e,t,r){var n=oe.pop()||O();return n.open(e),n.observe(t,r),n}function j(){function e(t,i){t&&(t===n&&(o[i]=!0),a.indexOf(t)<0&&(a.push(t),Object.observe(t,r)),e(Object.getPrototypeOf(t),i))}function t(e){for(var t=0;t<e.length;t++){var r=e[t];if(r.object!==n||o[r.name]||"setPrototype"===r.type)return!1}return!0}function r(r){if(!t(r)){for(var n,o=0;o<s.length;o++)n=s[o],n.state_==ae&&n.iterateObjects_(e);for(var o=0;o<s.length;o++)n=s[o],n.state_==ae&&n.check_()}}var n,o,i=0,s=[],a=[],u={objects:a,get rootObject(){return n},set rootObject(e){n=e,o={}},open:function(t,r){s.push(t),i++,t.iterateObjects_(e)},close:function(e){if(i--,!(i>0)){for(var t=0;t<a.length;t++)Object.unobserve(a[t],r),$.unobservedCount++;s.length=0,a.length=0,n=void 0,o=void 0,ie.push(this),ee===this&&(ee=null)}}};return u}function E(e,t){return ee&&ee.rootObject===t||(ee=ie.pop()||j(),ee.rootObject=t),ee.open(e,t),ee}function $(){this.state_=se,this.callback_=void 0,this.target_=void 0,this.directObserver_=void 0,this.value_=void 0,this.id_=le++}function C(e){$._allObserversCount++,de&&fe.push(e)}function x(e){$._allObserversCount--}function k(e){$.call(this),this.value_=e,this.oldObject_=void 0}function P(e){if(!Array.isArray(e))throw Error("Provided object is not an Array");k.call(this,e)}function A(e,t){$.call(this),this.object_=e,this.path_=p(t),this.directObserver_=void 0}function S(e){$.call(this),this.reportChangesOnOpen_=e,this.value_=[],this.directObserver_=void 0,this.observed_=[]}function F(e){return e}function D(e,t,r,n){this.callback_=void 0,this.target_=void 0,this.value_=void 0,this.observable_=e,this.getValueFn_=t||F,this.setValueFn_=r||F,this.dontPassThroughSet_=n}function I(e,t,r){for(var n={},o={},i=0;i<t.length;i++){var s=t[i];ve[s.type]?(s.name in r||(r[s.name]=s.oldValue),"update"!=s.type&&("add"!=s.type?s.name in n?(delete n[s.name],delete r[s.name]):o[s.name]=!0:s.name in o?delete o[s.name]:n[s.name]=!0)):(console.error("Unknown changeRecord type: "+s.type),console.error(s))}for(var a in n)n[a]=e[a];for(var a in o)o[a]=void 0;var u={};for(var a in r)if(!(a in n||a in o)){var c=e[a];r[a]!==c&&(u[a]=c)}return{added:n,removed:o,changed:u}}function N(e,t,r){return{index:e,removed:t,addedCount:r}}function R(){}function T(e,t,r,n,o,i){return me.calcSplices(e,t,r,n,o,i)}function V(e,t,r,n){return r>t||e>n?-1:t==r||n==e?0:r>e?n>t?t-r:n-r:t>n?n-e:t-e}function M(e,t,r,n){for(var o=N(t,r,n),i=!1,s=0,a=0;a<e.length;a++){var u=e[a];if(u.index+=s,!i){var c=V(o.index,o.index+o.removed.length,u.index,u.index+u.addedCount);if(c>=0){e.splice(a,1),a--,s-=u.addedCount-u.removed.length,o.addedCount+=u.addedCount-c;var l=o.removed.length+u.removed.length-c;if(o.addedCount||l){var r=u.removed;if(o.index<u.index){var f=o.removed.slice(0,u.index-o.index);Array.prototype.push.apply(f,r),r=f}if(o.index+o.removed.length>u.index+u.addedCount){var d=o.removed.slice(u.index+u.addedCount-o.index);Array.prototype.push.apply(r,d)}o.removed=r,u.index<o.index&&(o.index=u.index)}else i=!0}else if(o.index<u.index){i=!0,e.splice(a,0,o),a++;var h=o.addedCount-o.removed.length;u.index+=h,s+=h}}}i||e.push(o)}function L(e,t){for(var r=[],n=0;n<t.length;n++){var o=t[n];switch(o.type){case"splice":M(r,o.index,o.removed.slice(),o.addedCount);break;case"add":case"update":case"delete":if(!i(o.name))continue;var a=s(o.name);if(0>a)continue;M(r,a,[o.oldValue],1);break;default:console.error("Unexpected record type: "+JSON.stringify(o))}}return r}function B(e,t){var r=[];return L(e,t).forEach(function(t){return 1==t.addedCount&&1==t.removed.length?void(t.removed[0]!==e[t.index]&&r.push(t)):void(r=r.concat(T(e,t.index,t.index+t.addedCount,t.removed,0,t.removed.length)))}),r}var H=e.testingExposeCycleCount,W=n(),U=o(),G=e.Number.isNaN||function(t){return"number"==typeof t&&e.isNaN(t)},q="__proto__"in{}?function(e){return e}:function(e){var t=e.__proto__;if(!t)return e;var r=Object.create(t);return Object.getOwnPropertyNames(e).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}),r},Q="[$_a-zA-Z]",z="[$_a-zA-Z0-9]",Z=new RegExp("^"+Q+"+"+z+"*$"),Y={beforePath:{ws:["beforePath"],ident:["inIdent","append"],"[":["beforeElement"],eof:["afterPath"]},inPath:{ws:["inPath"],".":["beforeIdent"],"[":["beforeElement"],eof:["afterPath"]},beforeIdent:{ws:["beforeIdent"],ident:["inIdent","append"]},inIdent:{ident:["inIdent","append"],0:["inIdent","append"],number:["inIdent","append"],ws:["inPath","push"],".":["beforeIdent","push"],"[":["beforeElement","push"],eof:["afterPath","push"]},beforeElement:{ws:["beforeElement"],0:["afterZero","append"],number:["inIndex","append"],"'":["inSingleQuote","append",""],'"':["inDoubleQuote","append",""]},afterZero:{ws:["afterElement","push"],"]":["inPath","push"]},inIndex:{0:["inIndex","append"],number:["inIndex","append"],ws:["afterElement"],"]":["inPath","push"]},inSingleQuote:{"'":["afterElement"],eof:["error"],"else":["inSingleQuote","append"]},inDoubleQuote:{'"':["afterElement"],eof:["error"],"else":["inDoubleQuote","append"]},afterElement:{ws:["afterElement"],"]":["inPath","push"]}},J={},K={};h.get=p,h.prototype=q({__proto__:[],valid:!0,toString:function(){for(var e="",t=0;t<this.length;t++){var r=this[t];e+=d(r)?t?"."+r:r:v(r)}return e},getValueFrom:function(e,t){for(var r=0;r<this.length;r++){if(null==e)return;e=e[this[r]]}return e},iterateObjects:function(e,t){for(var r=0;r<this.length;r++){if(r&&(e=e[this[r-1]]),!a(e))return;t(e,this[r])}},compiledGetValueFromFn:function(){var e="",t="obj";e+="if (obj != null";for(var r,n=0;n<this.length-1;n++)r=this[n],t+=d(r)?"."+r:v(r),e+=" &&\n     "+t+" != null";e+=")\n";var r=this[n];return t+=d(r)?"."+r:v(r),e+="  return "+t+";\nelse\n  return undefined;",new Function("obj",e)},setValueFrom:function(e,t){if(!this.length)return!1;for(var r=0;r<this.length-1;r++){if(!a(e))return!1;e=e[this[r]]}return a(e)?(e[this[r]]=t,!0):!1}});var X=new h("",J);X.valid=!1,X.getValueFrom=X.setValueFrom=function(){};var ee,te=1e3,re=[],ne=W?function(){return function(e){return Promise.resolve().then(e)}}():function(){return function(e){re.push(e)}}(),oe=[],ie=[],se=0,ae=1,ue=2,ce=3,le=1;$.prototype={open:function(e,t){if(this.state_!=se)throw Error("Observer has already been opened.");return C(this),this.callback_=e,this.target_=t,this.connect_(),this.state_=ae,this.value_},close:function(){this.state_==ae&&(x(this),this.disconnect_(),this.value_=void 0,this.callback_=void 0,this.target_=void 0,this.state_=ue)},deliver:function(){this.state_==ae&&b(this)},report_:function(e){try{this.callback_.apply(this.target_,e)}catch(t){$._errorThrownDuringCallback=!0,console.error("Exception caught during observer callback: "+(t.stack||t))}},discardChanges:function(){return this.check_(void 0,!0),this.value_}};var fe,de=!W;$._allObserversCount=0,de&&(fe=[]);var he=!1;e.Platform=e.Platform||{},e.Platform.performMicrotaskCheckpoint=function(){if(!he&&de){he=!0;var t,r,n=0;do{n++,r=fe,fe=[],t=!1;for(var o=0;o<r.length;o++){var i=r[o];i.state_==ae&&(i.check_()&&(t=!0),fe.push(i))}m()&&(t=!0)}while(te>n&&t);H&&(e.dirtyCheckCycleCount=n),he=!1}},de&&(e.Platform.clearObservers=function(){fe=[]}),k.prototype=q({__proto__:$.prototype,arrayObserve:!1,connect_:function(e,t){W?this.directObserver_=w(this,this.value_,this.arrayObserve):this.oldObject_=this.copyObject(this.value_)},copyObject:function(e){var t=Array.isArray(e)?[]:{};for(var r in e)t[r]=e[r];return Array.isArray(e)&&(t.length=e.length),t},check_:function(e,t){var r,n;if(W){if(!e)return!1;n={},r=I(this.value_,e,n)}else n=this.oldObject_,r=g(this.value_,this.oldObject_);return _(r)?!1:(W||(this.oldObject_=this.copyObject(this.value_)),this.report_([r.added||{},r.removed||{},r.changed||{},function(e){return n[e]}]),!0)},disconnect_:function(){W?(this.directObserver_.close(),this.directObserver_=void 0):this.oldObject_=void 0},deliver:function(){this.state_==ae&&(W?this.directObserver_.deliver(!1):b(this))},discardChanges:function(){return this.directObserver_?this.directObserver_.deliver(!0):this.oldObject_=this.copyObject(this.value_),this.value_}}),P.prototype=q({__proto__:k.prototype,arrayObserve:!0,copyObject:function(e){return e.slice()},check_:function(e){var t;if(W){if(!e)return!1;t=B(this.value_,e)}else t=T(this.value_,0,this.value_.length,this.oldObject_,0,this.oldObject_.length);return t&&t.length?(W||(this.oldObject_=this.copyObject(this.value_)),this.report_([t]),!0):!1}}),P.applySplices=function(e,t,r){r.forEach(function(r){for(var n=[r.index,r.removed.length],o=r.index;o<r.index+r.addedCount;)n.push(t[o]),o++;Array.prototype.splice.apply(e,n)})},A.prototype=q({__proto__:$.prototype,get path(){return this.path_},connect_:function(){W&&(this.directObserver_=E(this,this.object_)),this.check_(void 0,!0)},disconnect_:function(){this.value_=void 0,this.directObserver_&&(this.directObserver_.close(this),this.directObserver_=void 0)},iterateObjects_:function(e){this.path_.iterateObjects(this.object_,e)},check_:function(e,t){var r=this.value_;return this.value_=this.path_.getValueFrom(this.object_),t||u(this.value_,r)?!1:(this.report_([this.value_,r,this]),!0)},setValue:function(e){this.path_&&this.path_.setValueFrom(this.object_,e)}});var pe={};S.prototype=q({__proto__:$.prototype,connect_:function(){if(W){for(var e,t=!1,r=0;r<this.observed_.length;r+=2)if(e=this.observed_[r],e!==pe){t=!0;break}t&&(this.directObserver_=E(this,e))}this.check_(void 0,!this.reportChangesOnOpen_)},disconnect_:function(){for(var e=0;e<this.observed_.length;e+=2)this.observed_[e]===pe&&this.observed_[e+1].close();this.observed_.length=0,this.value_.length=0,this.directObserver_&&(this.directObserver_.close(this),this.directObserver_=void 0)},addPath:function(e,t){if(this.state_!=se&&this.state_!=ce)throw Error("Cannot add paths once started.");var t=p(t);if(this.observed_.push(e,t),this.reportChangesOnOpen_){var r=this.observed_.length/2-1;this.value_[r]=t.getValueFrom(e)}},addObserver:function(e){if(this.state_!=se&&this.state_!=ce)throw Error("Cannot add observers once started.");if(this.observed_.push(pe,e),this.reportChangesOnOpen_){var t=this.observed_.length/2-1;this.value_[t]=e.open(this.deliver,this)}},startReset:function(){if(this.state_!=ae)throw Error("Can only reset while open");this.state_=ce,this.disconnect_()},finishReset:function(){if(this.state_!=ce)throw Error("Can only finishReset after startReset");return this.state_=ae,this.connect_(),this.value_},iterateObjects_:function(e){for(var t,r=0;r<this.observed_.length;r+=2)t=this.observed_[r],t!==pe&&this.observed_[r+1].iterateObjects(t,e)},check_:function(e,t){for(var r,n=0;n<this.observed_.length;n+=2){var o,i=this.observed_[n],s=this.observed_[n+1];if(i===pe){var a=s;o=this.state_===se?a.open(this.deliver,this):a.discardChanges()}else o=s.getValueFrom(i);t?this.value_[n/2]=o:u(o,this.value_[n/2])||(r=r||[],r[n/2]=this.value_[n/2],this.value_[n/2]=o)}return r?(this.report_([this.value_,r,this.observed_]),!0):!1}}),D.prototype={open:function(e,t){return this.callback_=e,this.target_=t,this.value_=this.getValueFn_(this.observable_.open(this.observedCallback_,this)),this.value_},observedCallback_:function(e){if(e=this.getValueFn_(e),!u(e,this.value_)){var t=this.value_;this.value_=e,this.callback_.call(this.target_,this.value_,t)}},discardChanges:function(){return this.value_=this.getValueFn_(this.observable_.discardChanges()),this.value_},deliver:function(){return this.observable_.deliver()},setValue:function(e){return e=this.setValueFn_(e),!this.dontPassThroughSet_&&this.observable_.setValue?this.observable_.setValue(e):void 0},close:function(){this.observable_&&this.observable_.close(),this.callback_=void 0,this.target_=void 0,this.observable_=void 0,this.value_=void 0,this.getValueFn_=void 0,this.setValueFn_=void 0}};var ve={add:!0,update:!0,"delete":!0},be=0,ye=1,_e=2,ge=3;R.prototype={calcEditDistances:function(e,t,r,n,o,i){for(var s=i-o+1,a=r-t+1,u=new Array(s),c=0;s>c;c++)u[c]=new Array(a),u[c][0]=c;for(var l=0;a>l;l++)u[0][l]=l;for(var c=1;s>c;c++)for(var l=1;a>l;l++)if(this.equals(e[t+l-1],n[o+c-1]))u[c][l]=u[c-1][l-1];else{var f=u[c-1][l]+1,d=u[c][l-1]+1;u[c][l]=d>f?f:d}return u},spliceOperationsFromEditDistances:function(e){for(var t=e.length-1,r=e[0].length-1,n=e[t][r],o=[];t>0||r>0;)if(0!=t)if(0!=r){var i,s=e[t-1][r-1],a=e[t-1][r],u=e[t][r-1];i=u>a?s>a?a:s:s>u?u:s,i==s?(s==n?o.push(be):(o.push(ye),n=s),t--,r--):i==a?(o.push(ge),t--,n=a):(o.push(_e),r--,n=u)}else o.push(ge),t--;else o.push(_e),r--;return o.reverse(),o},calcSplices:function(e,t,r,n,o,i){var s=0,a=0,u=Math.min(r-t,i-o);if(0==t&&0==o&&(s=this.sharedPrefix(e,n,u)),r==e.length&&i==n.length&&(a=this.sharedSuffix(e,n,u-s)),t+=s,o+=s,r-=a,i-=a,r-t==0&&i-o==0)return[];if(t==r){for(var c=N(t,[],0);i>o;)c.removed.push(n[o++]);return[c]}if(o==i)return[N(t,[],r-t)];for(var l=this.spliceOperationsFromEditDistances(this.calcEditDistances(e,t,r,n,o,i)),c=void 0,f=[],d=t,h=o,p=0;p<l.length;p++)switch(l[p]){case be:c&&(f.push(c),c=void 0),d++,h++;break;case ye:c||(c=N(d,[],0)),c.addedCount++,d++,c.removed.push(n[h]),h++;break;case _e:c||(c=N(d,[],0)),c.addedCount++,d++;break;case ge:c||(c=N(d,[],0)),c.removed.push(n[h]),h++}return c&&f.push(c),f},sharedPrefix:function(e,t,r){for(var n=0;r>n;n++)if(!this.equals(e[n],t[n]))return n;return r},sharedSuffix:function(e,t,r){for(var n=e.length,o=t.length,i=0;r>i&&this.equals(e[--n],t[--o]);)i++;return i},calculateSplices:function(e,t){return this.calcSplices(e,0,e.length,t,0,t.length)},equals:function(e,t){return e===t}};var me=new R,Oe=e;"undefined"==typeof r||r.nodeType||("undefined"!=typeof t&&t.exports&&(r=t.exports),Oe=r),Oe.Observer=$,Oe.Observer.runEOM_=ne,Oe.Observer.observerSentinel_=pe,Oe.Observer.hasObjectObserve=W,Oe.ArrayObserver=P,Oe.ArrayObserver.calculateSplices=function(e,t){return me.calculateSplices(e,t)},Oe.ArraySplice=R,Oe.ObjectObserver=k,Oe.PathObserver=A,Oe.CompoundObserver=S,Oe.Path=h,Oe.ObserverTransform=D}("undefined"!=typeof e&&e&&"undefined"!=typeof t&&t?e:this||window)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],23:[function(e,t,r){"use strict";function n(e,t,r){return t===f?e.beanFromDolphin.get(r):r}function o(e,t,r){return t===f?e.beanToDolphin.get(r):r}function i(e,t,r,n,o){var i=e[t];u(i)?Array.isArray(i)||(e[t]=i=[i]):e[t]=i=[],i.splice(r,n,o)}function s(){this.classes=new a,this.beanFromDolphin=new a,this.beanToDolphin=new a,this.classInfos=new a}e("./polyfills.js"),e("../bower_components/observe-js/src/observe.js");var a=e("../bower_components/core.js/library/fn/map"),u=e("./utils.js").exists,c=0,l=1,f=2;s.prototype.registerClass=function(e){if(!this.classes.has(e.id)){
console.debug("ClassRepository.registerClass",e);var t={};e.attributes.forEach(function(e){t[e.propertyName]=c,e.onValueChange(function(r){t[e.propertyName]=r.newValue})}),this.classes.set(e.id,t)}},s.prototype.unregisterClass=function(e){console.debug("ClassRepository.unregisterClass",e),this.classes["delete"](e.id)},s.prototype.load=function(e){console.debug("ClassRepository.load():",e);var t=this,r=this.classes.get(e.presentationModelType),i={};e.attributes.filter(function(e){return e.tag===opendolphin.Tag.value()}).forEach(function(e){e.onValueChange(function(o){o.oldValue!==o.newValue&&(i[e.propertyName]=n(t,r[e.propertyName],o.newValue))})});var s=new ObjectObserver(i);return s.open(function(n,i,s){Object.keys(n).forEach(function(i){var s=e.findAttributeByPropertyName(i);if(u(s)){var a=o(t,r[i],n[i]);s.setValue(a)}}),Object.keys(i).forEach(function(t){var r=e.findAttributeByPropertyName(t);u(r)&&r.setValue(null)}),Object.keys(s).forEach(function(n){var i=e.findAttributeByPropertyName(n);if(u(i)){var a=o(t,r[n],s[n]);i.setValue(a)}})}),this.beanFromDolphin.set(e.id,i),this.beanToDolphin.set(i,e.id),this.classInfos.set(e.id,r),i},s.prototype.unload=function(e){console.debug("ClassRepository.unload():",e);var t=this.beanFromDolphin.get(e.id);return this.beanFromDolphin["delete"](e.id),this.beanToDolphin["delete"](t),this.classInfos["delete"](e.id),t},s.prototype.addListEntry=function(e){console.debug("ClassRepository.addListEntry",e);var t=e.findAttributeByPropertyName("source"),r=e.findAttributeByPropertyName("attribute"),o=e.findAttributeByPropertyName("pos"),s=e.findAttributeByPropertyName("element");if(u(t)&&u(r)&&u(o)&&u(s)){var a=this.classInfos.get(t.value),c=this.beanFromDolphin.get(t.value);if(u(c)&&u(a)){var l=n(this,a[r.value],s.value);i(c,r.value,o.value,0,l)}else console.error("Invalid list modification update received. Source bean unknown.",e)}else console.error("Invalid list modification update received",e)},s.prototype.delListEntry=function(e){console.debug("ClassRepository.delListEntry",e);var t=e.findAttributeByPropertyName("source").value,r=e.findAttributeByPropertyName("attribute").value,n=e.findAttributeByPropertyName("from").value,o=e.findAttributeByPropertyName("to").value;if(u(t)&&u(r)&&u(n)&&u(o)){var s=this.beanFromDolphin.get(t.value);u(s)?i(s,r.value,n.value,o.value-n.value):console.error("Invalid list modification update received. Source bean unknown.",e)}else console.error("Invalid list modification update received",e)},s.prototype.setListEntry=function(e){console.debug("ClassRepository.setListEntry",e);var t=e.findAttributeByPropertyName("source"),r=e.findAttributeByPropertyName("attribute"),o=e.findAttributeByPropertyName("pos"),s=e.findAttributeByPropertyName("element");if(u(t)&&u(r)&&u(o)&&u(s)){var a=this.classInfos.get(t.value),c=this.beanFromDolphin.get(t.value);if(u(c)&&u(a)){var l=n(this,a[r.value],s.value);i(c,r.value,o.value,1,l)}else console.error("Invalid list modification update received. Source bean unknown.",e)}else console.error("Invalid list modification update received",e)},s.prototype.mapParamToDolphin=function(e){if("object"==typeof e){var t=this.beanToDolphin.get(e);if(u(e))return{value:t,type:f};throw"Only managed Dolphin Beans can be used"}return{value:e,type:l}},r.ClassRepository=s},{"../bower_components/core.js/library/fn/map":2,"../bower_components/observe-js/src/observe.js":22,"./polyfills.js":24,"./utils.js":25}],24:[function(e,t,r){Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var r,n;if(null==this)throw new TypeError(" this is null or not defined");var o=Object(this),i=o.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(r=t),n=0;i>n;){var s;n in o&&(s=o[n],e.call(r,s,n,o)),n++}}),Array.prototype.filter||(Array.prototype.filter=function(e){"use strict";if(void 0===this||null===this)throw new TypeError;var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var n=[],o=arguments.length>=2?arguments[1]:void 0,i=0;r>i;i++)if(i in t){var s=t[i];e.call(o,s,i,t)&&n.push(s)}return n})},{}],25:[function(e,t,r){"use strict";t.exports.exists=function(e){return"undefined"!=typeof e&&null!==e}},{}]},{},[1])(1)});
//# sourceMappingURL=dolphin.min.js.map