/*!
 * Copyright 2015-2018 Canoo Engineering AG.
 * 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *     http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.platformClient=t():e.platformClient=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=107)}([function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";t.__esModule=!0;var r,o=n(62),i=(r=o)&&r.__esModule?r:{default:r};t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=u(n(127)),i=u(n(128)),a=u(n(132));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){return void 0!==e&&null!==e}t.exists=c,t.checkMethod=function(e){r=e},t.checkParam=function(e,t){if(!c(e))throw new Error("The parameter "+t+" is mandatory in "+r)},t.parseUrl=function(e){var t=e.match(/^(((([^:\/#\?]+:)?(?:(\/\/)((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/),n=void 0;t[4]&&t[4].length>1&&(n=t[4].substring(0,t[4].length-1));var r=t[13],u=void 0;if(t[16]&&t[16].length>1){var c=(u=t[16].substring(1,t[16].length)).split("&");u=c.reduce(function(e,t){var n=t.split("="),r=(0,a.default)(n,2),u=r[0],c=r[1];return(0,i.default)(e,(0,o.default)({},u,c))},{})}var l=void 0;t[17]&&t[17].length>1&&(l=t[17].substring(1,t[17].length));var s=t[11],d=t[12];s&&!d&&"http"===n?d=80:s&&!d&&"https"===n&&(d=443);s||d||n||(window&&window.location&&window.location.hostname&&(s=window.location.hostname),window&&window.location&&window.location.port&&(d=window.location.port),window&&window.location&&window.location.protocol&&(n=window.location.protocol.substring(0,window.location.protocol.length-1)),0===r.indexOf(".")&&(r=r.substring(1,r.length)));d&&(d=parseInt(d));return{scheme:n,user:t[8],password:t[9],hostname:s,port:d,path:r,query:u,fragment:l}}},function(e,t){var n=e.exports={version:"2.5.3"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(8),o=n(3),i=n(13),a=n(14),u="prototype",c=function(e,t,n){var l,s,d,f=e&c.F,h=e&c.G,v=e&c.S,p=e&c.P,m=e&c.B,y=e&c.W,_=h?o:o[t]||(o[t]={}),g=_[u],C=h?r:v?r[t]:(r[t]||{})[u];h&&(n=t);for(l in n)(s=!f&&C&&void 0!==C[l])&&l in _||(d=s?C[l]:n[l],_[l]=h&&"function"!=typeof C[l]?n[l]:m&&s?i(d,r):y&&C[l]==d?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[u]=e[u],t}(d):p&&"function"==typeof d?i(Function.call,d):d,p&&((_.virtual||(_.virtual={}))[l]=d,e&c.R&&g&&!g[l]&&a(g,l,d)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ATTRIBUTE_METADATA_CHANGED_COMMAND_ID="AttributeMetadataChanged",t.CALL_ACTION_COMMAND_ID="CallAction",t.CHANGE_ATTRIBUTE_METADATA_COMMAND_ID="ChangeAttributeMetadata",t.CREATE_CONTEXT_COMMAND_ID="CreateContext",t.CREATE_CONTROLLER_COMMAND_ID="CreateController",t.CREATE_PRESENTATION_MODEL_COMMAND_ID="CreatePresentationModel",t.DELETE_PRESENTATION_MODEL_COMMAND_ID="DeletePresentationModel",t.DESTROY_CONTEXT_COMMAND_ID="DestroyContext",t.DESTROY_CONTROLLER_COMMAND_ID="DestroyController",t.INTERRUPT_LONG_POLL_COMMAND_ID="InterruptLongPoll",t.PRESENTATION_MODEL_DELETED_COMMAND_ID="PresentationModelDeleted",t.START_LONG_POLL_COMMAND_ID="StartLongPoll",t.VALUE_CHANGED_COMMAND_ID="ValueChanged",t.ID="id",t.ATTRIBUTE_ID="a_id",t.PM_ID="p_id",t.CONTROLLER_ID="c_id",t.PM_TYPE="t",t.NAME="n",t.VALUE="v",t.PARAMS="p",t.PM_ATTRIBUTES="a"},function(e,t,n){var r=n(47)("wks"),o=n(35),i=n(8).Symbol,a="function"==typeof i;(e.exports=function(e){return r[e]||(r[e]=a&&i[e]||(a?i:o)("Symbol."+e))}).store=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggerFactory=t.LogLevel=void 0;var r=n(61),o=n(108);t.LogLevel=r.LogLevel,t.LoggerFactory=o.LoggerFactory},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(11),o=n(63),i=n(41),a=Object.defineProperty;t.f=n(12)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var r=n(10);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports=!n(15)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(22);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(9),o=n(23);e.exports=n(12)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){"use strict";var r=n(112)(!0);n(44)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){e.exports={default:n(111),__esModule:!0}},function(e,t){e.exports={}},function(e,t,n){var r=n(45),o=n(43);e.exports=function(e){return r(o(e))}},function(e,t,n){n(117);for(var r=n(8),o=n(14),i=n(19),a=n(6)("toStringTag"),u="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),c=0;c<u.length;c++){var l=u[c],s=r[l],d=s&&s.prototype;d&&!d[a]&&o(d,a,l),i[l]=i.Array}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(9).f,o=n(17),i=n(6)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},function(e,t,n){var r=n(43);e.exports=function(e){return Object(r(e))}},function(e,t,n){var r=n(13),o=n(70),i=n(71),a=n(11),u=n(34),c=n(51),l={},s={};(t=e.exports=function(e,t,n,d,f){var h,v,p,m,y=f?function(){return e}:c(e),_=r(n,d,t?2:1),g=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(i(y)){for(h=u(e.length);h>g;g++)if((m=t?_(a(v=e[g])[0],v[1]):_(e[g]))===l||m===s)return m}else for(p=y.call(e);!(v=p.next()).done;)if((m=o(p,_,v.value,t))===l||m===s)return m}).BREAK=l,t.RETURN=s},function(e,t,n){e.exports={default:n(150),__esModule:!0}},function(e,t,n){"use strict";t.__esModule=!0;var r=a(n(173)),o=a(n(175)),i="function"==typeof o.default&&"symbol"==typeof r.default?function(e){return typeof e}:function(e){return e&&"function"==typeof o.default&&e.constructor===o.default&&e!==o.default.prototype?"symbol":typeof e};function a(e){return e&&e.__esModule?e:{default:e}}t.default="function"==typeof o.default&&"symbol"===i(r.default)?function(e){return void 0===e?"undefined":i(e)}:function(e){return e&&"function"==typeof o.default&&e.constructor===o.default&&e!==o.default.prototype?"symbol":void 0===e?"undefined":i(e)}},function(e,t){},function(e,t){e.exports=!0},function(e,t,n){var r=n(11),o=n(114),i=n(48),a=n(46)("IE_PROTO"),u=function(){},c="prototype",l=function(){var e,t=n(40)("iframe"),r=i.length;for(t.style.display="none",n(66).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;r--;)delete l[c][i[r]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(u[c]=r(e),n=new u,u[c]=null,n[a]=e):n=l(),void 0===t?n:o(n,t)}},function(e,t,n){var r=n(65),o=n(48);e.exports=Object.keys||function(e){return r(e,o)}},function(e,t,n){var r=n(42),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(24),o=n(6)("toStringTag"),i="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?n:i?r(t):"Object"==(a=r(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.JS_STRING_TYPE="string",t.DOLPHIN_BEAN=0,t.BYTE=1,t.SHORT=2,t.INT=3,t.LONG=4,t.FLOAT=5,t.DOUBLE=6,t.BOOLEAN=7,t.STRING=8,t.DATE=9,t.ENUM=10,t.CALENDAR=11,t.LOCAL_DATE_FIELD_TYPE=55,t.LOCAL_DATE_TIME_FIELD_TYPE=52,t.ZONED_DATE_TIME_FIELD_TYPE=54,t.ADDED_TYPE="ADDED",t.REMOVED_TYPE="REMOVED"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=_(n(0)),o=_(n(1)),i=_(n(92)),a=_(n(93)),u=_(n(90)),c=_(n(97)),l=_(n(96)),s=_(n(100)),d=_(n(98)),f=_(n(94)),h=_(n(95)),v=_(n(99)),p=_(n(88)),m=_(n(91)),y=_(n(89));function _(e){return e&&e.__esModule?e:{default:e}}var g=function(){function e(){(0,r.default)(this,e)}return(0,o.default)(e,null,[{key:"createCreateContextCommand",value:function(){return new i.default}},{key:"createCreateControllerCommand",value:function(e,t){var n=new a.default;return n.init(e,t),n}},{key:"createCallActionCommand",value:function(e,t,n){var r=new u.default;return r.init(e,t,n),r}},{key:"createDestroyControllerCommand",value:function(e){var t=new c.default;return t.init(e),t}},{key:"createDestroyContextCommand",value:function(){return new l.default}},{key:"createStartLongPollCommand",value:function(){return new s.default}},{key:"createInterruptLongPollCommand",value:function(){return new d.default}},{key:"createCreatePresentationModelCommand",value:function(e){var t=new f.default;return t.init(e),t}},{key:"createDeletePresentationModelCommand",value:function(e){var t=new h.default;return t.init(e),t}},{key:"createPresentationModelDeletedCommand",value:function(e){var t=new v.default;return t.init(e),t}},{key:"createValueChangedCommand",value:function(e,t){var n=new p.default;return n.init(e,t),n}},{key:"createChangeAttributeMetadataCommand",value:function(e,t,n){var r=new m.default;return r.init(e,t,n),r}},{key:"createAttributeMetadataChangedCommand",value:function(e,t,n){var r=new y.default;return r.init(e,t,n),r}}]),e}();t.default=g},function(e,t,n){var r=n(10),o=n(8).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t,n){var r=n(10);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){"use strict";var r=n(31),o=n(4),i=n(64),a=n(14),u=n(17),c=n(19),l=n(113),s=n(25),d=n(67),f=n(6)("iterator"),h=!([].keys&&"next"in[].keys()),v="values",p=function(){return this};e.exports=function(e,t,n,m,y,_,g){l(n,t,m);var C,M,E,k=function(e){if(!h&&e in O)return O[e];switch(e){case"keys":case v:return function(){return new n(this,e)}}return function(){return new n(this,e)}},P=t+" Iterator",A=y==v,L=!1,O=e.prototype,T=O[f]||O["@@iterator"]||y&&O[y],b=!h&&T||k(y),D=y?A?k("entries"):b:void 0,w="Array"==t&&O.entries||T;if(w&&(E=d(w.call(new e)))!==Object.prototype&&E.next&&(s(E,P,!0),r||u(E,f)||a(E,f,p)),A&&T&&T.name!==v&&(L=!0,b=function(){return T.call(this)}),r&&!g||!h&&!L&&O[f]||a(O,f,b),c[t]=b,c[P]=p,y)if(C={values:A?b:k(v),keys:_?b:k("keys"),entries:D},g)for(M in C)M in O||i(O,M,C[M]);else o(o.P+o.F*(h||L),t,C);return C}},function(e,t,n){var r=n(24);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(47)("keys"),o=n(35);e.exports=function(e){return r[e]||(r[e]=o(e))}},function(e,t,n){var r=n(8),o="__core-js_shared__",i=r[o]||(r[o]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(14);e.exports=function(e,t,n){for(var o in t)n&&e[o]?e[o]=t[o]:r(e,o,t[o]);return e}},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(36),o=n(6)("iterator"),i=n(19);e.exports=n(3).getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||i[r(e)]}},function(e,t,n){var r=n(35)("meta"),o=n(10),i=n(17),a=n(9).f,u=0,c=Object.isExtensible||function(){return!0},l=!n(15)(function(){return c(Object.preventExtensions({}))}),s=function(e){a(e,r,{value:{i:"O"+ ++u,w:{}}})},d=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,r)){if(!c(e))return"F";if(!t)return"E";s(e)}return e[r].i},getWeak:function(e,t){if(!i(e,r)){if(!c(e))return!0;if(!t)return!1;s(e)}return e[r].w},onFreeze:function(e){return l&&d.NEED&&c(e)&&!i(e,r)&&s(e),e}}},function(e,t,n){var r=n(10);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){"use strict";var r=n(22);e.exports.f=function(e){return new function(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=r(t),this.reject=r(n)}(e)}},function(e,t,n){e.exports={default:n(160),__esModule:!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceProvider=void 0;var r=i(n(0)),o=i(n(1));function i(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(t,n){(0,r.default)(this,e),this.serviceInstance=new t,this.name=n}return(0,o.default)(e,[{key:"getName",value:function(){return this.name}},{key:"getService",value:function(){return this.serviceInstance}}]),e}();t.ServiceProvider=a},function(e,t,n){t.f=n(6)},function(e,t,n){var r=n(8),o=n(3),i=n(31),a=n(58),u=n(9).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||u(t,e,{value:a.f(e)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0)),o=i(n(1));function i(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(){(0,r.default)(this,e),this.eventHandlers=[]}return(0,o.default)(e,[{key:"onEvent",value:function(e){this.eventHandlers.push(e)}},{key:"trigger",value:function(e){this.eventHandlers.forEach(function(t){return t(e)})}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.LogLevel={NONE:{name:"NONE",text:"[NONE ]",level:0},ALL:{name:"ALL",text:"[ALL  ]",level:100},TRACE:{name:"TRACE",text:"[TRACE]",level:5},DEBUG:{name:"DEBUG",text:"[DEBUG]",level:4},INFO:{name:"INFO",text:"[INFO ]",level:3},WARN:{name:"WARN",text:"[WARN ]",level:2},ERROR:{name:"ERROR",text:"[ERROR]",level:1}}},function(e,t,n){e.exports={default:n(109),__esModule:!0}},function(e,t,n){e.exports=!n(12)&&!n(15)(function(){return 7!=Object.defineProperty(n(40)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){e.exports=n(14)},function(e,t,n){var r=n(17),o=n(20),i=n(115)(!1),a=n(46)("IE_PROTO");e.exports=function(e,t){var n,u=o(e),c=0,l=[];for(n in u)n!=a&&r(u,n)&&l.push(n);for(;t.length>c;)r(u,n=t[c++])&&(~i(l,n)||l.push(n));return l}},function(e,t,n){var r=n(8).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(17),o=n(26),i=n(46)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),r(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var r=n(9).f,o=n(32),i=n(49),a=n(13),u=n(50),c=n(27),l=n(44),s=n(68),d=n(72),f=n(12),h=n(52).fastKey,v=n(53),p=f?"_s":"size",m=function(e,t){var n,r=h(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,l){var s=e(function(e,r){u(e,s,t,"_i"),e._t=t,e._i=o(null),e._f=void 0,e._l=void 0,e[p]=0,void 0!=r&&c(r,n,e[l],e)});return i(s.prototype,{clear:function(){for(var e=v(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[p]=0},delete:function(e){var n=v(this,t),r=m(n,e);if(r){var o=r.n,i=r.p;delete n._i[r.i],r.r=!0,i&&(i.n=o),o&&(o.p=i),n._f==r&&(n._f=o),n._l==r&&(n._l=i),n[p]--}return!!r},forEach:function(e){v(this,t);for(var n,r=a(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!m(v(this,t),e)}}),f&&r(s.prototype,"size",{get:function(){return v(this,t)[p]}}),s},def:function(e,t,n){var r,o,i=m(e,t);return i?i.v=n:(e._l=i={i:o=h(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=i),r&&(r.n=i),e[p]++,"F"!==o&&(e._i[o]=i)),e},getEntry:m,setStrong:function(e,t,n){l(e,t,function(e,n){this._t=v(e,t),this._k=n,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?s(0,"keys"==t?n.k:"values"==t?n.v:[n.k,n.v]):(e._t=void 0,s(1))},n?"entries":"values",!n,!0),d(t)}}},function(e,t,n){var r=n(11);e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&r(i.call(e)),t}}},function(e,t,n){var r=n(19),o=n(6)("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||i[o]===e)}},function(e,t,n){"use strict";var r=n(8),o=n(3),i=n(9),a=n(12),u=n(6)("species");e.exports=function(e){var t="function"==typeof o[e]?o[e]:r[e];a&&t&&!t[u]&&i.f(t,u,{configurable:!0,get:function(){return this}})}},function(e,t,n){"use strict";var r=n(8),o=n(4),i=n(52),a=n(15),u=n(14),c=n(49),l=n(27),s=n(50),d=n(10),f=n(25),h=n(9).f,v=n(120)(0),p=n(12);e.exports=function(e,t,n,m,y,_){var g=r[e],C=g,M=y?"set":"add",E=C&&C.prototype,k={};return p&&"function"==typeof C&&(_||E.forEach&&!a(function(){(new C).entries().next()}))?(C=t(function(t,n){s(t,C,e,"_c"),t._c=new g,void 0!=n&&l(n,y,t[M],t)}),v("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in E&&(!_||"clear"!=e)&&u(C.prototype,e,function(n,r){if(s(this,C,e),!t&&_&&!d(n))return"get"==e&&void 0;var o=this._c[e](0===n?0:n,r);return t?this:o})}),_||h(C.prototype,"size",{get:function(){return this._c.size}})):(C=m.getConstructor(t,e,y,M),c(C.prototype,n),i.NEED=!0),f(C,e),k[e]=C,o(o.G+o.W+o.F,k),_||m.setStrong(C,e,y),C}},function(e,t,n){var r=n(24);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(36),o=n(124);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return o(this)}}},function(e,t,n){"use strict";var r=n(4);e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,n){"use strict";var r=n(4),o=n(22),i=n(13),a=n(27);e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,u,c=arguments[1];return o(this),(t=void 0!==c)&&o(c),void 0==e?new this:(n=[],t?(r=0,u=i(c,arguments[2],2),a(e,!1,function(e){n.push(u(e,r++))})):a(e,!1,n.push,n),new this(n))}})}},function(e,t,n){e.exports={default:n(141),__esModule:!0}},function(e,t,n){var r=n(6)("iterator"),o=!1;try{var i=[7][r]();i.return=function(){o=!0},Array.from(i,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var i=[7],a=i[r]();a.next=function(){return{done:n=!0}},i[r]=function(){return a},e(i)}catch(e){}return n}},function(e,t,n){var r=n(11),o=n(22),i=n(6)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[i])?t:o(n)}},function(e,t,n){var r,o,i,a=n(13),u=n(152),c=n(66),l=n(40),s=n(8),d=s.process,f=s.setImmediate,h=s.clearImmediate,v=s.MessageChannel,p=s.Dispatch,m=0,y={},_="onreadystatechange",g=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},C=function(e){g.call(e.data)};f&&h||(f=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return y[++m]=function(){u("function"==typeof e?e:Function(e),t)},r(m),m},h=function(e){delete y[e]},"process"==n(24)(d)?r=function(e){d.nextTick(a(g,e,1))}:p&&p.now?r=function(e){p.now(a(g,e,1))}:v?(i=(o=new v).port2,o.port1.onmessage=C,r=a(i.postMessage,i,1)):s.addEventListener&&"function"==typeof postMessage&&!s.importScripts?(r=function(e){s.postMessage(e+"","*")},s.addEventListener("message",C,!1)):r=_ in l("script")?function(e){c.appendChild(l("script"))[_]=function(){c.removeChild(this),g.call(e)}}:function(e){setTimeout(a(g,e,1),0)}),e.exports={set:f,clear:h}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var r=n(11),o=n(10),i=n(55);e.exports=function(e,t){if(r(e),o(t)&&t.constructor===e)return t;var n=i.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClientContextFactory=t.createClientContext=void 0;var r=p(n(167)),o=p(n(0)),i=p(n(1)),a=n(170),u=n(2),c=n(7),l=p(n(105)),s=p(n(200)),d=p(n(201)),f=p(n(202)),h=p(n(204)),v=p(n(205));function p(e){return e&&e.__esModule?e:{default:e}}var m=function(){function e(){(0,o.default)(this,e)}return(0,i.default)(e,[{key:"create",value:function(t,n){(0,u.checkMethod)("connect(url, config)"),(0,u.checkParam)(t,"url"),e.LOGGER.debug("Creating client context",t,n);var o=new v.default(t,n);o.on("error",function(e){_.emit("error",e)});var i=a.dolphinBuilder.withTransmitter(o).withSlackMS(4).withMaxBatchSize(r.default).build(),c=new d.default(i),p=new s.default(c),m=new l.default(t,i,c,n),y=new f.default(i,c,m),_=new h.default(i,p,y,m);return e.LOGGER.debug("clientContext created with",_),_}}]),e}();m.LOGGER=c.LoggerFactory.getLogger("ClientContextFactory");var y=(new m).create;t.createClientContext=y,t.ClientContextFactory=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=P(n(29)),o=P(n(182)),i=P(n(0)),a=P(n(1)),u=n(2),c=n(38),l=n(5),s=P(n(88)),d=P(n(89)),f=P(n(90)),h=P(n(91)),v=P(n(92)),p=P(n(93)),m=P(n(94)),y=P(n(95)),_=P(n(96)),g=P(n(97)),C=P(n(98)),M=P(n(99)),E=P(n(100)),k=P(n(184));function P(e){return e&&e.__esModule?e:{default:e}}var A=function(){function e(){(0,i.default)(this,e)}return(0,a.default)(e,null,[{key:"_encodeAttributeMetadataChangedCommand",value:function(e){(0,u.checkMethod)("Codec.encodeAttributeMetadataChangedCommand"),(0,u.checkParam)(e,"command"),(0,u.checkParam)(e.attributeId,"command.attributeId"),(0,u.checkParam)(e.metadataName,"command.metadataName");var t={};return t[l.ID]=l.ATTRIBUTE_METADATA_CHANGED_COMMAND_ID,t[l.ATTRIBUTE_ID]=e.attributeId,t[l.NAME]=e.metadataName,t[l.VALUE]=e.value,t}},{key:"_decodeAttributeMetadataChangedCommand",value:function(e){(0,u.checkMethod)("Codec.decodeAttributeMetadataChangedCommand"),(0,u.checkParam)(e,"jsonCommand"),(0,u.checkParam)(e[l.ATTRIBUTE_ID],"jsonCommand[ATTRIBUTE_ID]"),(0,u.checkParam)(e[l.NAME],"jsonCommand[NAME]");var t=new d.default;return t.attributeId=e[l.ATTRIBUTE_ID],t.metadataName=e[l.NAME],t.value=e[l.VALUE],t}},{key:"_encodeCallActionCommand",value:function(e){(0,u.checkMethod)("Codec.encodeCallActionCommand"),(0,u.checkParam)(e,"command"),(0,u.checkParam)(e.controllerid,"command.controllerid"),(0,u.checkParam)(e.actionName,"command.actionName"),(0,u.checkParam)(e.params,"command.params");var t={};return t[l.ID]=l.CALL_ACTION_COMMAND_ID,t[l.CONTROLLER_ID]=e.controllerid,t[l.NAME]=e.actionName,t[l.PARAMS]=e.params.map(function(e){var t={};return t[l.NAME]=e.name,(0,u.exists)(e.value)&&(t[l.VALUE]=e.value),t}),t}},{key:"_decodeCallActionCommand",value:function(e){(0,u.checkMethod)("Codec.decodeCallActionCommand"),(0,u.checkParam)(e,"jsonCommand"),(0,u.checkParam)(e[l.CONTROLLER_ID],"jsonCommand[CONTROLLER_ID]"),(0,u.checkParam)(e[l.NAME],"jsonCommand[NAME]"),(0,u.checkParam)(e[l.PARAMS],"jsonCommand[PARAMS]");var t=new f.default;return t.controllerid=e[l.CONTROLLER_ID],t.actionName=e[l.NAME],t.params=e[l.PARAMS].map(function(e){return{name:e[l.NAME],value:(0,u.exists)(e[l.VALUE])?e[l.VALUE]:null}}),t}},{key:"_encodeChangeAttributeMetadataCommand",value:function(e){(0,u.checkMethod)("Codec.encodeChangeAttributeMetadataCommand"),(0,u.checkParam)(e,"command"),(0,u.checkParam)(e.attributeId,"command.attributeId"),(0,u.checkParam)(e.metadataName,"command.metadataName");var t={};return t[l.ID]=l.CHANGE_ATTRIBUTE_METADATA_COMMAND_ID,t[l.ATTRIBUTE_ID]=e.attributeId,t[l.NAME]=e.metadataName,t[l.VALUE]=e.value,t}},{key:"_decodeChangeAttributeMetadataCommand",value:function(e){(0,u.checkMethod)("Codec.decodeChangeAttributeMetadataCommand"),(0,u.checkParam)(e,"jsonCommand"),(0,u.checkParam)(e[l.ATTRIBUTE_ID],"jsonCommand[ATTRIBUTE_ID]"),(0,u.checkParam)(e[l.NAME],"jsonCommand[NAME]");var t=new h.default;return t.attributeId=e[l.ATTRIBUTE_ID],t.metadataName=e[l.NAME],t.value=e[l.VALUE],t}},{key:"_encodeCreateContextCommand",value:function(e){(0,u.checkMethod)("Codec.encodeCreateContextCommand"),(0,u.checkParam)(e,"command");var t={};return t[l.ID]=l.CREATE_CONTEXT_COMMAND_ID,t}},{key:"_decodeCreateContextCommand",value:function(e){return(0,u.checkMethod)("Codec.decodeCreateContextCommand"),(0,u.checkParam)(e,"jsonCommand"),new v.default}},{key:"_encodeCreateControllerCommand",value:function(e){(0,u.checkMethod)("Codec._encodeCreateControllerCommand"),(0,u.checkParam)(e,"command"),(0,u.checkParam)(e.controllerName,"command.controllerName");var t={};return t[l.ID]=l.CREATE_CONTROLLER_COMMAND_ID,t[l.NAME]=e.controllerName,t[l.CONTROLLER_ID]=e.parentControllerId,t}},{key:"_decodeCreateControllerCommand",value:function(e){(0,u.checkMethod)("Codec._decodeCreateControllerCommand"),(0,u.checkParam)(e,"jsonCommand"),(0,u.checkParam)(e[l.NAME],"jsonCommand[NAME]"),(0,u.checkParam)(e[l.CONTROLLER_ID],"jsonCommand[CONTROLLER_ID]");var t=new p.default;return t.controllerName=e[l.NAME],t.parentControllerId=e[l.CONTROLLER_ID],t}},{key:"_encodeCreatePresentationModelCommand",value:function(e){(0,u.checkMethod)("Codec.encodeCreatePresentationModelCommand"),(0,u.checkParam)(e,"command"),(0,u.checkParam)(e.pmId,"command.pmId"),(0,u.checkParam)(e.pmType,"command.pmType");var t={};return t[l.ID]=l.CREATE_PRESENTATION_MODEL_COMMAND_ID,t[l.PM_ID]=e.pmId,t[l.PM_TYPE]=e.pmType,t[l.PM_ATTRIBUTES]=e.attributes.map(function(e){var t={};return t[l.NAME]=e.propertyName,t[l.ATTRIBUTE_ID]=e.id,(0,u.exists)(e.value)&&(t[l.VALUE]=e.value),t}),t}},{key:"_decodeCreatePresentationModelCommand",value:function(e){(0,u.checkMethod)("Codec.decodeCreatePresentationModelCommand"),(0,u.checkParam)(e,"jsonCommand"),(0,u.checkParam)(e[l.PM_ID],"jsonCommand[PM_ID]"),(0,u.checkParam)(e[l.PM_TYPE],"jsonCommand[PM_TYPE]");var t=new m.default;return t.pmId=e[l.PM_ID],t.pmType=e[l.PM_TYPE],t.attributes=e[l.PM_ATTRIBUTES].map(function(e){return{propertyName:e[l.NAME],id:e[l.ATTRIBUTE_ID],value:(0,u.exists)(e[l.VALUE])?e[l.VALUE]:null}}),t}},{key:"_encodeDeletePresentationModelCommand",value:function(e){(0,u.checkMethod)("Codec._encodeDeletePresentationModelCommand"),(0,u.checkParam)(e,"command"),(0,u.checkParam)(e.pmId,"command.pmId");var t={};return t[l.ID]=l.DELETE_PRESENTATION_MODEL_COMMAND_ID,t[l.PM_ID]=e.pmId,t}},{key:"_decodeDeletePresentationModelCommand",value:function(e){(0,u.checkMethod)("Codec._decodeDeletePresentationModelCommand"),(0,u.checkParam)(e,"jsonCommand"),(0,u.checkParam)(e[l.PM_ID],"jsonCommand[PM_ID]");var t=new y.default;return t.pmId=e[l.PM_ID],t}},{key:"_encodeDestroyContextCommand",value:function(e){(0,u.checkMethod)("Codec._encodeDestroyContextCommand"),(0,u.checkParam)(e,"command");var t={};return t[l.ID]=l.DESTROY_CONTEXT_COMMAND_ID,t}},{key:"_decodeDestroyContextCommand",value:function(e){return(0,u.checkMethod)("Codec._decodeDestroyContextCommand"),(0,u.checkParam)(e,"jsonCommand"),new _.default}},{key:"_encodeDestroyControllerCommand",value:function(e){(0,u.checkMethod)("Codec._encodeDestroyControllerCommand"),(0,u.checkParam)(e,"command"),(0,u.checkParam)(e.controllerId,"command.controllerId");var t={};return t[l.ID]=l.DESTROY_CONTROLLER_COMMAND_ID,t[l.CONTROLLER_ID]=e.controllerId,t}},{key:"_decodeDestroyControllerCommand",value:function(e){(0,u.checkMethod)("Codec._decodeDestroyControllerCommand"),(0,u.checkParam)(e,"jsonCommand"),(0,u.checkParam)(e[l.CONTROLLER_ID],"jsonCommand[CONTROLLER_ID]");var t=new g.default;return t.controllerId=e[l.CONTROLLER_ID],t}},{key:"_encodeInterruptLongPollCommand",value:function(e){(0,u.checkMethod)("Codec._encodeInterruptLongPollCommand"),(0,u.checkParam)(e,"command");var t={};return t[l.ID]=l.INTERRUPT_LONG_POLL_COMMAND_ID,t}},{key:"_decodeInterruptLongPollCommand",value:function(e){return(0,u.checkMethod)("Codec._decodeInterruptLongPollCommand"),(0,u.checkParam)(e,"jsonCommand"),new C.default}},{key:"_encodePresentationModelDeletedCommand",value:function(e){(0,u.checkMethod)("Codec._encodePresentationModelDeletedCommand"),(0,u.checkParam)(e,"command"),(0,u.checkParam)(e.pmId,"command.pmId");var t={};return t[l.ID]=l.PRESENTATION_MODEL_DELETED_COMMAND_ID,t[l.PM_ID]=e.pmId,t}},{key:"_decodePresentationModelDeletedCommand",value:function(e){(0,u.checkMethod)("Codec._decodePresentationModelDeletedCommand"),(0,u.checkParam)(e,"jsonCommand"),(0,u.checkParam)(e[l.PM_ID],"jsonCommand[PM_ID]");var t=new M.default;return t.pmId=e[l.PM_ID],t}},{key:"_encodeStartLongPollCommand",value:function(e){(0,u.checkMethod)("Codec._encodeStartLongPollCommand"),(0,u.checkParam)(e,"command");var t={};return t[l.ID]=l.START_LONG_POLL_COMMAND_ID,t}},{key:"_decodeStartLongPollCommand",value:function(e){return(0,u.checkMethod)("Codec._decodeStartLongPollCommand"),(0,u.checkParam)(e,"jsonCommand"),new E.default}},{key:"_encodeValueChangedCommand",value:function(e){(0,u.checkMethod)("Codec.encodeValueChangedCommand"),(0,u.checkParam)(e,"command"),(0,u.checkParam)(e.attributeId,"command.attributeId");var t={};return t[l.ID]=l.VALUE_CHANGED_COMMAND_ID,t[l.ATTRIBUTE_ID]=e.attributeId,(0,u.exists)(e.newValue)&&(t[l.VALUE]=e.newValue),t}},{key:"_decodeValueChangedCommand",value:function(e){(0,u.checkMethod)("Codec.decodeValueChangedCommand"),(0,u.checkParam)(e,"jsonCommand"),(0,u.checkParam)(e[l.ATTRIBUTE_ID],"jsonCommand[ATTRIBUTE_ID]");var t=new s.default;return t.attributeId=e[l.ATTRIBUTE_ID],(0,u.exists)(e[l.VALUE])?t.newValue=e[l.VALUE]:t.newValue=null,t}},{key:"encode",value:function(e){(0,u.checkMethod)("Codec.encode"),(0,u.checkParam)(e,"commands");var t=this;return(0,o.default)(e.map(function(e){if(e.id===l.ATTRIBUTE_METADATA_CHANGED_COMMAND_ID)return t._encodeAttributeMetadataChangedCommand(e);if(e.id===l.CALL_ACTION_COMMAND_ID)return t._encodeCallActionCommand(e);if(e.id===l.CHANGE_ATTRIBUTE_METADATA_COMMAND_ID)return t._encodeChangeAttributeMetadataCommand(e);if(e.id===l.CREATE_CONTEXT_COMMAND_ID)return t._encodeCreateContextCommand(e);if(e.id===l.CREATE_CONTROLLER_COMMAND_ID)return t._encodeCreateControllerCommand(e);if(e.id===l.CREATE_PRESENTATION_MODEL_COMMAND_ID)return t._encodeCreatePresentationModelCommand(e);if(e.id===l.DELETE_PRESENTATION_MODEL_COMMAND_ID)return t._encodeDeletePresentationModelCommand(e);if(e.id===l.DESTROY_CONTEXT_COMMAND_ID)return t._encodeDestroyContextCommand(e);if(e.id===l.DESTROY_CONTROLLER_COMMAND_ID)return t._encodeDestroyControllerCommand(e);if(e.id===l.INTERRUPT_LONG_POLL_COMMAND_ID)return t._encodeInterruptLongPollCommand(e);if(e.id===l.PRESENTATION_MODEL_DELETED_COMMAND_ID)return t._encodePresentationModelDeletedCommand(e);if(e.id===l.START_LONG_POLL_COMMAND_ID)return t._encodeStartLongPollCommand(e);if(e.id===l.VALUE_CHANGED_COMMAND_ID)return t._encodeValueChangedCommand(e);throw new k.default("Command of type "+e.id+" can not be handled")}))}},{key:"decode",value:function(e){if((0,u.checkMethod)("Codec.decode"),(0,u.checkParam)(e,"transmitted"),(void 0===e?"undefined":(0,r.default)(e))===c.JS_STRING_TYPE){var t=this;return JSON.parse(e).map(function(e){if(e.id===l.ATTRIBUTE_METADATA_CHANGED_COMMAND_ID)return t._decodeAttributeMetadataChangedCommand(e);if(e.id===l.CALL_ACTION_COMMAND_ID)return t._decodeCallActionCommand(e);if(e.id===l.CHANGE_ATTRIBUTE_METADATA_COMMAND_ID)return t._decodeChangeAttributeMetadataCommand(e);if(e.id===l.CREATE_CONTEXT_COMMAND_ID)return t._decodeCreateContextCommand(e);if(e.id===l.CREATE_CONTROLLER_COMMAND_ID)return t._decodeCreateControllerCommand(e);if(e.id===l.CREATE_PRESENTATION_MODEL_COMMAND_ID)return t._decodeCreatePresentationModelCommand(e);if(e.id===l.DELETE_PRESENTATION_MODEL_COMMAND_ID)return t._decodeDeletePresentationModelCommand(e);if(e.id===l.DESTROY_CONTEXT_COMMAND_ID)return t._decodeDestroyContextCommand(e);if(e.id===l.DESTROY_CONTROLLER_COMMAND_ID)return t._decodeDestroyControllerCommand(e);if(e.id===l.INTERRUPT_LONG_POLL_COMMAND_ID)return t._decodeInterruptLongPollCommand(e);if(e.id===l.PRESENTATION_MODEL_DELETED_COMMAND_ID)return t._decodePresentationModelDeletedCommand(e);if(e.id===l.START_LONG_POLL_COMMAND_ID)return t._decodeStartLongPollCommand(e);if(e.id===l.VALUE_CHANGED_COMMAND_ID)return t._decodeValueChangedCommand(e);throw new k.default("Command of type "+e.id+" can not be handled")})}throw new k.default("Can not decode data that is not of type string")}}]),e}();t.default=A},function(e,t,n){var r=n(65),o=n(48).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},function(e,t,n){var r=n(37),o=n(23),i=n(20),a=n(41),u=n(17),c=n(63),l=Object.getOwnPropertyDescriptor;t.f=n(12)?l:function(e,t){if(e=i(e),t=a(t,!0),c)try{return l(e,t)}catch(e){}if(u(e,t))return o(!r.f.call(e,t),e[t])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(0)),o=u(n(1)),i=n(5),a=n(2);function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(){(0,r.default)(this,e),this.id=i.VALUE_CHANGED_COMMAND_ID}return(0,o.default)(e,[{key:"init",value:function(e,t){(0,a.checkMethod)("ValueChangedCommand.init()"),(0,a.checkParam)(e,"attributeId"),this.attributeId=e,this.newValue=t}}]),e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(0)),o=u(n(1)),i=n(5),a=n(2);function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(){(0,r.default)(this,e),this.id=i.ATTRIBUTE_METADATA_CHANGED_COMMAND_ID}return(0,o.default)(e,[{key:"init",value:function(e,t,n){(0,a.checkMethod)("AttributeMetadataChangedCommand.init()"),(0,a.checkParam)(e,"attributeId"),(0,a.checkParam)(t,"metadataName"),this.attributeId=e,this.metadataName=t,this.value=n}}]),e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(0)),o=u(n(1)),i=n(5),a=n(2);function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(){(0,r.default)(this,e),this.id=i.CALL_ACTION_COMMAND_ID}return(0,o.default)(e,[{key:"init",value:function(e,t,n){(0,a.checkMethod)("CreateControllerCommand.init()"),(0,a.checkParam)(e,"controllerid"),(0,a.checkParam)(t,"actionName"),this.controllerid=e,this.actionName=t,this.params=n}}]),e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(0)),o=u(n(1)),i=n(5),a=n(2);function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(){(0,r.default)(this,e),this.id=i.CHANGE_ATTRIBUTE_METADATA_COMMAND_ID}return(0,o.default)(e,[{key:"init",value:function(e,t,n){(0,a.checkMethod)("ChangeAttributeMetadataCommand.init()"),(0,a.checkParam)(e,"attributeId"),(0,a.checkParam)(t,"metadataName"),this.attributeId=e,this.metadataName=t,this.value=n}}]),e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(0),i=(r=o)&&r.__esModule?r:{default:r},a=n(5);t.default=function e(){(0,i.default)(this,e),this.id=a.CREATE_CONTEXT_COMMAND_ID}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(0)),o=u(n(1)),i=n(5),a=n(2);function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(){(0,r.default)(this,e),this.id=i.CREATE_CONTROLLER_COMMAND_ID}return(0,o.default)(e,[{key:"init",value:function(e,t){(0,a.checkMethod)("CreateControllerCommand.init()"),(0,a.checkParam)(e,"controllerName"),this.controllerName=e,this.parentControllerId=t}}]),e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(0)),o=u(n(1)),i=n(5),a=n(2);function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(){(0,r.default)(this,e),this.id=i.CREATE_PRESENTATION_MODEL_COMMAND_ID}return(0,o.default)(e,[{key:"init",value:function(e){(0,a.checkMethod)("CreatePresentationModelCommand.init()"),(0,a.checkParam)(e,"presentationModel"),this.attributes=[],this.clientSideOnly=!1,this.pmId=e.id,this.pmType=e.presentationModelType;var t=this;e.getAttributes().forEach(function(e){t.attributes.push({propertyName:e.propertyName,id:e.id,value:e.getValue()})})}}]),e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(0)),o=u(n(1)),i=n(5),a=n(2);function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(){(0,r.default)(this,e),this.id=i.DELETE_PRESENTATION_MODEL_COMMAND_ID}return(0,o.default)(e,[{key:"init",value:function(e){(0,a.checkMethod)("DeletePresentationModelCommand.init()"),(0,a.checkParam)(e,"pmId"),this.pmId=e}}]),e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(0),i=(r=o)&&r.__esModule?r:{default:r},a=n(5);t.default=function e(){(0,i.default)(this,e),this.id=a.DESTROY_CONTEXT_COMMAND_ID}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(0)),o=u(n(1)),i=n(5),a=n(2);function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(){(0,r.default)(this,e),this.id=i.DESTROY_CONTROLLER_COMMAND_ID}return(0,o.default)(e,[{key:"init",value:function(e){(0,a.checkMethod)("DestroyControllerCommand.init()"),(0,a.checkParam)(e,"controllerId"),this.controllerId=e}}]),e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(0),i=(r=o)&&r.__esModule?r:{default:r},a=n(5);t.default=function e(){(0,i.default)(this,e),this.id=a.INTERRUPT_LONG_POLL_COMMAND_ID}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(0)),o=u(n(1)),i=n(5),a=n(2);function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(){(0,r.default)(this,e),this.id=i.PRESENTATION_MODEL_DELETED_COMMAND_ID}return(0,o.default)(e,[{key:"init",value:function(e){(0,a.checkMethod)("PresentationModelDeletedCommand.init()"),(0,a.checkParam)(e,"pmId"),this.pmId=e}}]),e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(0),i=(r=o)&&r.__esModule?r:{default:r},a=n(5);t.default=function e(){(0,i.default)(this,e),this.id=a.START_LONG_POLL_COMMAND_ID}},function(e,t,n){e.exports={default:n(185),__esModule:!0}},function(e,t,n){"use strict";t.__esModule=!0;var r,o=n(29),i=(r=o)&&r.__esModule?r:{default:r};t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,i.default)(t))&&"function"!=typeof t?e:t}},function(e,t,n){"use strict";t.__esModule=!0;var r=a(n(188)),o=a(n(192)),i=a(n(29));function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,i.default)(t)));e.prototype=(0,o.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),o=a(n(1)),i=a(n(60));function a(e){return e&&e.__esModule?e:{default:e}}var u=0,c=function(){function e(t,n){(0,r.default)(this,e),this.id=t,this.presentationModelType=n,this.attributes=[],this.clientSideOnly=!1,this.dirty=!1,this.id=void 0!==t&&null!=t?t:(u++).toString(),this.invalidBus=new i.default,this.dirtyValueChangeBus=new i.default}return(0,o.default)(e,[{key:"copy",value:function(){var t=new e(null,this.presentationModelType);return t.clientSideOnly=!0,this.getAttributes().forEach(function(e){var n=e.copy();t.addAttribute(n)}),t}},{key:"addAttributes",value:function(e){var t=this;!e||e.length<1||e.forEach(function(e){t.addAttribute(e)})}},{key:"addAttribute",value:function(e){var t=this;if(e&&!(this.attributes.indexOf(e)>-1)){if(this.findAttributeByPropertyName(e.propertyName))throw new Error("There already is an attribute with property name: "+e.propertyName+" in presentation model with id: "+this.id);if(e.getQualifier()&&this.findAttributeByQualifier(e.getQualifier()))throw new Error("There already is an attribute with qualifier: "+e.getQualifier()+" in presentation model with id: "+this.id);e.setPresentationModel(this),this.attributes.push(e),e.onValueChange(function(){t.invalidBus.trigger({source:t})})}}},{key:"onInvalidated",value:function(e){this.invalidBus.onEvent(e)}},{key:"getAttributes",value:function(){return this.attributes.slice(0)}},{key:"getAt",value:function(e){return this.findAttributeByPropertyName(e)}},{key:"findAllAttributesByPropertyName",value:function(e){var t=[];return e?(this.attributes.forEach(function(n){n.propertyName==e&&t.push(n)}),t):null}},{key:"findAttributeByPropertyName",value:function(e){if(!e)return null;for(var t=0;t<this.attributes.length;t++)if(this.attributes[t].propertyName==e)return this.attributes[t];return null}},{key:"findAttributeByQualifier",value:function(e){if(!e)return null;for(var t=0;t<this.attributes.length;t++)if(this.attributes[t].getQualifier()==e)return this.attributes[t];return null}},{key:"findAttributeById",value:function(e){if(!e)return null;for(var t=0;t<this.attributes.length;t++)if(this.attributes[t].id==e)return this.attributes[t];return null}},{key:"syncWith",value:function(e){this.attributes.forEach(function(t){var n=e.getAt(t.propertyName);n&&t.syncWith(n)})}}]),e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ACTION_CALL_BEAN=t.SOURCE_SYSTEM_SERVER=t.SOURCE_SYSTEM_CLIENT=t.SOURCE_SYSTEM=void 0;var r=l(n(28)),o=l(n(0)),i=l(n(1)),a=n(2),u=l(n(39)),c=n(38);function l(e){return e&&e.__esModule?e:{default:e}}var s="@@@ DOLPHIN_BEAN @@@",d="@@@ CONTROLLER_ACTION_CALL_BEAN @@@",f="@DP:LS@",h="@@@ SOURCE_SYSTEM @@@",v="server",p=function(){function e(t,n,i,u){(0,o.default)(this,e),(0,a.checkMethod)("Connector(url, dolphin, classRepository, config)"),(0,a.checkParam)(t,"url"),(0,a.checkParam)(n,"dolphin"),(0,a.checkParam)(i,"classRepository");var l=this;this.dolphin=n,this.config=u,this.classRepository=i,this.highlanderPMResolver=function(){},this.highlanderPMPromise=new r.default(function(e){l.highlanderPMResolver=e}),n.getClientModelStore().onModelStoreChange(function(e){var t=e.clientPresentationModel,n=t.findAttributeByPropertyName(h);(0,a.exists)(n)&&n.value===v&&(e.eventType===c.ADDED_TYPE?l.onModelAdded(t):e.eventType===c.REMOVED_TYPE&&l.onModelRemoved(t))})}return(0,i.default)(e,[{key:"connect",value:function(){this.dolphin.startPushListening(u.default.createStartLongPollCommand(),u.default.createInterruptLongPollCommand())}},{key:"onModelAdded",value:function(e){switch((0,a.checkMethod)("Connector.onModelAdded(model)"),(0,a.checkParam)(e,"model"),e.presentationModelType){case d:break;case s:this.classRepository.registerClass(e);break;case"@@@ HIGHLANDER_BEAN @@@":this.highlanderPMResolver(e);break;case f:this.classRepository.spliceListEntry(e),this.dolphin.deletePresentationModel(e);break;default:this.classRepository.load(e)}}},{key:"onModelRemoved",value:function(e){switch((0,a.checkMethod)("Connector.onModelRemoved(model)"),(0,a.checkParam)(e,"model"),e.presentationModelType){case s:this.classRepository.unregisterClass(e);break;case f:break;default:this.classRepository.unload(e)}}},{key:"invoke",value:function(e){(0,a.checkMethod)("Connector.invoke(command)"),(0,a.checkParam)(e,"command");var t=this.dolphin;return new r.default(function(n){t.send(e,{onFinished:function(){n()}})})}},{key:"getHighlanderPM",value:function(){return this.highlanderPMPromise}}]),e}();t.default=p,t.SOURCE_SYSTEM=h,t.SOURCE_SYSTEM_CLIENT="client",t.SOURCE_SYSTEM_SERVER=v,t.ACTION_CALL_BEAN=d},function(e,t){function n(e){if(e)return function(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}(e)}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},n.prototype.once=function(e,t){var n=this;function r(){n.off(e,r),t.apply(this,arguments)}return this._callbacks=this._callbacks||{},r.fn=t,this.on(e,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks[e];if(!r)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var o=0;o<r.length;o++)if((n=r[o])===t||n.fn===t){r.splice(o,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n)for(var r=0,o=(n=n.slice(0)).length;r<o;++r)n[r].apply(this,t);return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerServiceProvider=t.hasService=t.getService=t.LogLevel=t.LoggerFactory=void 0;var r=n(7),o=n(144),i=n(145),a=n(165),u=n(166),c=n(84);(0,i.register)(o.PlatformClient),(0,a.register)(o.PlatformClient),(0,u.register)(o.PlatformClient),o.PlatformClient.init();var l=o.PlatformClient.getService,s=o.PlatformClient.hasService,d=o.PlatformClient.registerServiceProvider;o.PlatformClient.LOGGER.info("Dolphin Platform Version:","1.0.0-CR.4"),t.LoggerFactory=r.LoggerFactory,t.LogLevel=r.LogLevel,t.getService=l,t.hasService=s,t.registerServiceProvider=d;var f=r.LoggerFactory.getLogger("Deprecated:"),h=!0;function v(){h&&(f.warn('Please do not use "dolphin" anymore, it may be removed in the next version! Use "platformClient" instead!'),h=!1)}window&&(window.dolphin={get ClientContextFactory(){return v(),c.ClientContextFactory},get createClientContext(){return v(),c.createClientContext},get LoggerFactory(){return v(),r.LoggerFactory},get LogLevel(){return v(),r.LogLevel}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggerFactory=void 0;var r=c(n(0)),o=c(n(1)),i=c(n(18)),a=n(2),u=n(139);function c(e){return e&&e.__esModule?e:{default:e}}var l=new u.Logger("ROOT"),s={loggers:new i.default},d=function(){function e(){(0,r.default)(this,e)}return(0,o.default)(e,null,[{key:"getLogger",value:function(e){if(!(0,a.exists)(e)||"ROOT"===e)return l;var t=s.loggers.get(e);if(t)return t;var n=new u.Logger(e,l);return s.loggers.set(e,n),n}}]),e}();t.LoggerFactory=d},function(e,t,n){n(110);var r=n(3).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){var r=n(4);r(r.S+r.F*!n(12),"Object",{defineProperty:n(9).f})},function(e,t,n){n(30),n(16),n(21),n(119),n(123),n(125),n(126),e.exports=n(3).Map},function(e,t,n){var r=n(42),o=n(43);e.exports=function(e){return function(t,n){var i,a,u=String(o(t)),c=r(n),l=u.length;return c<0||c>=l?e?"":void 0:(i=u.charCodeAt(c))<55296||i>56319||c+1===l||(a=u.charCodeAt(c+1))<56320||a>57343?e?u.charAt(c):i:e?u.slice(c,c+2):a-56320+(i-55296<<10)+65536}}},function(e,t,n){"use strict";var r=n(32),o=n(23),i=n(25),a={};n(14)(a,n(6)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:o(1,n)}),i(e,t+" Iterator")}},function(e,t,n){var r=n(9),o=n(11),i=n(33);e.exports=n(12)?Object.defineProperties:function(e,t){o(e);for(var n,a=i(t),u=a.length,c=0;u>c;)r.f(e,n=a[c++],t[n]);return e}},function(e,t,n){var r=n(20),o=n(34),i=n(116);e.exports=function(e){return function(t,n,a){var u,c=r(t),l=o(c.length),s=i(a,l);if(e&&n!=n){for(;l>s;)if((u=c[s++])!=u)return!0}else for(;l>s;s++)if((e||s in c)&&c[s]===n)return e||s||0;return!e&&-1}}},function(e,t,n){var r=n(42),o=Math.max,i=Math.min;e.exports=function(e,t){return(e=r(e))<0?o(e+t,0):i(e,t)}},function(e,t,n){"use strict";var r=n(118),o=n(68),i=n(19),a=n(20);e.exports=n(44)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):o(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t,n){"use strict";var r=n(69),o=n(53);e.exports=n(73)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=r.getEntry(o(this,"Map"),e);return t&&t.v},set:function(e,t){return r.def(o(this,"Map"),0===e?0:e,t)}},r,!0)},function(e,t,n){var r=n(13),o=n(45),i=n(26),a=n(34),u=n(121);e.exports=function(e,t){var n=1==e,c=2==e,l=3==e,s=4==e,d=6==e,f=5==e||d,h=t||u;return function(t,u,v){for(var p,m,y=i(t),_=o(y),g=r(u,v,3),C=a(_.length),M=0,E=n?h(t,C):c?h(t,0):void 0;C>M;M++)if((f||M in _)&&(m=g(p=_[M],M,y),e))if(n)E[M]=m;else if(m)switch(e){case 3:return!0;case 5:return p;case 6:return M;case 2:E.push(p)}else if(s)return!1;return d?-1:l||s?s:E}}},function(e,t,n){var r=n(122);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(10),o=n(74),i=n(6)("species");e.exports=function(e){var t;return o(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!o(t.prototype)||(t=void 0),r(t)&&null===(t=t[i])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){var r=n(4);r(r.P+r.R,"Map",{toJSON:n(75)("Map")})},function(e,t,n){var r=n(27);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},function(e,t,n){n(76)("Map")},function(e,t,n){n(77)("Map")},function(e,t,n){"use strict";t.__esModule=!0;var r,o=n(62),i=(r=o)&&r.__esModule?r:{default:r};t.default=function(e,t,n){return t in e?(0,i.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){e.exports={default:n(129),__esModule:!0}},function(e,t,n){n(130),e.exports=n(3).Object.assign},function(e,t,n){var r=n(4);r(r.S+r.F,"Object",{assign:n(131)})},function(e,t,n){"use strict";var r=n(33),o=n(54),i=n(37),a=n(26),u=n(45),c=Object.assign;e.exports=!c||n(15)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=r})?function(e,t){for(var n=a(e),c=arguments.length,l=1,s=o.f,d=i.f;c>l;)for(var f,h=u(arguments[l++]),v=s?r(h).concat(s(h)):r(h),p=v.length,m=0;p>m;)d.call(h,f=v[m++])&&(n[f]=h[f]);return n}:c},function(e,t,n){"use strict";t.__esModule=!0;var r=i(n(133)),o=i(n(136));function i(e){return e&&e.__esModule?e:{default:e}}t.default=function(){return function(e,t){if(Array.isArray(e))return e;if((0,r.default)(Object(e)))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var u,c=(0,o.default)(e);!(r=(u=c.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&c.return&&c.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(e,t,n){e.exports={default:n(134),__esModule:!0}},function(e,t,n){n(21),n(16),e.exports=n(135)},function(e,t,n){var r=n(36),o=n(6)("iterator"),i=n(19);e.exports=n(3).isIterable=function(e){var t=Object(e);return void 0!==t[o]||"@@iterator"in t||i.hasOwnProperty(r(t))}},function(e,t,n){e.exports={default:n(137),__esModule:!0}},function(e,t,n){n(21),n(16),e.exports=n(138)},function(e,t,n){var r=n(11),o=n(51);e.exports=n(3).getIterator=function(e){var t=o(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=void 0;var r=l(n(0)),o=l(n(1)),i=l(n(140)),a=l(n(78)),u=n(2),c=n(61);function l(e){return e&&e.__esModule?e:{default:e}}var s={pad:function(e,t){for(var n=""+e;n.length<t;)n="0"+n;return n},internalLog:function(){var e=(0,a.default)(arguments),t=e.shift(),n=e.shift(),r=e.shift(),o=new Date,u=o.getFullYear()+"-"+s.pad(o.getMonth()+1,2)+"-"+s.pad(o.getDate(),2)+" "+s.pad(o.getHours(),2)+":"+s.pad(o.getMinutes(),2)+":"+s.pad(o.getSeconds(),2)+"."+s.pad(o.getMilliseconds(),3);t.apply(void 0,[u,r.text,n].concat((0,i.default)(e)))},getCookie:function(e){if((0,u.exists)(window)&&(0,u.exists)(window.document)&&(0,u.exists)(window.document.cookie)){var t=("; "+window.document.cookie).split("; "+e+"=");if(2===t.length)return t.pop().split(";").shift()}}},d=function(){function e(t,n){switch((0,r.default)(this,e),this.context=t,this.rootLogger=n,s.getCookie("DOLPHIN_PLATFORM_LOGGER_"+this.context)){case"NONE":this.logLevel=c.LogLevel.NONE;break;case"ALL":this.logLevel=c.LogLevel.ALL;break;case"TRACE":this.logLevel=c.LogLevel.TRACE;break;case"DEBUG":this.logLevel=c.LogLevel.DEBUG;break;case"INFO":this.logLevel=c.LogLevel.INFO;break;case"WARN":this.logLevel=c.LogLevel.WARN;break;case"ERROR":this.logLevel=c.LogLevel.ERROR}}return(0,o.default)(e,[{key:"trace",value:function(){(0,u.exists)(console)&&this.isLogLevel(c.LogLevel.TRACE)&&s.internalLog.apply(s,[console.log,this.context,c.LogLevel.TRACE].concat(Array.prototype.slice.call(arguments)))}},{key:"debug",value:function(){(0,u.exists)(console)&&this.isLogLevel(c.LogLevel.DEBUG)&&s.internalLog.apply(s,[console.log,this.context,c.LogLevel.DEBUG].concat(Array.prototype.slice.call(arguments)))}},{key:"info",value:function(){(0,u.exists)(console)&&this.isLogLevel(c.LogLevel.INFO)&&s.internalLog.apply(s,[console.log,this.context,c.LogLevel.INFO].concat(Array.prototype.slice.call(arguments)))}},{key:"warn",value:function(){(0,u.exists)(console)&&this.isLogLevel(c.LogLevel.WARN)&&s.internalLog.apply(s,[console.warn,this.context,c.LogLevel.WARN].concat(Array.prototype.slice.call(arguments)))}},{key:"error",value:function(){(0,u.exists)(console)&&this.isLogLevel(c.LogLevel.ERROR)&&s.internalLog.apply(s,[console.error,this.context,c.LogLevel.ERROR].concat(Array.prototype.slice.call(arguments)))}},{key:"getLogLevel",value:function(){return(0,u.exists)(this.logLevel)?this.logLevel:(0,u.exists)(this.rootLogger)?this.rootLogger.getLogLevel():c.LogLevel.INFO}},{key:"setLogLevel",value:function(e){this.logLevel=e}},{key:"setLogLevelByName",value:function(e){(0,u.exists)(c.LogLevel[e])&&(this.logLevel=c.LogLevel[e])}},{key:"isLogLevel",value:function(e){return this.getLogLevel()!==c.LogLevel.NONE&&(this.getLogLevel()===c.LogLevel.ALL||(this.getLogLevel()===c.LogLevel.TRACE||(this.getLogLevel()===c.LogLevel.DEBUG&&e!==c.LogLevel.TRACE||(this.getLogLevel()===c.LogLevel.INFO&&e!==c.LogLevel.TRACE&&e!==c.LogLevel.DEBUG||(this.getLogLevel()===c.LogLevel.WARN&&e!==c.LogLevel.TRACE&&e!==c.LogLevel.DEBUG&&e!==c.LogLevel.INFO||this.getLogLevel()===c.LogLevel.ERROR&&e!==c.LogLevel.TRACE&&e!==c.LogLevel.DEBUG&&e!==c.LogLevel.INFO&&e!==c.LogLevel.WARN)))))}},{key:"isLogLevelUseable",value:function(e){return(0,u.checkParam)(e,"level"),!!e.level&&this.getLogLevel().level>=e.level}}]),e}();t.Logger=d},function(e,t,n){"use strict";t.__esModule=!0;var r,o=n(78),i=(r=o)&&r.__esModule?r:{default:r};t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,i.default)(e)}},function(e,t,n){n(16),n(142),e.exports=n(3).Array.from},function(e,t,n){"use strict";var r=n(13),o=n(4),i=n(26),a=n(70),u=n(71),c=n(34),l=n(143),s=n(51);o(o.S+o.F*!n(79)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,o,d,f=i(e),h="function"==typeof this?this:Array,v=arguments.length,p=v>1?arguments[1]:void 0,m=void 0!==p,y=0,_=s(f);if(m&&(p=r(p,v>2?arguments[2]:void 0,2)),void 0==_||h==Array&&u(_))for(n=new h(t=c(f.length));t>y;y++)l(n,y,m?p(f[y],y):f[y]);else for(d=_.call(f),n=new h;!(o=d.next()).done;y++)l(n,y,m?a(d,p,[o.value,y],!0):o.value);return n.length=y,n}})},function(e,t,n){"use strict";var r=n(9),o=n(23);e.exports=function(e,t,n){t in e?r.f(e,t,o(0,n)):e[t]=n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlatformClient=void 0;var r=u(n(18)),o=u(n(0)),i=n(2),a=n(7);function u(e){return e&&e.__esModule?e:{default:e}}var c=function e(){(0,o.default)(this,e)};c.LOGGER=a.LoggerFactory.getLogger("PlatformClient"),c.services=new r.default,c.serviceProviders=new r.default,c.configuration={},c.getService=function(e){var t=c.services.get(e);if(!(0,i.exists)(t)){var n=c.serviceProviders.get(e);if(!(0,i.exists)(n))throw new Error("No service provider found for "+e);t=n.getService(c.configuration),c.services.set(e,t)}return t},c.hasService=function(e){var t=c.serviceProviders.get(e);return!!(0,i.exists)(t)},c.getAllServiceTypes=function(){var e=[];return c.serviceProviders.forEach(function(t){return e.push(t)}),e},c.registerServiceProvider=function(e){if(null===e||void 0===e)throw c.LOGGER.error("Cannot register service provider"),new Error("Cannot register service provider");if("function"!=typeof e.getName||"function"!=typeof e.getService)throw c.LOGGER.error("Cannot register service provider without getName() and getService() methods"),new Error("Cannot register service provider without getName() and getService() methods");if(c.serviceProviders.get(e.getName()))throw c.LOGGER.error("Cannot register another service provider. Name already in use.",e.getName()),new Error("Cannot register another service provider. Name already in use.");c.serviceProviders.set(e.getName(),e),c.LOGGER.debug("Service provider registered with name",e.getName())},c.init=function(){c.serviceProviders.forEach(function(e){var t=e.getService();"function"==typeof t.initServiceProvider&&t.initServiceProvider(c)})},t.PlatformClient=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;var r=n(146),o=n(159),i=n(57),a=n(2);t.register=function(e){if((0,a.exists)(e)){var t=new i.ServiceProvider(r.HttpClient,"HttpClient"),n=new i.ServiceProvider(o.HttpClientInterceptor,"HttpClientInterceptor");e.registerServiceProvider(t),e.registerServiceProvider(n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HttpClient=void 0;var r=u(n(0)),o=u(n(1)),i=n(147),a=n(158);function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(){(0,r.default)(this,e)}return(0,o.default)(e,[{key:"request",value:function(e,t){var n={url:e,method:t};return this.requestBuilder=new i.RequestBuilder(n),this.requestBuilder}},{key:"get",value:function(e){return this.request(e,a.HTTP_GET)}},{key:"post",value:function(e){return this.request(e,a.HTTP_POST)}},{key:"put",value:function(e){return this.request(e,a.HTTP_PUT)}},{key:"delete",value:function(e){return this.request(e,a.HTTP_DELETE)}}]),e}();t.HttpClient=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RequestBuilder=void 0;var r=u(n(0)),o=u(n(1)),i=n(148),a=n(2);function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(t){(0,r.default)(this,e),this.configuration=t,this.reponseBuilder=new i.ResponseBuilder(t)}return(0,o.default)(e,[{key:"withHeader",value:function(e,t){return this.configuration.headers||(this.configuration.headers=[]),this.configuration.headers.push({name:e,value:t}),this}},{key:"withHeadersInfo",value:function(e){if((0,a.exists)(e)){this.configuration.headers||(this.configuration.headers=[]);for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];this.configuration.headers.push({name:t,value:n})}}return this}},{key:"withContent",value:function(e){return this.configuration.requestBody=e,this.reponseBuilder}},{key:"withoutContent",value:function(){return this.reponseBuilder}}]),e}();t.RequestBuilder=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResponseBuilder=void 0;var r=a(n(0)),o=a(n(1)),i=n(149);function a(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(t){(0,r.default)(this,e),this.configuration=t,this.executor=new i.Executor(t)}return(0,o.default)(e,[{key:"readBytes",value:function(){return this.configuration.responseType="arraybuffer",this.executor}},{key:"readString",value:function(){return this.configuration.responseType="text",this.executor}},{key:"readObject",value:function(){return this.configuration.responseType="json",this.executor}},{key:"withoutResult",value:function(){return this.executor}}]),e}();t.ResponseBuilder=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Executor=void 0;var r=l(n(28)),o=l(n(0)),i=l(n(1)),a=n(7),u=n(156),c=n(157);function l(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(t){(0,o.default)(this,e),this.configuration=t}return(0,i.default)(e,[{key:"execute",value:function(t){var n=this;return new r.default(function(r,o){var i=n,a=new XMLHttpRequest;if(a.open(n.configuration.method,n.configuration.url,!0),a.url=n.configuration.url,a.method=n.configuration.method,a.withCredentials=!0,window.platformClient)for(var l=window.platformClient.getService("HttpClientInterceptor").getRequestInterceptors(),s=0;s<l.length;s++){l[s].handleRequest(a)}if(n.configuration.headers&&n.configuration.headers.length>0)for(var d=0;d<n.configuration.headers.length;d++){var f=n.configuration.headers[d];a.setRequestHeader(f.name,f.value)}a.timeout=t||0,n.configuration.responseType&&(a.responseType=n.configuration.responseType),a.ontimeout=function(){var e=this.statusText||"Timeout occurred",t=new c.HttpException(e,this.status,!0);o(t)},a.onerror=function(){var e=this.statusText||"Unspecified error occured",t=new c.HttpException(e,this.status);o(t)},a.onreadystatechange=function(){if(4===this.readyState&&e.LOGGER.trace("Request to ",i.configuration.url,"finished with",this.status),4===this.readyState&&this.status>=200&&this.status<300){var t=new u.HttpResponse(this.status,this.response,this.getAllResponseHeaders());if(window.platformClient)for(var n=window.platformClient.getService("HttpClientInterceptor").getResponseInterceptors(),l=0;l<n.length;l++){n[l].handleResponse(a)}r(t)}else if(4===this.readyState&&this.status>=300){var s=new c.HttpException(this.statusText,this.status);o(s)}},a.send(n.configuration.requestBody)})}}]),e}();s.LOGGER=a.LoggerFactory.getLogger("Executor"),t.Executor=s},function(e,t,n){n(30),n(16),n(21),n(151),n(154),n(155),e.exports=n(3).Promise},function(e,t,n){"use strict";var r,o,i,a,u=n(31),c=n(8),l=n(13),s=n(36),d=n(4),f=n(10),h=n(22),v=n(50),p=n(27),m=n(80),y=n(81).set,_=n(153)(),g=n(55),C=n(82),M=n(83),E="Promise",k=c.TypeError,P=c.process,A=c[E],L="process"==s(P),O=function(){},T=o=g.f,b=!!function(){try{var e=A.resolve(1),t=(e.constructor={})[n(6)("species")]=function(e){e(O,O)};return(L||"function"==typeof PromiseRejectionEvent)&&e.then(O)instanceof t}catch(e){}}(),D=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},w=function(e,t){if(!e._n){e._n=!0;var n=e._c;_(function(){for(var r=e._v,o=1==e._s,i=0,a=function(t){var n,i,a=o?t.ok:t.fail,u=t.resolve,c=t.reject,l=t.domain;try{a?(o||(2==e._h&&R(e),e._h=1),!0===a?n=r:(l&&l.enter(),n=a(r),l&&l.exit()),n===t.promise?c(k("Promise-chain cycle")):(i=D(n))?i.call(n,u,c):u(n)):c(r)}catch(e){c(e)}};n.length>i;)a(n[i++]);e._c=[],e._n=!1,t&&!e._h&&I(e)})}},I=function(e){y.call(c,function(){var t,n,r,o=e._v,i=N(e);if(i&&(t=C(function(){L?P.emit("unhandledRejection",o,e):(n=c.onunhandledrejection)?n({promise:e,reason:o}):(r=c.console)&&r.error&&r.error("Unhandled promise rejection",o)}),e._h=L||N(e)?2:1),e._a=void 0,i&&t.e)throw t.v})},N=function(e){return 1!==e._h&&0===(e._a||e._c).length},R=function(e){y.call(c,function(){var t;L?P.emit("rejectionHandled",e):(t=c.onrejectionhandled)&&t({promise:e,reason:e._v})})},x=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),w(t,!0))},S=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw k("Promise can't be resolved itself");(t=D(e))?_(function(){var r={_w:n,_d:!1};try{t.call(e,l(S,r,1),l(x,r,1))}catch(e){x.call(r,e)}}):(n._v=e,n._s=1,w(n,!1))}catch(e){x.call({_w:n,_d:!1},e)}}};b||(A=function(e){v(this,A,E,"_h"),h(e),r.call(this);try{e(l(S,this,1),l(x,this,1))}catch(e){x.call(this,e)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(49)(A.prototype,{then:function(e,t){var n=T(m(this,A));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=L?P.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&w(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new r;this.promise=e,this.resolve=l(S,e,1),this.reject=l(x,e,1)},g.f=T=function(e){return e===A||e===a?new i(e):o(e)}),d(d.G+d.W+d.F*!b,{Promise:A}),n(25)(A,E),n(72)(E),a=n(3)[E],d(d.S+d.F*!b,E,{reject:function(e){var t=T(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(u||!b),E,{resolve:function(e){return M(u&&this===a?A:this,e)}}),d(d.S+d.F*!(b&&n(79)(function(e){A.all(e).catch(O)})),E,{all:function(e){var t=this,n=T(t),r=n.resolve,o=n.reject,i=C(function(){var n=[],i=0,a=1;p(e,!1,function(e){var u=i++,c=!1;n.push(void 0),a++,t.resolve(e).then(function(e){c||(c=!0,n[u]=e,--a||r(n))},o)}),--a||r(n)});return i.e&&o(i.v),n.promise},race:function(e){var t=this,n=T(t),r=n.reject,o=C(function(){p(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return o.e&&r(o.v),n.promise}})},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(8),o=n(81).set,i=r.MutationObserver||r.WebKitMutationObserver,a=r.process,u=r.Promise,c="process"==n(24)(a);e.exports=function(){var e,t,n,l=function(){var r,o;for(c&&(r=a.domain)&&r.exit();e;){o=e.fn,e=e.next;try{o()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(c)n=function(){a.nextTick(l)};else if(!i||r.navigator&&r.navigator.standalone)if(u&&u.resolve){var s=u.resolve();n=function(){s.then(l)}}else n=function(){o.call(r,l)};else{var d=!0,f=document.createTextNode("");new i(l).observe(f,{characterData:!0}),n=function(){f.data=d=!d}}return function(r){var o={fn:r,next:void 0};t&&(t.next=o),e||(e=o,n()),t=o}}},function(e,t,n){"use strict";var r=n(4),o=n(3),i=n(8),a=n(80),u=n(83);r(r.P+r.R,"Promise",{finally:function(e){var t=a(this,o.Promise||i.Promise),n="function"==typeof e;return this.then(n?function(n){return u(t,e()).then(function(){return n})}:e,n?function(n){return u(t,e()).then(function(){throw n})}:e)}})},function(e,t,n){"use strict";var r=n(4),o=n(55),i=n(82);r(r.S,"Promise",{try:function(e){var t=o.f(this),n=i(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HttpResponse=void 0;var r=a(n(0)),o=a(n(1)),i=n(2);function a(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(t,n,o){if((0,r.default)(this,e),this.status=t,this.content=n,this.headers={},(0,i.exists)(o)&&"string"==typeof o)for(var a=o.trim().split(/[\r\n]+/),u=0;u<a.length;u++){var c=a[u].split(": ");if(2===c.length){var l=c.shift(),s=c.join(": ");this.headers[l]=s}}}return(0,o.default)(e,[{key:"getContent",value:function(){return this.content}},{key:"getStatus",value:function(){return this.status}},{key:"getHeaders",value:function(){return this.headers}},{key:"getHeaderByName",value:function(e){return this.headers[e]}}]),e}();t.HttpResponse=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HttpException=void 0;var r=i(n(0)),o=i(n(1));function i(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(t,n,o){(0,r.default)(this,e),this.message=t,this.status=n||0,this.timedout=o||!1}return(0,o.default)(e,[{key:"getMessage",value:function(){return this.message}},{key:"getStatus",value:function(){return this.status}},{key:"isTimedout",value:function(){return this.timedout}}]),e}();t.HttpException=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.HTTP_GET="GET",t.HTTP_POST="POST",t.HTTP_PUT="PUT",t.HTTP_DELETE="DELETE"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HttpClientInterceptor=void 0;var r=a(n(56)),o=a(n(0)),i=a(n(1));function a(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(){(0,o.default)(this,e),this.requestHandlers=new r.default,this.responseHandlers=new r.default}return(0,i.default)(e,[{key:"addRequestInterceptor",value:function(e){this.requestHandlers.add(e)}},{key:"getRequestInterceptors",value:function(){var e=[];return this.requestHandlers.forEach(function(t){return e.push(t)}),e}},{key:"addResponseInterceptor",value:function(e){this.responseHandlers.add(e)}},{key:"getResponseInterceptors",value:function(){var e=[];return this.responseHandlers.forEach(function(t){return e.push(t)}),e}}]),e}();t.HttpClientInterceptor=u},function(e,t,n){n(30),n(16),n(21),n(161),n(162),n(163),n(164),e.exports=n(3).Set},function(e,t,n){"use strict";var r=n(69),o=n(53);e.exports=n(73)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(o(this,"Set"),e=0===e?0:e,e)}},r)},function(e,t,n){var r=n(4);r(r.P+r.R,"Set",{toJSON:n(75)("Set")})},function(e,t,n){n(76)("Set")},function(e,t,n){n(77)("Set")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;var r=l(n(18)),o=l(n(0)),i=l(n(1)),a=n(57),u=n(2),c=n(7);function l(e){return e&&e.__esModule?e:{default:e}}var s="dolphin_platform_intern_dolphinClientId",d=function(){function e(){(0,o.default)(this,e),this.clientIds=new r.default}return(0,i.default)(e,[{key:"handleRequest",value:function(t){var n=this.getClientId(t.url);(0,u.exists)(n)&&(e.LOGGER.trace("Using ClientId",n),t.setRequestHeader(s,n))}},{key:"handleResponse",value:function(t){var n=this.getClientId(t.url),r=t.getResponseHeader(s);if((0,u.exists)(n)&&(0,u.exists)(r)&&n!==r)throw new Error("Client Id does not match!");!(0,u.exists)(n)&&(0,u.exists)(r)&&(e.LOGGER.debug("New ClientId found",r),this.setClientId(t.url,r))}},{key:"initServiceProvider",value:function(e){e.getService("HttpClientInterceptor").addRequestInterceptor(this),e.getService("HttpClientInterceptor").addResponseInterceptor(this)}},{key:"getClientId",value:function(t){var n=(0,u.parseUrl)(t),r=e.calcKey(n.hostname,n.port);return this.clientIds.get(r)}},{key:"setClientId",value:function(t,n){var r=(0,u.parseUrl)(t),o=e.calcKey(r.hostname,r.port);this.clientIds.set(o,n),e.LOGGER.trace("Setting ClientId",n,"for",t,"with key",o)}}]),e}();d.calcKey=function(e,t){return e+t},d.LOGGER=c.LoggerFactory.getLogger("ClientScope"),t.register=function(e){if((0,u.exists)(e)){var t=new a.ServiceProvider(d,"ClientScope");e.registerServiceProvider(t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;var r=n(84),o=n(57),i=n(2);t.register=function(e){if((0,i.exists)(e)){var t=new o.ServiceProvider(r.ClientContextFactory,"ClientContextFactory");e.registerServiceProvider(t)}}},function(e,t,n){e.exports={default:n(168),__esModule:!0}},function(e,t,n){n(169),e.exports=9007199254740991},function(e,t,n){var r=n(4);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dolphinBuilder=void 0;var r=s(n(0)),o=s(n(1)),i=s(n(171)),a=s(n(195)),u=s(n(197)),c=s(n(199)),l=n(7);function s(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(){(0,r.default)(this,e),this.slackMS=300,this.maxBatchSize=50,this.transmitter=null}return(0,o.default)(e,[{key:"withSlackMS",value:function(e){return this.slackMS=e,this}},{key:"withMaxBatchSize",value:function(e){return this.maxBatchSize=e,this}},{key:"withTransmitter",value:function(e){return this.transmitter=e,this}},{key:"build",value:function(){var t=new a.default,n=void 0;return n=this.transmitter?this.transmitter:new c.default,t.setClientConnector(new i.default(n,t,this.slackMS,this.maxBatchSize)),t.setClientModelStore(new u.default(t)),e.LOGGER.debug("ClientDolphin initialized",t,n),t}}]),e}();d.LOGGER=l.LoggerFactory.getLogger("DolphinBuilder");var f=new d;t.dolphinBuilder=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(0)),o=l(n(1)),i=l(n(172)),a=l(n(85)),u=l(n(104)),c=n(7);function l(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:50;(0,r.default)(this,e),this.commandQueue=[],this.currentlySending=!1,this.pushEnabled=!1,this.waiting=!1,this.transmitter=t,this.clientDolphin=n,this.slackMS=o,this.codec=new a.default,this.commandBatcher=new i.default(!0,u)}return(0,o.default)(e,[{key:"setCommandBatcher",value:function(e){this.commandBatcher=e}},{key:"setPushEnabled",value:function(e){this.pushEnabled=e}},{key:"setPushListener",value:function(e){this.pushListener=e}},{key:"setReleaseCommand",value:function(e){this.releaseCommand=e}},{key:"send",value:function(e,t){this.commandQueue.push({command:e,handler:t}),this.currentlySending?this.release():this.doSendNext()}},{key:"doSendNext",value:function(){var e=this;if(this.commandQueue.length<1){if(!this.pushEnabled)return void(this.currentlySending=!1);this.enqueuePushCommand()}this.currentlySending=!0;var t=this.commandBatcher.batch(this.commandQueue);if(t.length>0){var n=t[t.length-1].handler,r=t.map(function(e){return e.command});this.transmitter.transmit(r,function(t){var r=[];t.forEach(function(t){var n=e.handle(t);n&&r.push(n)}),n&&n.onFinished(r),setTimeout(function(){return e.doSendNext()},e.slackMS)})}else setTimeout(function(){return e.doSendNext()},this.slackMS)}},{key:"handle",value:function(t){return"DeletePresentationModel"===t.id?this.handleDeletePresentationModelCommand(t):"CreatePresentationModel"===t.id?this.handleCreatePresentationModelCommand(t):"ValueChanged"===t.id?this.handleValueChangedCommand(t):"AttributeMetadataChanged"===t.id?this.handleAttributeMetadataChangedCommand(t):(e.LOGGER.error("Cannot handle, unknown command "+t),null)}},{key:"handleDeletePresentationModelCommand",value:function(e){var t=this.clientDolphin.findPresentationModelById(e.pmId);return t?(this.clientDolphin.getClientModelStore().deletePresentationModel(t,!0),t):null}},{key:"handleCreatePresentationModelCommand",value:function(e){var t=this;if(this.clientDolphin.getClientModelStore().containsPresentationModel(e.pmId))throw new Error("There already is a presentation model with id "+e.pmId+"  known to the client.");var n=[];e.attributes.forEach(function(e){var r=t.clientDolphin.attribute(e.propertyName,e.qualifier,e.value);e.id&&e.id.match(".*S$")&&(r.id=e.id),n.push(r)});var r=new u.default(e.pmId,e.pmType);return r.addAttributes(n),e.clientSideOnly&&(r.clientSideOnly=!0),this.clientDolphin.getClientModelStore().add(r,!1),this.clientDolphin.updatePresentationModelQualifier(r),r}},{key:"handleValueChangedCommand",value:function(t){var n=this.clientDolphin.getClientModelStore().findAttributeById(t.attributeId);return n?n.getValue()===t.newValue?null:(n.setValueFromServer(t.newValue),null):(e.LOGGER.error("attribute with id "+t.attributeId+" not found, cannot update to new value "+t.newValue),null)}},{key:"handleAttributeMetadataChangedCommand",value:function(e){var t=this.clientDolphin.getClientModelStore().findAttributeById(e.attributeId);return t?(t[e.metadataName]=e.value,null):null}},{key:"listen",value:function(){this.pushEnabled&&(this.waiting||this.currentlySending||this.doSendNext())}},{key:"enqueuePushCommand",value:function(){var e=this;this.waiting=!0,this.commandQueue.push({command:this.pushListener,handler:{onFinished:function(){e.waiting=!1},onFinishedData:null}})}},{key:"release",value:function(){this.waiting&&(this.waiting=!1,this.transmitter.signal(this.releaseCommand))}}]),e}();t.default=s,s.LOGGER=c.LoggerFactory.getLogger("ClientConnector")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),o=a(n(1)),i=n(5);function a(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;(0,r.default)(this,e),this.folding=t,this.maxBatchSize=n}return(0,o.default)(e,[{key:"batch",value:function(e){for(var t=[],n=0;e[n]&&n<=this.maxBatchSize;){var r=e[n];if(n++,this.folding?r.command.id==i.VALUE_CHANGED_COMMAND_ID&&t.length>0&&t[t.length-1].command.id==i.VALUE_CHANGED_COMMAND_ID&&r.command.attributeId==t[t.length-1].command.attributeId?t[t.length-1].command.newValue=r.command.newValue:r.command.id==i.PRESENTATION_MODEL_DELETED_COMMAND_ID||t.push(r):t.push(r),r.handler)break}return e.splice(0,n),t}}]),e}();t.default=u},function(e,t,n){e.exports={default:n(174),__esModule:!0}},function(e,t,n){n(16),n(21),e.exports=n(58).f("iterator")},function(e,t,n){e.exports={default:n(176),__esModule:!0}},function(e,t,n){n(177),n(30),n(180),n(181),e.exports=n(3).Symbol},function(e,t,n){"use strict";var r=n(8),o=n(17),i=n(12),a=n(4),u=n(64),c=n(52).KEY,l=n(15),s=n(47),d=n(25),f=n(35),h=n(6),v=n(58),p=n(59),m=n(178),y=n(74),_=n(11),g=n(10),C=n(20),M=n(41),E=n(23),k=n(32),P=n(179),A=n(87),L=n(9),O=n(33),T=A.f,b=L.f,D=P.f,w=r.Symbol,I=r.JSON,N=I&&I.stringify,R="prototype",x=h("_hidden"),S=h("toPrimitive"),B={}.propertyIsEnumerable,H=s("symbol-registry"),j=s("symbols"),G=s("op-symbols"),U=Object[R],V="function"==typeof w,F=r.QObject,Q=!F||!F[R]||!F[R].findChild,Y=i&&l(function(){return 7!=k(b({},"a",{get:function(){return b(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=T(U,t);r&&delete U[t],b(e,t,n),r&&e!==U&&b(U,t,r)}:b,q=function(e){var t=j[e]=k(w[R]);return t._k=e,t},W=V&&"symbol"==typeof w.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof w},z=function(e,t,n){return e===U&&z(G,t,n),_(e),t=M(t,!0),_(n),o(j,t)?(n.enumerable?(o(e,x)&&e[x][t]&&(e[x][t]=!1),n=k(n,{enumerable:E(0,!1)})):(o(e,x)||b(e,x,E(1,{})),e[x][t]=!0),Y(e,t,n)):b(e,t,n)},J=function(e,t){_(e);for(var n,r=m(t=C(t)),o=0,i=r.length;i>o;)z(e,n=r[o++],t[n]);return e},X=function(e){var t=B.call(this,e=M(e,!0));return!(this===U&&o(j,e)&&!o(G,e))&&(!(t||!o(this,e)||!o(j,e)||o(this,x)&&this[x][e])||t)},K=function(e,t){if(e=C(e),t=M(t,!0),e!==U||!o(j,t)||o(G,t)){var n=T(e,t);return!n||!o(j,t)||o(e,x)&&e[x][t]||(n.enumerable=!0),n}},Z=function(e){for(var t,n=D(C(e)),r=[],i=0;n.length>i;)o(j,t=n[i++])||t==x||t==c||r.push(t);return r},$=function(e){for(var t,n=e===U,r=D(n?G:C(e)),i=[],a=0;r.length>a;)!o(j,t=r[a++])||n&&!o(U,t)||i.push(j[t]);return i};V||(u((w=function(){if(this instanceof w)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function(n){this===U&&t.call(G,n),o(this,x)&&o(this[x],e)&&(this[x][e]=!1),Y(this,e,E(1,n))};return i&&Q&&Y(U,e,{configurable:!0,set:t}),q(e)})[R],"toString",function(){return this._k}),A.f=K,L.f=z,n(86).f=P.f=Z,n(37).f=X,n(54).f=$,i&&!n(31)&&u(U,"propertyIsEnumerable",X,!0),v.f=function(e){return q(h(e))}),a(a.G+a.W+a.F*!V,{Symbol:w});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;)h(ee[te++]);for(var ne=O(h.store),re=0;ne.length>re;)p(ne[re++]);a(a.S+a.F*!V,"Symbol",{for:function(e){return o(H,e+="")?H[e]:H[e]=w(e)},keyFor:function(e){if(!W(e))throw TypeError(e+" is not a symbol!");for(var t in H)if(H[t]===e)return t},useSetter:function(){Q=!0},useSimple:function(){Q=!1}}),a(a.S+a.F*!V,"Object",{create:function(e,t){return void 0===t?k(e):J(k(e),t)},defineProperty:z,defineProperties:J,getOwnPropertyDescriptor:K,getOwnPropertyNames:Z,getOwnPropertySymbols:$}),I&&a(a.S+a.F*(!V||l(function(){var e=w();return"[null]"!=N([e])||"{}"!=N({a:e})||"{}"!=N(Object(e))})),"JSON",{stringify:function(e){for(var t,n,r=[e],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=t=r[1],(g(t)||void 0!==e)&&!W(e))return y(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!W(t))return t}),r[1]=t,N.apply(I,r)}}),w[R][S]||n(14)(w[R],S,w[R].valueOf),d(w,"Symbol"),d(Math,"Math",!0),d(r.JSON,"JSON",!0)},function(e,t,n){var r=n(33),o=n(54),i=n(37);e.exports=function(e){var t=r(e),n=o.f;if(n)for(var a,u=n(e),c=i.f,l=0;u.length>l;)c.call(e,a=u[l++])&&t.push(a);return t}},function(e,t,n){var r=n(20),o=n(86).f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==i.call(e)?function(e){try{return o(e)}catch(e){return a.slice()}}(e):o(r(e))}},function(e,t,n){n(59)("asyncIterator")},function(e,t,n){n(59)("observable")},function(e,t,n){e.exports={default:n(183),__esModule:!0}},function(e,t,n){var r=n(3),o=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(101)),o=u(n(0)),i=u(n(102)),a=u(n(103));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e))}return(0,a.default)(t,e),t}(Error);t.default=c},function(e,t,n){n(186),e.exports=n(3).Object.getPrototypeOf},function(e,t,n){var r=n(26),o=n(67);n(187)("getPrototypeOf",function(){return function(e){return o(r(e))}})},function(e,t,n){var r=n(4),o=n(3),i=n(15);e.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*i(function(){n(1)}),"Object",a)}},function(e,t,n){e.exports={default:n(189),__esModule:!0}},function(e,t,n){n(190),e.exports=n(3).Object.setPrototypeOf},function(e,t,n){var r=n(4);r(r.S,"Object",{setPrototypeOf:n(191).set})},function(e,t,n){var r=n(10),o=n(11),i=function(e,t){if(o(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n(13)(Function.call,n(87).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return i(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:i}},function(e,t,n){e.exports={default:n(193),__esModule:!0}},function(e,t,n){n(194);var r=n(3).Object;e.exports=function(e,t){return r.create(e,t)}},function(e,t,n){var r=n(4);r(r.S,"Object",{create:n(32)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(0)),o=u(n(1)),i=u(n(196)),a=u(n(104));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(){(0,r.default)(this,e)}return(0,o.default)(e,[{key:"setClientConnector",value:function(e){this.clientConnector=e}},{key:"getClientConnector",value:function(){return this.clientConnector}},{key:"send",value:function(e,t){this.clientConnector.send(e,t)}},{key:"attribute",value:function(e,t,n){return new i.default(e,t,n)}},{key:"presentationModel",value:function(e,t){for(var n=new a.default(e,t),r=arguments.length,o=Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];return o&&o.length>0&&o.forEach(function(e){n.addAttribute(e)}),this.getClientModelStore().add(n,!0),n}},{key:"setClientModelStore",value:function(e){this.clientModelStore=e}},{key:"getClientModelStore",value:function(){return this.clientModelStore}},{key:"listPresentationModelIds",value:function(){return this.getClientModelStore().listPresentationModelIds()}},{key:"listPresentationModels",value:function(){return this.getClientModelStore().listPresentationModels()}},{key:"findAllPresentationModelByType",value:function(e){return this.getClientModelStore().findAllPresentationModelByType(e)}},{key:"getAt",value:function(e){return this.findPresentationModelById(e)}},{key:"findPresentationModelById",value:function(e){return this.getClientModelStore().findPresentationModelById(e)}},{key:"deletePresentationModel",value:function(e){this.getClientModelStore().deletePresentationModel(e,!0)}},{key:"updatePresentationModelQualifier",value:function(e){var t=this;e.getAttributes().forEach(function(e){t.updateAttributeQualifier(e)})}},{key:"updateAttributeQualifier",value:function(e){e.getQualifier()&&this.getClientModelStore().findAllAttributesByQualifier(e.getQualifier()).forEach(function(t){t.setValue(e.getValue())})}},{key:"startPushListening",value:function(e,t){var n=this;this.clientConnector.setPushListener(e),this.clientConnector.setReleaseCommand(t),this.clientConnector.setPushEnabled(!0),setTimeout(function(){n.clientConnector.listen()},0)}},{key:"stopPushListening",value:function(){this.clientConnector.setPushEnabled(!1)}}]),e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(29)),o=c(n(0)),i=c(n(1)),a=c(n(60)),u=n(7);function c(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(t,n,r){(0,o.default)(this,e),this.propertyName=t,this.id=e.clientAttributeInstanceCount+++"C",this.valueChangeBus=new a.default,this.qualifierChangeBus=new a.default,this.setValue(r),this.setQualifier(n)}return(0,i.default)(e,[{key:"copy",value:function(){return new e(this.propertyName,this.getQualifier(),this.getValue())}},{key:"setPresentationModel",value:function(e){if(this.presentationModel)throw new Error("You can not set a presentation model for an attribute that is already bound.");this.presentationModel=e}},{key:"getPresentationModel",value:function(){return this.presentationModel}},{key:"getValue",value:function(){return this.value}},{key:"setValueFromServer",value:function(t){var n=e.checkValue(t);if(this.value!==n){var r=this.value;this.value=n,this.valueChangeBus.trigger({oldValue:r,newValue:n,sendToServer:!1})}}},{key:"setValue",value:function(t){var n=e.checkValue(t);if(this.value!==n){var r=this.value;this.value=n,this.valueChangeBus.trigger({oldValue:r,newValue:n,sendToServer:!0})}}},{key:"setQualifier",value:function(e){if(this.qualifier!==e){var t=this.qualifier;this.qualifier=e,this.qualifierChangeBus.trigger({oldValue:t,newValue:e}),this.valueChangeBus.trigger({oldValue:this.value,newValue:this.value,sendToServer:!1})}}},{key:"getQualifier",value:function(){return this.qualifier}},{key:"onValueChange",value:function(e){this.valueChangeBus.onEvent(e),e({oldValue:this.value,newValue:this.value,sendToServer:!1})}},{key:"onQualifierChange",value:function(e){this.qualifierChangeBus.onEvent(e)}},{key:"syncWith",value:function(e){e&&(this.setQualifier(e.getQualifier()),this.setValue(e.value))}}],[{key:"checkValue",value:function(t){if(null==t||void 0===t)return null;var n=t;(n instanceof String||n instanceof Boolean||n instanceof Number)&&(n=t.valueOf()),n instanceof e&&(e.LOGGER.warn("An Attribute may not itself contain an attribute as a value. Assuming you forgot to call value."),n=this.checkValue(t.value));var o=!1;if((this.SUPPORTED_VALUE_TYPES.indexOf(void 0===n?"undefined":(0,r.default)(n))>-1||n instanceof Date)&&(o=!0),!o)throw new Error("Attribute values of this type are not allowed: "+(void 0===t?"undefined":(0,r.default)(t)));return n}}]),e}();t.default=l,l.LOGGER=u.LoggerFactory.getLogger("ClientAttribute"),l.SUPPORTED_VALUE_TYPES=["string","number","boolean"],l.clientAttributeInstanceCount=0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=d(n(18)),o=d(n(0)),i=d(n(1)),a=d(n(198)),u=d(n(60)),c=d(n(39)),l=n(38),s=n(7);function d(e){return e&&e.__esModule?e:{default:e}}var f=function(){function e(t){(0,o.default)(this,e),this.clientDolphin=t,this.presentationModels=new r.default,this.presentationModelsPerType=new r.default,this.attributesPerId=new r.default,this.attributesPerQualifier=new r.default,this.modelStoreChangeBus=new u.default}return(0,i.default)(e,[{key:"getClientDolphin",value:function(){return this.clientDolphin}},{key:"registerAttribute",value:function(e){var t=this;this.addAttributeById(e),e.getQualifier()&&this.addAttributeByQualifier(e),e.onValueChange(function(n){if(n.newValue!==n.oldValue&&!0===n.sendToServer){var r=c.default.createValueChangedCommand(e.id,n.newValue);t.clientDolphin.getClientConnector().send(r,null)}e.getQualifier()&&t.findAttributesByFilter(function(t){return t!==e&&t.getQualifier()===e.getQualifier()}).forEach(function(t){t.setValue(e.getValue())})}),e.onQualifierChange(function(n){t.clientDolphin.getClientConnector().send(c.default.createChangeAttributeMetadataCommand(e.id,a.default.QUALIFIER_PROPERTY,n.newValue),null)})}},{key:"add",value:function(t){var n=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t)return!1;this.presentationModels.has(t.id)&&e.LOGGER.error("There already is a PM with id "+t.id);var o=!1;if(!this.presentationModels.has(t.id)){if(this.presentationModels.set(t.id,t),this.addPresentationModelByType(t),r)this.clientDolphin.getClientConnector().send(c.default.createCreatePresentationModelCommand(t),null);t.getAttributes().forEach(function(e){n.registerAttribute(e)}),this.modelStoreChangeBus.trigger({eventType:l.ADDED_TYPE,clientPresentationModel:t}),o=!0}return o}},{key:"remove",value:function(e){var t=this;if(!e)return!1;var n=!1;return this.presentationModels.has(e.id)&&(this.removePresentationModelByType(e),this.presentationModels.delete(e.id),e.getAttributes().forEach(function(e){t.removeAttributeById(e),e.getQualifier()&&t.removeAttributeByQualifier(e)}),this.modelStoreChangeBus.trigger({eventType:l.REMOVED_TYPE,clientPresentationModel:e}),n=!0),n}},{key:"findAttributesByFilter",value:function(e){var t=[];return this.presentationModels.forEach(function(n){n.getAttributes().forEach(function(n){e(n)&&t.push(n)})}),t}},{key:"addPresentationModelByType",value:function(e){if(e){var t=e.presentationModelType;if(t){var n=this.presentationModelsPerType.get(t);n||(n=[],this.presentationModelsPerType.set(t,n)),n.indexOf(e)>-1||n.push(e)}}}},{key:"removePresentationModelByType",value:function(e){if(e&&e.presentationModelType){var t=this.presentationModelsPerType.get(e.presentationModelType);t&&(t.length>-1&&t.splice(t.indexOf(e),1),0===t.length&&this.presentationModelsPerType.delete(e.presentationModelType))}}},{key:"listPresentationModelIds",value:function(){for(var e=[],t=this.presentationModels.keys(),n=t.next();!n.done;)e.push(n.value),n=t.next();return e}},{key:"listPresentationModels",value:function(){for(var e=[],t=this.presentationModels.values(),n=t.next();!n.done;)e.push(n.value),n=t.next();return e}},{key:"findPresentationModelById",value:function(e){return this.presentationModels.get(e)}},{key:"findAllPresentationModelByType",value:function(e){return e&&this.presentationModelsPerType.has(e)?this.presentationModelsPerType.get(e).slice(0):[]}},{key:"deletePresentationModel",value:function(e,t){if(e&&this.containsPresentationModel(e.id)){if(this.remove(e),!t||e.clientSideOnly)return;this.clientDolphin.getClientConnector().send(c.default.createPresentationModelDeletedCommand(e.id),null)}}},{key:"containsPresentationModel",value:function(e){return this.presentationModels.has(e)}},{key:"addAttributeById",value:function(e){e&&!this.attributesPerId.has(e.id)&&this.attributesPerId.set(e.id,e)}},{key:"removeAttributeById",value:function(e){e&&this.attributesPerId.has(e.id)&&this.attributesPerId.delete(e.id)}},{key:"findAttributeById",value:function(e){return this.attributesPerId.get(e)}},{key:"addAttributeByQualifier",value:function(e){if(e&&e.getQualifier()){var t=this.attributesPerQualifier.get(e.getQualifier());t||(t=[],this.attributesPerQualifier.set(e.getQualifier(),t)),t.indexOf(e)>-1||t.push(e)}}},{key:"removeAttributeByQualifier",value:function(e){if(e&&e.getQualifier()){var t=this.attributesPerQualifier.get(e.getQualifier());t&&(t.length>-1&&t.splice(t.indexOf(e),1),0===t.length&&this.attributesPerQualifier.delete(e.getQualifier()))}}},{key:"findAllAttributesByQualifier",value:function(e){return e&&this.attributesPerQualifier.has(e)?this.attributesPerQualifier.get(e).slice(0):[]}},{key:"onModelStoreChange",value:function(e){this.modelStoreChangeBus.onEvent(e)}},{key:"onModelStoreChangeForType",value:function(e,t){this.modelStoreChangeBus.onEvent(function(n){n.clientPresentationModel.presentationModelType==e&&t(n)})}}]),e}();t.default=f,f.LOGGER=s.LoggerFactory.getLogger("ClientModelStore")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(0),i=(r=o)&&r.__esModule?r:{default:r};var a=function e(){(0,i.default)(this,e)};t.default=a,a.QUALIFIER_PROPERTY="qualifier",a.VALUE="value"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0)),o=i(n(1));function i(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(){(0,r.default)(this,e)}return(0,o.default)(e,[{key:"transmit",value:function(e,t){t([])}},{key:"signal",value:function(){}},{key:"reset",value:function(){}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(18)),o=c(n(0)),i=c(n(1)),a=n(2),u=n(7);function c(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(t){(0,o.default)(this,e),(0,a.checkMethod)("BeanManager(classRepository)"),(0,a.checkParam)(t,"classRepository"),this.classRepository=t,this.addedHandlers=new r.default,this.removedHandlers=new r.default,this.updatedHandlers=new r.default,this.arrayUpdatedHandlers=new r.default,this.allAddedHandlers=[],this.allRemovedHandlers=[],this.allUpdatedHandlers=[],this.allArrayUpdatedHandlers=[],this._handleBeanAdded=this._handleBeanAdded.bind(this),this._handleBeanRemoved=this._handleBeanRemoved.bind(this),this._handleBeanUpdate=this._handleBeanUpdate.bind(this),this._handleArrayUpdate=this._handleArrayUpdate.bind(this),this.classRepository.onBeanAdded(this._handleBeanAdded),this.classRepository.onBeanRemoved(this._handleBeanRemoved),this.classRepository.onBeanUpdate(this._handleBeanUpdate),this.classRepository.onArrayUpdate(this._handleArrayUpdate)}return(0,i.default)(e,[{key:"_handleBeanAdded",value:function(t,n){var r=this.addedHandlers.get(t);(0,a.exists)(r)&&r.forEach(function(r){try{r(n)}catch(n){e.LOGGER.error("An exception occurred while calling an onBeanAdded-handler for type",t,n)}}),this.allAddedHandlers.forEach(function(t){try{t(n)}catch(t){e.LOGGER.error("An exception occurred while calling a general onBeanAdded-handler",t)}})}},{key:"_handleBeanRemoved",value:function(t,n){var r=this.removedHandlers.get(t);(0,a.exists)(r)&&r.forEach(function(r){try{r(n)}catch(n){e.LOGGER.error("An exception occurred while calling an onBeanRemoved-handler for type",t,n)}}),this.allRemovedHandlers.forEach(function(t){try{t(n)}catch(t){e.LOGGER.error("An exception occurred while calling a general onBeanRemoved-handler",t)}})}},{key:"_handleArrayUpdate",value:function(t,n,r,o,i,u){var c=this.arrayUpdatedHandlers.get(t);(0,a.exists)(c)&&c.forEach(function(a){try{a(n,r,o,i,u)}catch(n){e.LOGGER.error("An exception occurred while calling an onArrayUpdate-handler for type",t,n)}}),this.allArrayUpdatedHandlers.forEach(function(t){try{t(n,r,o,i,u)}catch(t){e.LOGGER.error("An exception occurred while calling a general onArrayUpdate-handler",t)}})}},{key:"_handleBeanUpdate",value:function(t,n,r,o,i){var u=this.updatedHandlers.get(t);(0,a.exists)(u)&&u.forEach(function(a){try{a(n,r,o,i)}catch(n){e.LOGGER.error("An exception occurred while calling an onBeanUpdate-handler for type",t,n)}}),this.allUpdatedHandlers.forEach(function(t){try{t(n,r,o,i)}catch(t){e.LOGGER.error("An exception occurred while calling a general onBeanUpdate-handler",t)}})}},{key:"notifyBeanChange",value:function(e,t,n){return(0,a.checkMethod)("BeanManager.notifyBeanChange(bean, propertyName, newValue)"),(0,a.checkParam)(e,"bean"),(0,a.checkParam)(t,"propertyName"),this.classRepository.notifyBeanChange(e,t,n)}},{key:"notifyArrayChange",value:function(e,t,n,r,o){(0,a.checkMethod)("BeanManager.notifyArrayChange(bean, propertyName, index, count, removedElements)"),(0,a.checkParam)(e,"bean"),(0,a.checkParam)(t,"propertyName"),(0,a.checkParam)(n,"index"),(0,a.checkParam)(r,"count"),(0,a.checkParam)(o,"removedElements"),this.classRepository.notifyArrayChange(e,t,n,r,o)}},{key:"isManaged",value:function(e){throw(0,a.checkMethod)("BeanManager.isManaged(bean)"),(0,a.checkParam)(e,"bean"),new Error("Not implemented yet")}},{key:"create",value:function(e){throw(0,a.checkMethod)("BeanManager.create(type)"),(0,a.checkParam)(e,"type"),new Error("Not implemented yet")}},{key:"add",value:function(e,t){throw(0,a.checkMethod)("BeanManager.add(type, bean)"),(0,a.checkParam)(e,"type"),(0,a.checkParam)(t,"bean"),new Error("Not implemented yet")}},{key:"addAll",value:function(e,t){throw(0,a.checkMethod)("BeanManager.addAll(type, collection)"),(0,a.checkParam)(e,"type"),(0,a.checkParam)(t,"collection"),new Error("Not implemented yet")}},{key:"remove",value:function(e){throw(0,a.checkMethod)("BeanManager.remove(bean)"),(0,a.checkParam)(e,"bean"),new Error("Not implemented yet")}},{key:"removeAll",value:function(e){throw(0,a.checkMethod)("BeanManager.removeAll(collection)"),(0,a.checkParam)(e,"collection"),new Error("Not implemented yet")}},{key:"removeIf",value:function(e){throw(0,a.checkMethod)("BeanManager.removeIf(predicate)"),(0,a.checkParam)(e,"predicate"),new Error("Not implemented yet")}},{key:"onAdded",value:function(e,t){var n=this;if((0,a.exists)(t)){(0,a.checkMethod)("BeanManager.onAdded(type, eventHandler)"),(0,a.checkParam)(e,"type"),(0,a.checkParam)(t,"eventHandler");var r=this.addedHandlers.get(e);return(0,a.exists)(r)||(r=[]),this.addedHandlers.set(e,r.concat(t)),{unsubscribe:function(){var r=n.addedHandlers.get(e);(0,a.exists)(r)&&n.addedHandlers.set(e,r.filter(function(e){return e!==t}))}}}return t=e,(0,a.checkMethod)("BeanManager.onAdded(eventHandler)"),(0,a.checkParam)(t,"eventHandler"),this.allAddedHandlers=this.allAddedHandlers.concat(t),{unsubscribe:function(){n.allAddedHandlers=n.allAddedHandlers.filter(function(e){return e!==t})}}}},{key:"onRemoved",value:function(e,t){var n=this;if((0,a.exists)(t)){(0,a.checkMethod)("BeanManager.onRemoved(type, eventHandler)"),(0,a.checkParam)(e,"type"),(0,a.checkParam)(t,"eventHandler");var r=this.removedHandlers.get(e);return(0,a.exists)(r)||(r=[]),this.removedHandlers.set(e,r.concat(t)),{unsubscribe:function(){var r=n.removedHandlers.get(e);(0,a.exists)(r)&&n.removedHandlers.set(e,r.filter(function(e){return e!==t}))}}}return t=e,(0,a.checkMethod)("BeanManager.onRemoved(eventHandler)"),(0,a.checkParam)(t,"eventHandler"),this.allRemovedHandlers=this.allRemovedHandlers.concat(t),{unsubscribe:function(){n.allRemovedHandlers=n.allRemovedHandlers.filter(function(e){return e!==t})}}}},{key:"onBeanUpdate",value:function(e,t){var n=this;if((0,a.exists)(t)){(0,a.checkMethod)("BeanManager.onBeanUpdate(type, eventHandler)"),(0,a.checkParam)(e,"type"),(0,a.checkParam)(t,"eventHandler");var r=this.updatedHandlers.get(e);return(0,a.exists)(r)||(r=[]),this.updatedHandlers.set(e,r.concat(t)),{unsubscribe:function(){var r=n.updatedHandlers.get(e);(0,a.exists)(r)&&n.updatedHandlers.set(e,r.filter(function(e){return e!==t}))}}}return t=e,(0,a.checkMethod)("BeanManager.onBeanUpdate(eventHandler)"),(0,a.checkParam)(t,"eventHandler"),this.allUpdatedHandlers=this.allUpdatedHandlers.concat(t),{unsubscribe:function(){n.allUpdatedHandlers=n.allUpdatedHandlers.filter(function(e){return e!==t})}}}},{key:"onArrayUpdate",value:function(e,t){var n=this;if((0,a.exists)(t)){(0,a.checkMethod)("BeanManager.onArrayUpdate(type, eventHandler)"),(0,a.checkParam)(e,"type"),(0,a.checkParam)(t,"eventHandler");var r=this.arrayUpdatedHandlers.get(e);return(0,a.exists)(r)||(r=[]),this.arrayUpdatedHandlers.set(e,r.concat(t)),{unsubscribe:function(){var r=n.arrayUpdatedHandlers.get(e);(0,a.exists)(r)&&n.arrayUpdatedHandlers.set(e,r.filter(function(e){return e!==t}))}}}return t=e,(0,a.checkMethod)("BeanManager.onArrayUpdate(eventHandler)"),(0,a.checkParam)(t,"eventHandler"),this.allArrayUpdatedHandlers=this.allArrayUpdatedHandlers.concat(t),{unsubscribe:function(){n.allArrayUpdatedHandlers=n.allArrayUpdatedHandlers.filter(function(e){return e!==t})}}}}]),e}();t.default=l,l.LOGGER=u.LoggerFactory.getLogger("BeanManager")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(29)),o=s(n(18)),i=s(n(0)),a=s(n(1)),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(38)),c=n(2),l=n(7);function s(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(t){(0,i.default)(this,e),(0,c.checkMethod)("ClassRepository(dolphin)"),(0,c.checkParam)(t,"dolphin"),this.dolphin=t,this.classes=new o.default,this.beanFromDolphin=new o.default,this.beanToDolphin=new o.default,this.classInfos=new o.default,this.beanAddedHandlers=[],this.beanRemovedHandlers=[],this.propertyUpdateHandlers=[],this.arrayUpdateHandlers=[],this.blocked=null}return(0,a.default)(e,[{key:"sendListSplice",value:function(t,n,r,o,i,a){var u=t.dolphin,l=u.findPresentationModelById(n);if((0,c.exists)(l)){var s=t.classes.get(l.presentationModelType)[r];if((0,c.exists)(s)){var d=[u.attribute("@@@ SOURCE_SYSTEM @@@",null,"client"),u.attribute("source",null,n),u.attribute("attribute",null,r),u.attribute("from",null,o),u.attribute("to",null,i),u.attribute("count",null,a.length)];a.forEach(function(n,r){d.push(u.attribute(r.toString(),null,e.toDolphin(t,s,n)))}),u.presentationModel.apply(u,[null,"@DP:LS@"].concat(d))}}}},{key:"validateList",value:function(t,n,r,o){var i=r[o];(0,c.exists)(i)||t.propertyUpdateHandlers.forEach(function(t){try{t(n,r,o,[],void 0)}catch(t){e.LOGGER.error("An exception occurred while calling an onBeanUpdate-handler",t)}})}},{key:"block",value:function(e,t){if((0,c.exists)(this.blocked))throw new Error("Trying to create a block while another block exists");this.blocked={bean:e,propertyName:t}}},{key:"isBlocked",value:function(e,t){return(0,c.exists)(this.blocked)&&this.blocked.bean===e&&this.blocked.propertyName===t}},{key:"unblock",value:function(){this.blocked=null}},{key:"notifyBeanChange",value:function(t,n,r){(0,c.checkMethod)("ClassRepository.notifyBeanChange(bean, propertyName, newValue)"),(0,c.checkParam)(t,"bean"),(0,c.checkParam)(n,"propertyName");var o=this.beanToDolphin.get(t);if((0,c.exists)(o)){var i=this.dolphin.findPresentationModelById(o);if((0,c.exists)(i)){var a=this.classes.get(i.presentationModelType)[n],u=i.findAttributeByPropertyName(n);if((0,c.exists)(a)&&(0,c.exists)(u)){var l=u.getValue();return u.setValue(e.toDolphin(this,a,r)),e.fromDolphin(this,a,l)}}}}},{key:"notifyArrayChange",value:function(e,t,n,r,o){if((0,c.checkMethod)("ClassRepository.notifyArrayChange(bean, propertyName, index, count, removedElements)"),(0,c.checkParam)(e,"bean"),(0,c.checkParam)(t,"propertyName"),(0,c.checkParam)(n,"index"),(0,c.checkParam)(r,"count"),(0,c.checkParam)(o,"removedElements"),!this.isBlocked(e,t)){var i=this.beanToDolphin.get(e),a=e[t];if((0,c.exists)(i)&&(0,c.exists)(a)){var u=Array.isArray(o)?o.length:0;this.sendListSplice(this,i,t,n,n+u,a.slice(n,n+r))}}}},{key:"onBeanAdded",value:function(e){(0,c.checkMethod)("ClassRepository.onBeanAdded(handler)"),(0,c.checkParam)(e,"handler"),this.beanAddedHandlers.push(e)}},{key:"onBeanRemoved",value:function(e){(0,c.checkMethod)("ClassRepository.onBeanRemoved(handler)"),(0,c.checkParam)(e,"handler"),this.beanRemovedHandlers.push(e)}},{key:"onBeanUpdate",value:function(e){(0,c.checkMethod)("ClassRepository.onBeanUpdate(handler)"),(0,c.checkParam)(e,"handler"),this.propertyUpdateHandlers.push(e)}},{key:"onArrayUpdate",value:function(e){(0,c.checkMethod)("ClassRepository.onArrayUpdate(handler)"),(0,c.checkParam)(e,"handler"),this.arrayUpdateHandlers.push(e)}},{key:"registerClass",value:function(e){if((0,c.checkMethod)("ClassRepository.registerClass(model)"),(0,c.checkParam)(e,"model"),!this.classes.has(e.id)){var t={};e.attributes.filter(function(e){return e.propertyName.search(/^@/)<0}).forEach(function(e){t[e.propertyName]=e.value}),this.classes.set(e.id,t)}}},{key:"unregisterClass",value:function(e){(0,c.checkMethod)("ClassRepository.unregisterClass(model)"),(0,c.checkParam)(e,"model"),this.classes.delete(e.id)}},{key:"load",value:function(t){(0,c.checkMethod)("ClassRepository.load(model)"),(0,c.checkParam)(t,"model");var n=this,r=this.classes.get(t.presentationModelType),o={};return t.attributes.filter(function(e){return e.propertyName.search(/^@/)<0}).forEach(function(i){o[i.propertyName]=null,i.onValueChange(function(a){if(a.oldValue!==a.newValue){var u=e.fromDolphin(n,r[i.propertyName],a.oldValue),c=e.fromDolphin(n,r[i.propertyName],a.newValue);n.propertyUpdateHandlers.forEach(function(n){try{n(t.presentationModelType,o,i.propertyName,c,u)}catch(t){e.LOGGER.error("An exception occurred while calling an onBeanUpdate-handler",t)}})}})}),this.beanFromDolphin.set(t.id,o),this.beanToDolphin.set(o,t.id),this.classInfos.set(t.id,r),this.beanAddedHandlers.forEach(function(n){try{n(t.presentationModelType,o)}catch(t){e.LOGGER.error("An exception occurred while calling an onBeanAdded-handler",t)}}),o}},{key:"unload",value:function(t){(0,c.checkMethod)("ClassRepository.unload(model)"),(0,c.checkParam)(t,"model");var n=this.beanFromDolphin.get(t.id);return this.beanFromDolphin.delete(t.id),this.beanToDolphin.delete(n),this.classInfos.delete(t.id),(0,c.exists)(n)&&this.beanRemovedHandlers.forEach(function(r){try{r(t.presentationModelType,n)}catch(t){e.LOGGER.error("An exception occurred while calling an onBeanRemoved-handler",t)}}),n}},{key:"spliceListEntry",value:function(t){(0,c.checkMethod)("ClassRepository.spliceListEntry(model)"),(0,c.checkParam)(t,"model");var n=t.findAttributeByPropertyName("source"),r=t.findAttributeByPropertyName("attribute"),o=t.findAttributeByPropertyName("from"),i=t.findAttributeByPropertyName("to"),a=t.findAttributeByPropertyName("count");if(!((0,c.exists)(n)&&(0,c.exists)(r)&&(0,c.exists)(o)&&(0,c.exists)(i)&&(0,c.exists)(a)))throw new Error("Invalid list modification update received");var u=this.classInfos.get(n.value),l=this.beanFromDolphin.get(n.value);if(!(0,c.exists)(l)||!(0,c.exists)(u))throw new Error("Invalid list modification update received. Source bean unknown.");var s=t.presentationModelType;this.validateList(this,s,l,r.value);for(var d=[],f=null,h=0;h<a.value;h++){if(f=t.findAttributeByPropertyName(h.toString()),!(0,c.exists)(f))throw new Error("Invalid list modification update received");d.push(e.fromDolphin(this,u[r.value],f.value))}try{this.block(l,r.value),this.arrayUpdateHandlers.forEach(function(t){try{t(s,l,r.value,o.value,i.value-o.value,d)}catch(t){e.LOGGER.error("An exception occurred while calling an onArrayUpdate-handler",t)}})}finally{this.unblock()}}},{key:"mapParamToDolphin",value:function(e){if(!(0,c.exists)(e))return e;var t=void 0===e?"undefined":(0,r.default)(e);if("object"===t){if(e instanceof Date)return e.toISOString();var n=this.beanToDolphin.get(e);if((0,c.exists)(n))return n;throw new TypeError("Only managed Dolphin Beans can be used")}if("string"===t||"number"===t||"boolean"===t)return e;throw new TypeError("Only managed Dolphin Beans and primitive types can be used")}},{key:"mapDolphinToBean",value:function(t){return e.fromDolphin(this,u.DOLPHIN_BEAN,t)}}]),e}();d.fixType=function(e,t){switch(e){case u.BYTE:case u.SHORT:case u.INT:case u.LONG:return parseInt(t);case u.FLOAT:case u.DOUBLE:return parseFloat(t);case u.BOOLEAN:return"true"===String(t).toLowerCase();case u.STRING:case u.ENUM:return String(t);default:return t}},d.fromDolphin=function(e,t,n){if(!(0,c.exists)(n))return null;switch(t){case u.DOLPHIN_BEAN:return e.beanFromDolphin.get(String(n));case u.DATE:case u.CALENDAR:case u.LOCAL_DATE_FIELD_TYPE:case u.LOCAL_DATE_TIME_FIELD_TYPE:case u.ZONED_DATE_TIME_FIELD_TYPE:return new Date(String(n));default:return d.fixType(t,n)}},d.toDolphin=function(e,t,n){if(!(0,c.exists)(n))return null;switch(t){case u.DOLPHIN_BEAN:return e.beanToDolphin.get(n);case u.DATE:case u.CALENDAR:case u.LOCAL_DATE_FIELD_TYPE:case u.LOCAL_DATE_TIME_FIELD_TYPE:case u.ZONED_DATE_TIME_FIELD_TYPE:return n instanceof Date?n.toISOString():n;default:return d.fixType(t,n)}},d.LOGGER=l.LoggerFactory.getLogger("ClassRepository"),t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=d(n(28)),o=d(n(56)),i=d(n(0)),a=d(n(1)),u=n(2),c=d(n(203)),l=d(n(39)),s=n(105);function d(e){return e&&e.__esModule?e:{default:e}}var f="controllerId",h="errorCode",v=function(){function e(t,n,r){(0,i.default)(this,e),(0,u.checkMethod)("ControllerManager(dolphin, classRepository, connector)"),(0,u.checkParam)(t,"dolphin"),(0,u.checkParam)(n,"classRepository"),(0,u.checkParam)(r,"connector"),this.dolphin=t,this.classRepository=n,this.connector=r,this.controllers=new o.default}return(0,a.default)(e,[{key:"createController",value:function(e){return this._createController(e,null)}},{key:"_createController",value:function(e,t){(0,u.checkMethod)("ControllerManager.createController(name)"),(0,u.checkParam)(e,"name");var n=this,o=void 0,i=void 0,a=void 0,s=void 0;return new r.default(function(r){n.connector.getHighlanderPM().then(function(u){n.connector.invoke(l.default.createCreateControllerCommand(e,t)).then(function(){o=u.findAttributeByPropertyName(f).getValue(),i=u.findAttributeByPropertyName("model").getValue(),a=n.classRepository.mapDolphinToBean(i),s=new c.default(o,a,n),n.controllers.add(s),r(s)})})})}},{key:"invokeAction",value:function(e,t,n){(0,u.checkMethod)("ControllerManager.invokeAction(controllerId, actionName, params)"),(0,u.checkParam)(e,"controllerId"),(0,u.checkParam)(t,"actionName");var o=this;return new r.default(function(r,i){var a=[o.dolphin.attribute(s.SOURCE_SYSTEM,null,s.SOURCE_SYSTEM_CLIENT),o.dolphin.attribute(h)],c=o.dolphin.presentationModel.apply(o.dolphin,[null,s.ACTION_CALL_BEAN].concat(a)),d=[];if((0,u.exists)(n))for(var f in n)if(n.hasOwnProperty(f)){var v=o.classRepository.mapParamToDolphin(n[f]);d.push({name:f,value:v})}o.connector.invoke(l.default.createCallActionCommand(e,t,d)).then(function(){c.findAttributeByPropertyName(h).getValue()?i(new Error("Server side ControllerAction "+t+" caused an error. Please see server log for details.")):r(),o.dolphin.deletePresentationModel(c)})})}},{key:"destroyController",value:function(e){(0,u.checkMethod)("ControllerManager.destroyController(controller)"),(0,u.checkParam)(e,"controller");var t=this;return new r.default(function(n){t.connector.getHighlanderPM().then(function(r){t.controllers.delete(e),r.findAttributeByPropertyName(f).setValue(e.controllerId),t.connector.invoke(l.default.createDestroyControllerCommand(e.getId())).then(n)})})}},{key:"destroy",value:function(){var e=this.controllers,t=[];return this.controllers=new o.default,e.forEach(function(e){try{t.push(e.destroy())}catch(e){}}),r.default.all(t)}}]),e}();t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(56)),o=c(n(0)),i=c(n(1)),a=n(2),u=n(7);function c(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(t,n,i){(0,o.default)(this,e),(0,a.checkMethod)("ControllerProxy(controllerId, model, manager)"),(0,a.checkParam)(t,"controllerId"),(0,a.checkParam)(n,"model"),(0,a.checkParam)(i,"manager"),this.controllerId=t,this.model=n,this.manager=i,this.destroyed=!1,this.onDestroyedHandlers=new r.default}return(0,i.default)(e,[{key:"getModel",value:function(){return this.model}},{key:"getId",value:function(){return this.controllerId}},{key:"invoke",value:function(e,t){if((0,a.checkMethod)("ControllerProxy.invoke(name, params)"),(0,a.checkParam)(e,"name"),this.destroyed)throw new Error("The controller was already destroyed");return this.manager.invokeAction(this.controllerId,e,t)}},{key:"createController",value:function(e){return this.manager._createController(e,this.getId())}},{key:"destroy",value:function(){var t=this;if(this.destroyed)throw new Error("The controller was already destroyed");return this.destroyed=!0,this.onDestroyedHandlers.forEach(function(n){try{n(t)}catch(t){e.LOGGER.error("An exception occurred while calling an onDestroyed-handler",t)}},this),this.manager.destroyController(this)}},{key:"onDestroyed",value:function(e){(0,a.checkMethod)("ControllerProxy.onDestroyed(handler)"),(0,a.checkParam)(e,"handler");var t=this;return this.onDestroyedHandlers.add(e),{unsubscribe:function(){t.onDestroyedHandlers.delete(e)}}}}]),e}();t.default=l,l.LOGGER=u.LoggerFactory.getLogger("ControllerProxy")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(28)),o=l(n(0)),i=l(n(1)),a=l(n(106)),u=l(n(39)),c=n(2);function l(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(t,n,r,i){(0,o.default)(this,e),(0,c.checkMethod)("ClientContext(dolphin, beanManager, controllerManager, connector)"),(0,c.checkParam)(t,"dolphin"),(0,c.checkParam)(n,"beanManager"),(0,c.checkParam)(r,"controllerManager"),(0,c.checkParam)(i,"connector"),this.dolphin=t,this.beanManager=n,this._controllerManager=r,this._connector=i,this.connectionPromise=null,this.isConnected=!1}return(0,i.default)(e,[{key:"connect",value:function(){var e=this;return this.connectionPromise=new r.default(function(t){e._connector.connect(),e._connector.invoke(u.default.createCreateContextCommand()).then(function(){e.isConnected=!0,t()})}),this.connectionPromise}},{key:"onConnect",value:function(){return(0,c.exists)(this.connectionPromise)?this.isConnected?new r.default(function(e){e()}):this.connectionPromise:this.connect()}},{key:"createController",value:function(e){return(0,c.checkMethod)("ClientContext.createController(name)"),(0,c.checkParam)(e,"name"),this._controllerManager.createController(e)}},{key:"disconnect",value:function(){var e=this;return this.dolphin.stopPushListening(),new r.default(function(t){e._controllerManager.destroy().then(function(){e._connector.invoke(u.default.createDestroyContextCommand()),e.dolphin=null,e.beanManager=null,e._controllerManager=null,e._connector=null,t()})})}}]),e}();t.default=s,(0,a.default)(s.prototype)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=h(n(28)),o=h(n(0)),i=h(n(1)),a=h(n(106)),u=n(2),c=n(206),l=h(n(85)),s=h(n(207)),d=n(7),f=n(5);function h(e){return e&&e.__esModule?e:{default:e}}var v=function(){function e(t,n){(0,o.default)(this,e),this.url=t,this.config=n,this.headersInfo=(0,u.exists)(n)?n.headersInfo:null,this.failed_attempt=0;var r=this._connectionConfig();this.maxRetry=(0,u.exists)(r)&&(0,u.exists)(r.maxRetry)?r.maxRetry:3,this.timeout=(0,u.exists)(r)&&(0,u.exists)(r.timeout)?r.timeout:5e3}return(0,i.default)(e,[{key:"_connectionConfig",value:function(){return(0,u.exists)(this.config)?this.config.connection:null}},{key:"_handleError",value:function(e,t){var n=this._connectionConfig();((0,u.exists)(n)&&(0,u.exists)(n.errorHandlers)?n.errorHandlers:[new s.default]).forEach(function(e){e.onError(t)}),e(t)}},{key:"_send",value:function(t){var n=this,o=this;return new r.default(function(r,i){if(window.platformClient){var a=l.default.encode(t);if(e.LOGGER.isLogLevelUseable(d.LogLevel.DEBUG)&&!e.LOGGER.isLogLevelUseable(d.LogLevel.TRACE))for(var u=0;u<t.length;u++){var s=t[u];s.id===f.VALUE_CHANGED_COMMAND_ID&&e.LOGGER.debug("send",s,a)}var h=window.platformClient.getService("HttpClient");h&&o.failed_attempt<=o.maxRetry?h.post(o.url).withHeadersInfo(n.headersInfo).withContent(a).readString().execute().then(function(e){r(e.content)}).catch(function(e){var t=e.getStatus();o.failed_attempt+=1,408===t?o._handleError(i,new c.DolphinSessionError("PlatformHttpTransmitter: Session Timeout")):o._handleError(i,e)}):e.LOGGER.error("Cannot reach the sever")}})}},{key:"transmit",value:function(e,t){var n=this;this._send(e).then(function(e){if(e.trim().length>0)try{var r=l.default.decode(e);t(r)}catch(r){n.emit("error",new c.DolphinRemotingError("PlatformHttpTransmitter: Parse error: (Incorrect response = "+e+")")),t([])}else n.emit("error",new c.DolphinRemotingError("PlatformHttpTransmitter: Empty response")),t([])}).catch(function(e){n.emit("error",e),t([])})}},{key:"signal",value:function(e){var t=this;this._send([e]).catch(function(e){return t.emit("error",e)})}}]),e}();t.default=v,v.LOGGER=d.LoggerFactory.getLogger("PlatformHttpTransmitter"),(0,a.default)(v.prototype)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HttpNetworkError=t.HttpResponseError=t.DolphinSessionError=t.DolphinRemotingError=void 0;var r=u(n(101)),o=u(n(0)),i=u(n(102)),a=u(n(103));function u(e){return e&&e.__esModule?e:{default:e}}t.DolphinRemotingError=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Remoting Error",n=arguments[1];(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.detail=n||void 0,a}return(0,a.default)(t,e),t}(Error),t.DolphinSessionError=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Session Error";return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e))}return(0,a.default)(t,e),t}(Error),t.HttpResponseError=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Http Response Error";return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e))}return(0,a.default)(t,e),t}(Error),t.HttpNetworkError=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Http Network Error";return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e))}return(0,a.default)(t,e),t}(Error)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),o=a(n(1)),i=n(7);function a(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(){(0,r.default)(this,e)}return(0,o.default)(e,[{key:"onError",value:function(t){e.LOGGER.error(t)}}]),e}();t.default=u,u.LOGGER=i.LoggerFactory.getLogger("RemotingErrorHandler")}])});
//# sourceMappingURL=dolphin-platform.min.js.map