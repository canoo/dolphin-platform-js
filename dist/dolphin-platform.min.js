!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.dolphin=e()}}(function(){return function e(t,n,r){function o(i,c){if(!n[i]){if(!t[i]){var l="function"==typeof require&&require;if(!c&&l)return l(i,!0);if(a)return a(i,!0);var s=new Error("Cannot find module '"+i+"'");throw s.code="MODULE_NOT_FOUND",s}var u=n[i]={exports:{}};t[i][0].call(u.exports,function(e){var n=t[i][1][e];return o(n?n:e)},u,u.exports,e,t,n,r)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,n){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.map"),e("../modules/es7.map.to-json"),e("../modules/es7.map.of"),e("../modules/es7.map.from"),t.exports=e("../modules/_core").Map},{"../modules/_core":18,"../modules/es6.map":78,"../modules/es6.object.to-string":79,"../modules/es6.string.iterator":82,"../modules/es7.map.from":83,"../modules/es7.map.of":84,"../modules/es7.map.to-json":85,"../modules/web.dom.iterable":91}],2:[function(e,t,n){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.promise"),e("../modules/es7.promise.finally"),e("../modules/es7.promise.try"),t.exports=e("../modules/_core").Promise},{"../modules/_core":18,"../modules/es6.object.to-string":79,"../modules/es6.promise":80,"../modules/es6.string.iterator":82,"../modules/es7.promise.finally":86,"../modules/es7.promise.try":87,"../modules/web.dom.iterable":91}],3:[function(e,t,n){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.set"),e("../modules/es7.set.to-json"),e("../modules/es7.set.of"),e("../modules/es7.set.from"),t.exports=e("../modules/_core").Set},{"../modules/_core":18,"../modules/es6.object.to-string":79,"../modules/es6.set":81,"../modules/es6.string.iterator":82,"../modules/es7.set.from":88,"../modules/es7.set.of":89,"../modules/es7.set.to-json":90,"../modules/web.dom.iterable":91}],4:[function(e,t,n){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],5:[function(e,t,n){t.exports=function(){}},{}],6:[function(e,t,n){t.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},{}],7:[function(e,t,n){var r=e("./_is-object");t.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":36}],8:[function(e,t,n){var r=e("./_for-of");t.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},{"./_for-of":26}],9:[function(e,t,n){var r=e("./_to-iobject"),o=e("./_to-length"),a=e("./_to-absolute-index");t.exports=function(e){return function(t,n,i){var c,l=r(t),s=o(l.length),u=a(i,s);if(e&&n!=n){for(;s>u;)if(c=l[u++],c!=c)return!0}else for(;s>u;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}}},{"./_to-absolute-index":67,"./_to-iobject":69,"./_to-length":70}],10:[function(e,t,n){var r=e("./_ctx"),o=e("./_iobject"),a=e("./_to-object"),i=e("./_to-length"),c=e("./_array-species-create");t.exports=function(e,t){var n=1==e,l=2==e,s=3==e,u=4==e,d=6==e,f=5==e||d,h=t||c;return function(t,c,m){for(var p,y,_=a(t),v=o(_),g=r(c,m,3),C=i(v.length),b=0,E=n?h(t,C):l?h(t,0):void 0;C>b;b++)if((f||b in v)&&(p=v[b],y=g(p,b,_),e))if(n)E[b]=y;else if(y)switch(e){case 3:return!0;case 5:return p;case 6:return b;case 2:E.push(p)}else if(u)return!1;return d?-1:s||u?u:E}}},{"./_array-species-create":12,"./_ctx":19,"./_iobject":33,"./_to-length":70,"./_to-object":71}],11:[function(e,t,n){var r=e("./_is-object"),o=e("./_is-array"),a=e("./_wks")("species");t.exports=function(e){var t;return o(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!o(t.prototype)||(t=void 0),r(t)&&(t=t[a],null===t&&(t=void 0))),void 0===t?Array:t}},{"./_is-array":35,"./_is-object":36,"./_wks":75}],12:[function(e,t,n){var r=e("./_array-species-constructor");t.exports=function(e,t){return new(r(e))(t)}},{"./_array-species-constructor":11}],13:[function(e,t,n){var r=e("./_cof"),o=e("./_wks")("toStringTag"),a="Arguments"==r(function(){return arguments}()),i=function(e,t){try{return e[t]}catch(n){}};t.exports=function(e){var t,n,c;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=i(t=Object(e),o))?n:a?r(t):"Object"==(c=r(t))&&"function"==typeof t.callee?"Arguments":c}},{"./_cof":14,"./_wks":75}],14:[function(e,t,n){var r={}.toString;t.exports=function(e){return r.call(e).slice(8,-1)}},{}],15:[function(e,t,n){"use strict";var r=e("./_object-dp").f,o=e("./_object-create"),a=e("./_redefine-all"),i=e("./_ctx"),c=e("./_an-instance"),l=e("./_for-of"),s=e("./_iter-define"),u=e("./_iter-step"),d=e("./_set-species"),f=e("./_descriptors"),h=e("./_meta").fastKey,m=e("./_validate-collection"),p=f?"_s":"size",y=function(e,t){var n,r=h(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};t.exports={getConstructor:function(e,t,n,s){var u=e(function(e,r){c(e,u,t,"_i"),e._t=t,e._i=o(null),e._f=void 0,e._l=void 0,e[p]=0,void 0!=r&&l(r,n,e[s],e)});return a(u.prototype,{clear:function(){for(var e=m(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[p]=0},"delete":function(e){var n=m(this,t),r=y(n,e);if(r){var o=r.n,a=r.p;delete n._i[r.i],r.r=!0,a&&(a.n=o),o&&(o.p=a),n._f==r&&(n._f=o),n._l==r&&(n._l=a),n[p]--}return!!r},forEach:function(e){m(this,t);for(var n,r=i(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!y(m(this,t),e)}}),f&&r(u.prototype,"size",{get:function(){return m(this,t)[p]}}),u},def:function(e,t,n){var r,o,a=y(e,t);return a?a.v=n:(e._l=a={i:o=h(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=a),r&&(r.n=a),e[p]++,"F"!==o&&(e._i[o]=a)),e},getEntry:y,setStrong:function(e,t,n){s(e,t,function(e,n){this._t=m(e,t),this._k=n,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?u(0,n.k):"values"==t?u(0,n.v):u(0,[n.k,n.v]):(e._t=void 0,u(1))},n?"entries":"values",!n,!0),d(t)}}},{"./_an-instance":6,"./_ctx":19,"./_descriptors":21,"./_for-of":26,"./_iter-define":39,"./_iter-step":41,"./_meta":44,"./_object-create":47,"./_object-dp":48,"./_redefine-all":56,"./_set-species":60,"./_validate-collection":74}],16:[function(e,t,n){var r=e("./_classof"),o=e("./_array-from-iterable");t.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return o(this)}}},{"./_array-from-iterable":8,"./_classof":13}],17:[function(e,t,n){"use strict";var r=e("./_global"),o=e("./_export"),a=e("./_meta"),i=e("./_fails"),c=e("./_hide"),l=e("./_redefine-all"),s=e("./_for-of"),u=e("./_an-instance"),d=e("./_is-object"),f=e("./_set-to-string-tag"),h=e("./_object-dp").f,m=e("./_array-methods")(0),p=e("./_descriptors");t.exports=function(e,t,n,y,_,v){var g=r[e],C=g,b=_?"set":"add",E=C&&C.prototype,M={};return p&&"function"==typeof C&&(v||E.forEach&&!i(function(){(new C).entries().next()}))?(C=t(function(t,n){u(t,C,e,"_c"),t._c=new g,void 0!=n&&s(n,_,t[b],t)}),m("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in E&&(!v||"clear"!=e)&&c(C.prototype,e,function(n,r){if(u(this,C,e),!t&&v&&!d(n))return"get"==e&&void 0;var o=this._c[e](0===n?0:n,r);return t?this:o})}),v||h(C.prototype,"size",{get:function(){return this._c.size}})):(C=y.getConstructor(t,e,_,b),l(C.prototype,n),a.NEED=!0),f(C,e),M[e]=C,o(o.G+o.W+o.F,M),v||y.setStrong(C,e,_),C}},{"./_an-instance":6,"./_array-methods":10,"./_descriptors":21,"./_export":24,"./_fails":25,"./_for-of":26,"./_global":27,"./_hide":29,"./_is-object":36,"./_meta":44,"./_object-dp":48,"./_redefine-all":56,"./_set-to-string-tag":61}],18:[function(e,t,n){var r=t.exports={version:"2.5.1"};"number"==typeof __e&&(__e=r)},{}],19:[function(e,t,n){var r=e("./_a-function");t.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},{"./_a-function":4}],20:[function(e,t,n){t.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},{}],21:[function(e,t,n){t.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":25}],22:[function(e,t,n){var r=e("./_is-object"),o=e("./_global").document,a=r(o)&&r(o.createElement);t.exports=function(e){return a?o.createElement(e):{}}},{"./_global":27,"./_is-object":36}],23:[function(e,t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],24:[function(e,t,n){var r=e("./_global"),o=e("./_core"),a=e("./_ctx"),i=e("./_hide"),c="prototype",l=function(e,t,n){var s,u,d,f=e&l.F,h=e&l.G,m=e&l.S,p=e&l.P,y=e&l.B,_=e&l.W,v=h?o:o[t]||(o[t]={}),g=v[c],C=h?r:m?r[t]:(r[t]||{})[c];h&&(n=t);for(s in n)u=!f&&C&&void 0!==C[s],u&&s in v||(d=u?C[s]:n[s],v[s]=h&&"function"!=typeof C[s]?n[s]:y&&u?a(d,r):_&&C[s]==d?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[c]=e[c],t}(d):p&&"function"==typeof d?a(Function.call,d):d,p&&((v.virtual||(v.virtual={}))[s]=d,e&l.R&&g&&!g[s]&&i(g,s,d)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},{"./_core":18,"./_ctx":19,"./_global":27,"./_hide":29}],25:[function(e,t,n){t.exports=function(e){try{return!!e()}catch(t){return!0}}},{}],26:[function(e,t,n){var r=e("./_ctx"),o=e("./_iter-call"),a=e("./_is-array-iter"),i=e("./_an-object"),c=e("./_to-length"),l=e("./core.get-iterator-method"),s={},u={},n=t.exports=function(e,t,n,d,f){var h,m,p,y,_=f?function(){return e}:l(e),v=r(n,d,t?2:1),g=0;if("function"!=typeof _)throw TypeError(e+" is not iterable!");if(a(_)){for(h=c(e.length);h>g;g++)if(y=t?v(i(m=e[g])[0],m[1]):v(e[g]),y===s||y===u)return y}else for(p=_.call(e);!(m=p.next()).done;)if(y=o(p,v,m.value,t),y===s||y===u)return y};n.BREAK=s,n.RETURN=u},{"./_an-object":7,"./_ctx":19,"./_is-array-iter":34,"./_iter-call":37,"./_to-length":70,"./core.get-iterator-method":76}],27:[function(e,t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},{}],28:[function(e,t,n){var r={}.hasOwnProperty;t.exports=function(e,t){return r.call(e,t)}},{}],29:[function(e,t,n){var r=e("./_object-dp"),o=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},{"./_descriptors":21,"./_object-dp":48,"./_property-desc":55}],30:[function(e,t,n){var r=e("./_global").document;t.exports=r&&r.documentElement},{"./_global":27}],31:[function(e,t,n){t.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":21,"./_dom-create":22,"./_fails":25}],32:[function(e,t,n){t.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},{}],33:[function(e,t,n){var r=e("./_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},{"./_cof":14}],34:[function(e,t,n){var r=e("./_iterators"),o=e("./_wks")("iterator"),a=Array.prototype;t.exports=function(e){return void 0!==e&&(r.Array===e||a[o]===e)}},{"./_iterators":42,"./_wks":75}],35:[function(e,t,n){var r=e("./_cof");t.exports=Array.isArray||function(e){return"Array"==r(e)}},{"./_cof":14}],36:[function(e,t,n){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],37:[function(e,t,n){var r=e("./_an-object");t.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(a){var i=e["return"];throw void 0!==i&&r(i.call(e)),a}}},{"./_an-object":7}],38:[function(e,t,n){"use strict";var r=e("./_object-create"),o=e("./_property-desc"),a=e("./_set-to-string-tag"),i={};e("./_hide")(i,e("./_wks")("iterator"),function(){return this}),t.exports=function(e,t,n){e.prototype=r(i,{next:o(1,n)}),a(e,t+" Iterator")}},{"./_hide":29,"./_object-create":47,"./_property-desc":55,"./_set-to-string-tag":61,"./_wks":75}],39:[function(e,t,n){"use strict";var r=e("./_library"),o=e("./_export"),a=e("./_redefine"),i=e("./_hide"),c=e("./_has"),l=e("./_iterators"),s=e("./_iter-create"),u=e("./_set-to-string-tag"),d=e("./_object-gpo"),f=e("./_wks")("iterator"),h=!([].keys&&"next"in[].keys()),m="@@iterator",p="keys",y="values",_=function(){return this};t.exports=function(e,t,n,v,g,C,b){s(n,t,v);var E,M,k,P=function(e){if(!h&&e in O)return O[e];switch(e){case p:return function(){return new n(this,e)};case y:return function(){return new n(this,e)}}return function(){return new n(this,e)}},A=t+" Iterator",T=g==y,L=!1,O=e.prototype,D=O[f]||O[m]||g&&O[g],w=D||P(g),I=g?T?P("entries"):w:void 0,R="Array"==t?O.entries||D:D;if(R&&(k=d(R.call(new e)),k!==Object.prototype&&k.next&&(u(k,A,!0),r||c(k,f)||i(k,f,_))),T&&D&&D.name!==y&&(L=!0,w=function(){return D.call(this)}),r&&!b||!h&&!L&&O[f]||i(O,f,w),l[t]=w,l[A]=_,g)if(E={values:T?w:P(y),keys:C?w:P(p),entries:I},b)for(M in E)M in O||a(O,M,E[M]);else o(o.P+o.F*(h||L),t,E);return E}},{"./_export":24,"./_has":28,"./_hide":29,"./_iter-create":38,"./_iterators":42,"./_library":43,"./_object-gpo":50,"./_redefine":57,"./_set-to-string-tag":61,"./_wks":75}],40:[function(e,t,n){var r=e("./_wks")("iterator"),o=!1;try{var a=[7][r]();a["return"]=function(){o=!0},Array.from(a,function(){throw 2})}catch(i){}t.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var a=[7],i=a[r]();i.next=function(){return{done:n=!0}},a[r]=function(){return i},e(a)}catch(c){}return n}},{"./_wks":75}],41:[function(e,t,n){t.exports=function(e,t){return{value:t,done:!!e}}},{}],42:[function(e,t,n){t.exports={}},{}],43:[function(e,t,n){t.exports=!0},{}],44:[function(e,t,n){var r=e("./_uid")("meta"),o=e("./_is-object"),a=e("./_has"),i=e("./_object-dp").f,c=0,l=Object.isExtensible||function(){return!0},s=!e("./_fails")(function(){return l(Object.preventExtensions({}))}),u=function(e){i(e,r,{value:{i:"O"+ ++c,w:{}}})},d=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,r)){if(!l(e))return"F";if(!t)return"E";u(e)}return e[r].i},f=function(e,t){if(!a(e,r)){if(!l(e))return!0;if(!t)return!1;u(e)}return e[r].w},h=function(e){return s&&m.NEED&&l(e)&&!a(e,r)&&u(e),e},m=t.exports={KEY:r,NEED:!1,fastKey:d,getWeak:f,onFreeze:h}},{"./_fails":25,"./_has":28,"./_is-object":36,"./_object-dp":48,"./_uid":73}],45:[function(e,t,n){var r=e("./_global"),o=e("./_task").set,a=r.MutationObserver||r.WebKitMutationObserver,i=r.process,c=r.Promise,l="process"==e("./_cof")(i);t.exports=function(){var e,t,n,s=function(){var r,o;for(l&&(r=i.domain)&&r.exit();e;){o=e.fn,e=e.next;try{o()}catch(a){throw e?n():t=void 0,a}}t=void 0,r&&r.enter()};if(l)n=function(){i.nextTick(s)};else if(a){var u=!0,d=document.createTextNode("");new a(s).observe(d,{characterData:!0}),n=function(){d.data=u=!u}}else if(c&&c.resolve){var f=c.resolve();n=function(){f.then(s)}}else n=function(){o.call(r,s)};return function(r){var o={fn:r,next:void 0};t&&(t.next=o),e||(e=o,n()),t=o}}},{"./_cof":14,"./_global":27,"./_task":66}],46:[function(e,t,n){"use strict";function r(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=o(t),this.reject=o(n)}var o=e("./_a-function");t.exports.f=function(e){return new r(e)}},{"./_a-function":4}],47:[function(e,t,n){var r=e("./_an-object"),o=e("./_object-dps"),a=e("./_enum-bug-keys"),i=e("./_shared-key")("IE_PROTO"),c=function(){},l="prototype",s=function(){var t,n=e("./_dom-create")("iframe"),r=a.length,o="<",i=">";for(n.style.display="none",e("./_html").appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write(o+"script"+i+"document.F=Object"+o+"/script"+i),t.close(),s=t.F;r--;)delete s[l][a[r]];return s()};t.exports=Object.create||function(e,t){var n;return null!==e?(c[l]=r(e),n=new c,c[l]=null,n[i]=e):n=s(),void 0===t?n:o(n,t)}},{"./_an-object":7,"./_dom-create":22,"./_enum-bug-keys":23,"./_html":30,"./_object-dps":49,"./_shared-key":62}],48:[function(e,t,n){var r=e("./_an-object"),o=e("./_ie8-dom-define"),a=e("./_to-primitive"),i=Object.defineProperty;n.f=e("./_descriptors")?Object.defineProperty:function(e,t,n){if(r(e),t=a(t,!0),r(n),o)try{return i(e,t,n)}catch(c){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},{"./_an-object":7,"./_descriptors":21,"./_ie8-dom-define":31,"./_to-primitive":72}],49:[function(e,t,n){var r=e("./_object-dp"),o=e("./_an-object"),a=e("./_object-keys");t.exports=e("./_descriptors")?Object.defineProperties:function(e,t){o(e);for(var n,i=a(t),c=i.length,l=0;c>l;)r.f(e,n=i[l++],t[n]);return e}},{"./_an-object":7,"./_descriptors":21,"./_object-dp":48,"./_object-keys":52}],50:[function(e,t,n){var r=e("./_has"),o=e("./_to-object"),a=e("./_shared-key")("IE_PROTO"),i=Object.prototype;t.exports=Object.getPrototypeOf||function(e){return e=o(e),r(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?i:null}},{"./_has":28,"./_shared-key":62,"./_to-object":71}],51:[function(e,t,n){var r=e("./_has"),o=e("./_to-iobject"),a=e("./_array-includes")(!1),i=e("./_shared-key")("IE_PROTO");t.exports=function(e,t){var n,c=o(e),l=0,s=[];for(n in c)n!=i&&r(c,n)&&s.push(n);for(;t.length>l;)r(c,n=t[l++])&&(~a(s,n)||s.push(n));return s}},{"./_array-includes":9,"./_has":28,"./_shared-key":62,"./_to-iobject":69}],52:[function(e,t,n){var r=e("./_object-keys-internal"),o=e("./_enum-bug-keys");t.exports=Object.keys||function(e){return r(e,o)}},{"./_enum-bug-keys":23,"./_object-keys-internal":51}],53:[function(e,t,n){t.exports=function(e){try{return{e:!1,v:e()}}catch(t){return{e:!0,v:t}}}},{}],54:[function(e,t,n){var r=e("./_an-object"),o=e("./_is-object"),a=e("./_new-promise-capability");t.exports=function(e,t){if(r(e),o(t)&&t.constructor===e)return t;var n=a.f(e),i=n.resolve;return i(t),n.promise}},{"./_an-object":7,"./_is-object":36,"./_new-promise-capability":46}],55:[function(e,t,n){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],56:[function(e,t,n){var r=e("./_hide");t.exports=function(e,t,n){for(var o in t)n&&e[o]?e[o]=t[o]:r(e,o,t[o]);return e}},{"./_hide":29}],57:[function(e,t,n){t.exports=e("./_hide")},{"./_hide":29}],58:[function(e,t,n){"use strict";var r=e("./_export"),o=e("./_a-function"),a=e("./_ctx"),i=e("./_for-of");t.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,c,l=arguments[1];return o(this),t=void 0!==l,t&&o(l),void 0==e?new this:(n=[],t?(r=0,c=a(l,arguments[2],2),i(e,!1,function(e){n.push(c(e,r++))})):i(e,!1,n.push,n),new this(n))}})}},{"./_a-function":4,"./_ctx":19,"./_export":24,"./_for-of":26}],59:[function(e,t,n){"use strict";var r=e("./_export");t.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},{"./_export":24}],60:[function(e,t,n){"use strict";var r=e("./_global"),o=e("./_core"),a=e("./_object-dp"),i=e("./_descriptors"),c=e("./_wks")("species");t.exports=function(e){var t="function"==typeof o[e]?o[e]:r[e];i&&t&&!t[c]&&a.f(t,c,{configurable:!0,get:function(){return this}})}},{"./_core":18,"./_descriptors":21,"./_global":27,"./_object-dp":48,"./_wks":75}],61:[function(e,t,n){var r=e("./_object-dp").f,o=e("./_has"),a=e("./_wks")("toStringTag");t.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,a)&&r(e,a,{configurable:!0,value:t})}},{"./_has":28,"./_object-dp":48,"./_wks":75}],62:[function(e,t,n){var r=e("./_shared")("keys"),o=e("./_uid");t.exports=function(e){return r[e]||(r[e]=o(e))}},{"./_shared":63,"./_uid":73}],63:[function(e,t,n){var r=e("./_global"),o="__core-js_shared__",a=r[o]||(r[o]={});t.exports=function(e){return a[e]||(a[e]={})}},{"./_global":27}],64:[function(e,t,n){var r=e("./_an-object"),o=e("./_a-function"),a=e("./_wks")("species");t.exports=function(e,t){var n,i=r(e).constructor;return void 0===i||void 0==(n=r(i)[a])?t:o(n)}},{"./_a-function":4,"./_an-object":7,"./_wks":75}],65:[function(e,t,n){var r=e("./_to-integer"),o=e("./_defined");t.exports=function(e){return function(t,n){var a,i,c=String(o(t)),l=r(n),s=c.length;return l<0||l>=s?e?"":void 0:(a=c.charCodeAt(l),a<55296||a>56319||l+1===s||(i=c.charCodeAt(l+1))<56320||i>57343?e?c.charAt(l):a:e?c.slice(l,l+2):(a-55296<<10)+(i-56320)+65536)}}},{"./_defined":20,"./_to-integer":68}],66:[function(e,t,n){var r,o,a,i=e("./_ctx"),c=e("./_invoke"),l=e("./_html"),s=e("./_dom-create"),u=e("./_global"),d=u.process,f=u.setImmediate,h=u.clearImmediate,m=u.MessageChannel,p=u.Dispatch,y=0,_={},v="onreadystatechange",g=function(){var e=+this;if(_.hasOwnProperty(e)){var t=_[e];delete _[e],t()}},C=function(e){g.call(e.data)};f&&h||(f=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return _[++y]=function(){c("function"==typeof e?e:Function(e),t)},r(y),y},h=function(e){delete _[e]},"process"==e("./_cof")(d)?r=function(e){d.nextTick(i(g,e,1))}:p&&p.now?r=function(e){p.now(i(g,e,1))}:m?(o=new m,a=o.port2,o.port1.onmessage=C,r=i(a.postMessage,a,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(r=function(e){u.postMessage(e+"","*")},u.addEventListener("message",C,!1)):r=v in s("script")?function(e){l.appendChild(s("script"))[v]=function(){l.removeChild(this),g.call(e)}}:function(e){setTimeout(i(g,e,1),0)}),t.exports={set:f,clear:h}},{"./_cof":14,"./_ctx":19,"./_dom-create":22,"./_global":27,"./_html":30,"./_invoke":32}],67:[function(e,t,n){var r=e("./_to-integer"),o=Math.max,a=Math.min;t.exports=function(e,t){return e=r(e),e<0?o(e+t,0):a(e,t)}},{"./_to-integer":68}],68:[function(e,t,n){var r=Math.ceil,o=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?o:r)(e)}},{}],69:[function(e,t,n){var r=e("./_iobject"),o=e("./_defined");t.exports=function(e){return r(o(e))}},{"./_defined":20,"./_iobject":33}],70:[function(e,t,n){var r=e("./_to-integer"),o=Math.min;t.exports=function(e){return e>0?o(r(e),9007199254740991):0}},{"./_to-integer":68}],71:[function(e,t,n){var r=e("./_defined");t.exports=function(e){return Object(r(e))}},{"./_defined":20}],72:[function(e,t,n){var r=e("./_is-object");t.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":36}],73:[function(e,t,n){var r=0,o=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+o).toString(36))}},{}],74:[function(e,t,n){var r=e("./_is-object");t.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},{"./_is-object":36}],75:[function(e,t,n){var r=e("./_shared")("wks"),o=e("./_uid"),a=e("./_global").Symbol,i="function"==typeof a,c=t.exports=function(e){return r[e]||(r[e]=i&&a[e]||(i?a:o)("Symbol."+e))};c.store=r},{"./_global":27,"./_shared":63,"./_uid":73}],76:[function(e,t,n){var r=e("./_classof"),o=e("./_wks")("iterator"),a=e("./_iterators");t.exports=e("./_core").getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||a[r(e)]}},{"./_classof":13,"./_core":18,"./_iterators":42,"./_wks":75}],77:[function(e,t,n){"use strict";var r=e("./_add-to-unscopables"),o=e("./_iter-step"),a=e("./_iterators"),i=e("./_to-iobject");t.exports=e("./_iter-define")(Array,"Array",function(e,t){this._t=i(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,n):"values"==t?o(0,e[n]):o(0,[n,e[n]])},"values"),a.Arguments=a.Array,r("keys"),r("values"),r("entries")},{"./_add-to-unscopables":5,"./_iter-define":39,"./_iter-step":41,"./_iterators":42,"./_to-iobject":69}],78:[function(e,t,n){"use strict";var r=e("./_collection-strong"),o=e("./_validate-collection"),a="Map";t.exports=e("./_collection")(a,function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=r.getEntry(o(this,a),e);return t&&t.v},set:function(e,t){return r.def(o(this,a),0===e?0:e,t)}},r,!0)},{"./_collection":17,"./_collection-strong":15,"./_validate-collection":74}],79:[function(e,t,n){},{}],80:[function(e,t,n){"use strict";var r,o,a,i,c=e("./_library"),l=e("./_global"),s=e("./_ctx"),u=e("./_classof"),d=e("./_export"),f=e("./_is-object"),h=e("./_a-function"),m=e("./_an-instance"),p=e("./_for-of"),y=e("./_species-constructor"),_=e("./_task").set,v=e("./_microtask")(),g=e("./_new-promise-capability"),C=e("./_perform"),b=e("./_promise-resolve"),E="Promise",M=l.TypeError,k=l.process,P=l[E],A="process"==u(k),T=function(){},L=o=g.f,O=!!function(){try{var t=P.resolve(1),n=(t.constructor={})[e("./_wks")("species")]=function(e){e(T,T)};return(A||"function"==typeof PromiseRejectionEvent)&&t.then(T)instanceof n}catch(r){}}(),D=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},w=function(e,t){if(!e._n){e._n=!0;var n=e._c;v(function(){for(var r=e._v,o=1==e._s,a=0,i=function(t){var n,a,i=o?t.ok:t.fail,c=t.resolve,l=t.reject,s=t.domain;try{i?(o||(2==e._h&&N(e),e._h=1),i===!0?n=r:(s&&s.enter(),n=i(r),s&&s.exit()),n===t.promise?l(M("Promise-chain cycle")):(a=D(n))?a.call(n,c,l):c(n)):l(r)}catch(u){l(u)}};n.length>a;)i(n[a++]);e._c=[],e._n=!1,t&&!e._h&&I(e)})}},I=function(e){_.call(l,function(){var t,n,r,o=e._v,a=R(e);if(a&&(t=C(function(){A?k.emit("unhandledRejection",o,e):(n=l.onunhandledrejection)?n({promise:e,reason:o}):(r=l.console)&&r.error&&r.error("Unhandled promise rejection",o)}),e._h=A||R(e)?2:1),e._a=void 0,a&&t.e)throw t.v})},R=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,r=0;n.length>r;)if(t=n[r++],t.fail||!R(t.promise))return!1;return!0},N=function(e){_.call(l,function(){var t;A?k.emit("rejectionHandled",e):(t=l.onrejectionhandled)&&t({promise:e,reason:e._v})})},S=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),w(t,!0))},x=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw M("Promise can't be resolved itself");(t=D(e))?v(function(){var r={_w:n,_d:!1};try{t.call(e,s(x,r,1),s(S,r,1))}catch(o){S.call(r,o)}}):(n._v=e,n._s=1,w(n,!1))}catch(r){S.call({_w:n,_d:!1},r)}}};O||(P=function(e){m(this,P,E,"_h"),h(e),r.call(this);try{e(s(x,this,1),s(S,this,1))}catch(t){S.call(this,t)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=e("./_redefine-all")(P.prototype,{then:function(e,t){var n=L(y(this,P));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=A?k.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&w(this,!1),n.promise},"catch":function(e){return this.then(void 0,e)}}),a=function(){var e=new r;this.promise=e,this.resolve=s(x,e,1),this.reject=s(S,e,1)},g.f=L=function(e){return e===P||e===i?new a(e):o(e)}),d(d.G+d.W+d.F*!O,{Promise:P}),e("./_set-to-string-tag")(P,E),e("./_set-species")(E),i=e("./_core")[E],d(d.S+d.F*!O,E,{reject:function(e){var t=L(this),n=t.reject;return n(e),t.promise}}),d(d.S+d.F*(c||!O),E,{resolve:function(e){return b(c&&this===i?P:this,e)}}),d(d.S+d.F*!(O&&e("./_iter-detect")(function(e){P.all(e)["catch"](T)})),E,{all:function(e){var t=this,n=L(t),r=n.resolve,o=n.reject,a=C(function(){var n=[],a=0,i=1;p(e,!1,function(e){var c=a++,l=!1;n.push(void 0),i++,t.resolve(e).then(function(e){l||(l=!0,n[c]=e,--i||r(n))},o)}),--i||r(n)});return a.e&&o(a.v),n.promise},race:function(e){var t=this,n=L(t),r=n.reject,o=C(function(){p(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return o.e&&r(o.v),n.promise}})},{"./_a-function":4,"./_an-instance":6,"./_classof":13,"./_core":18,"./_ctx":19,"./_export":24,"./_for-of":26,"./_global":27,"./_is-object":36,"./_iter-detect":40,"./_library":43,"./_microtask":45,"./_new-promise-capability":46,"./_perform":53,"./_promise-resolve":54,"./_redefine-all":56,"./_set-species":60,"./_set-to-string-tag":61,"./_species-constructor":64,"./_task":66,"./_wks":75}],81:[function(e,t,n){"use strict";var r=e("./_collection-strong"),o=e("./_validate-collection"),a="Set";t.exports=e("./_collection")(a,function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(o(this,a),e=0===e?0:e,e)}},r)},{"./_collection":17,"./_collection-strong":15,"./_validate-collection":74}],82:[function(e,t,n){"use strict";var r=e("./_string-at")(!0);e("./_iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},{"./_iter-define":39,"./_string-at":65}],83:[function(e,t,n){e("./_set-collection-from")("Map")},{"./_set-collection-from":58}],84:[function(e,t,n){e("./_set-collection-of")("Map")},{"./_set-collection-of":59}],85:[function(e,t,n){var r=e("./_export");r(r.P+r.R,"Map",{toJSON:e("./_collection-to-json")("Map")})},{"./_collection-to-json":16,"./_export":24}],86:[function(e,t,n){"use strict";var r=e("./_export"),o=e("./_core"),a=e("./_global"),i=e("./_species-constructor"),c=e("./_promise-resolve");r(r.P+r.R,"Promise",{"finally":function(e){var t=i(this,o.Promise||a.Promise),n="function"==typeof e;return this.then(n?function(n){return c(t,e()).then(function(){return n})}:e,n?function(n){return c(t,e()).then(function(){throw n})}:e)}})},{"./_core":18,"./_export":24,"./_global":27,"./_promise-resolve":54,"./_species-constructor":64}],87:[function(e,t,n){"use strict";var r=e("./_export"),o=e("./_new-promise-capability"),a=e("./_perform");r(r.S,"Promise",{"try":function(e){var t=o.f(this),n=a(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},{"./_export":24,"./_new-promise-capability":46,"./_perform":53}],88:[function(e,t,n){e("./_set-collection-from")("Set")},{"./_set-collection-from":58}],89:[function(e,t,n){e("./_set-collection-of")("Set")},{"./_set-collection-of":59}],90:[function(e,t,n){var r=e("./_export");r(r.P+r.R,"Set",{toJSON:e("./_collection-to-json")("Set")})},{"./_collection-to-json":16,"./_export":24}],91:[function(e,t,n){e("./es6.array.iterator");for(var r=e("./_global"),o=e("./_hide"),a=e("./_iterators"),i=e("./_wks")("toStringTag"),c="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<c.length;l++){var s=c[l],u=r[s],d=u&&u.prototype;d&&!d[i]&&o(d,i,s),a[s]=a.Array}},{"./_global":27,"./_hide":29,"./_iterators":42,"./_wks":75,"./es6.array.iterator":77}],92:[function(e,t,n){function r(e){if(e)return o(e)}function o(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),
this},r.prototype.once=function(e,t){function n(){r.off(e,n),t.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var r,o=0;o<n.length;o++)if(r=n[o],r===t||r.fn===t){n.splice(o,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n){n=n.slice(0);for(var r=0,o=n.length;r<o;++r)n[r].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],93:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function a(){r(this,a)};n["default"]=o,o.QUALIFIER_PROPERTY="qualifier",o.VALUE="value"},{}],94:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("core-js/library/fn/map"),c=r(i),l=e("./utils"),s=e("./logging"),u=function(){function e(t){o(this,e),(0,l.checkMethod)("BeanManager(classRepository)"),(0,l.checkParam)(t,"classRepository"),this.classRepository=t,this.addedHandlers=new c["default"],this.removedHandlers=new c["default"],this.updatedHandlers=new c["default"],this.arrayUpdatedHandlers=new c["default"],this.allAddedHandlers=[],this.allRemovedHandlers=[],this.allUpdatedHandlers=[],this.allArrayUpdatedHandlers=[];var n=this;this.classRepository.onBeanAdded(function(t,r){var o=n.addedHandlers.get(t);(0,l.exists)(o)&&o.forEach(function(n){try{n(r)}catch(o){e.LOGGER.error("An exception occurred while calling an onBeanAdded-handler for type",t,o)}}),n.allAddedHandlers.forEach(function(t){try{t(r)}catch(n){e.LOGGER.error("An exception occurred while calling a general onBeanAdded-handler",n)}})}),this.classRepository.onBeanRemoved(function(t,r){var o=n.removedHandlers.get(t);(0,l.exists)(o)&&o.forEach(function(n){try{n(r)}catch(o){e.LOGGER.error("An exception occurred while calling an onBeanRemoved-handler for type",t,o)}}),n.allRemovedHandlers.forEach(function(t){try{t(r)}catch(n){e.LOGGER.error("An exception occurred while calling a general onBeanRemoved-handler",n)}})}),this.classRepository.onBeanUpdate(function(t,r,o,a,i){var c=n.updatedHandlers.get(t);(0,l.exists)(c)&&c.forEach(function(n){try{n(r,o,a,i)}catch(c){e.LOGGER.error("An exception occurred while calling an onBeanUpdate-handler for type",t,c)}}),n.allUpdatedHandlers.forEach(function(t){try{t(r,o,a,i)}catch(n){e.LOGGER.error("An exception occurred while calling a general onBeanUpdate-handler",n)}})}),this.classRepository.onArrayUpdate(function(t,r,o,a,i,c){var s=n.arrayUpdatedHandlers.get(t);(0,l.exists)(s)&&s.forEach(function(n){try{n(r,o,a,i,c)}catch(l){e.LOGGER.error("An exception occurred while calling an onArrayUpdate-handler for type",t,l)}}),n.allArrayUpdatedHandlers.forEach(function(t){try{t(r,o,a,i,c)}catch(n){e.LOGGER.error("An exception occurred while calling a general onArrayUpdate-handler",n)}})})}return a(e,[{key:"notifyBeanChange",value:function(e,t,n){return(0,l.checkMethod)("BeanManager.notifyBeanChange(bean, propertyName, newValue)"),(0,l.checkParam)(e,"bean"),(0,l.checkParam)(t,"propertyName"),this.classRepository.notifyBeanChange(e,t,n)}},{key:"notifyArrayChange",value:function(e,t,n,r,o){(0,l.checkMethod)("BeanManager.notifyArrayChange(bean, propertyName, index, count, removedElements)"),(0,l.checkParam)(e,"bean"),(0,l.checkParam)(t,"propertyName"),(0,l.checkParam)(n,"index"),(0,l.checkParam)(r,"count"),(0,l.checkParam)(o,"removedElements"),this.classRepository.notifyArrayChange(e,t,n,r,o)}},{key:"isManaged",value:function(e){throw(0,l.checkMethod)("BeanManager.isManaged(bean)"),(0,l.checkParam)(e,"bean"),new Error("Not implemented yet")}},{key:"create",value:function(e){throw(0,l.checkMethod)("BeanManager.create(type)"),(0,l.checkParam)(e,"type"),new Error("Not implemented yet")}},{key:"add",value:function(e,t){throw(0,l.checkMethod)("BeanManager.add(type, bean)"),(0,l.checkParam)(e,"type"),(0,l.checkParam)(t,"bean"),new Error("Not implemented yet")}},{key:"addAll",value:function(e,t){throw(0,l.checkMethod)("BeanManager.addAll(type, collection)"),(0,l.checkParam)(e,"type"),(0,l.checkParam)(t,"collection"),new Error("Not implemented yet")}},{key:"remove",value:function(e){throw(0,l.checkMethod)("BeanManager.remove(bean)"),(0,l.checkParam)(e,"bean"),new Error("Not implemented yet")}},{key:"removeAll",value:function(e){throw(0,l.checkMethod)("BeanManager.removeAll(collection)"),(0,l.checkParam)(e,"collection"),new Error("Not implemented yet")}},{key:"removeIf",value:function(e){throw(0,l.checkMethod)("BeanManager.removeIf(predicate)"),(0,l.checkParam)(e,"predicate"),new Error("Not implemented yet")}},{key:"onAdded",value:function(e,t){var n=this;if((0,l.exists)(t)){(0,l.checkMethod)("BeanManager.onAdded(type, eventHandler)"),(0,l.checkParam)(e,"type"),(0,l.checkParam)(t,"eventHandler");var r=n.addedHandlers.get(e);return(0,l.exists)(r)||(r=[]),n.addedHandlers.set(e,r.concat(t)),{unsubscribe:function(){var r=n.addedHandlers.get(e);(0,l.exists)(r)&&n.addedHandlers.set(e,r.filter(function(e){return e!==t}))}}}return t=e,(0,l.checkMethod)("BeanManager.onAdded(eventHandler)"),(0,l.checkParam)(t,"eventHandler"),n.allAddedHandlers=n.allAddedHandlers.concat(t),{unsubscribe:function(){n.allAddedHandlers=n.allAddedHandlers.filter(function(e){return e!==t})}}}},{key:"onRemoved",value:function(e,t){var n=this;if((0,l.exists)(t)){(0,l.checkMethod)("BeanManager.onRemoved(type, eventHandler)"),(0,l.checkParam)(e,"type"),(0,l.checkParam)(t,"eventHandler");var r=n.removedHandlers.get(e);return(0,l.exists)(r)||(r=[]),n.removedHandlers.set(e,r.concat(t)),{unsubscribe:function(){var r=n.removedHandlers.get(e);(0,l.exists)(r)&&n.removedHandlers.set(e,r.filter(function(e){return e!==t}))}}}return t=e,(0,l.checkMethod)("BeanManager.onRemoved(eventHandler)"),(0,l.checkParam)(t,"eventHandler"),n.allRemovedHandlers=n.allRemovedHandlers.concat(t),{unsubscribe:function(){n.allRemovedHandlers=n.allRemovedHandlers.filter(function(e){return e!==t})}}}},{key:"onBeanUpdate",value:function(e,t){var n=this;if((0,l.exists)(t)){(0,l.checkMethod)("BeanManager.onBeanUpdate(type, eventHandler)"),(0,l.checkParam)(e,"type"),(0,l.checkParam)(t,"eventHandler");var r=n.updatedHandlers.get(e);return(0,l.exists)(r)||(r=[]),n.updatedHandlers.set(e,r.concat(t)),{unsubscribe:function(){var r=n.updatedHandlers.get(e);(0,l.exists)(r)&&n.updatedHandlers.set(e,r.filter(function(e){return e!==t}))}}}return t=e,(0,l.checkMethod)("BeanManager.onBeanUpdate(eventHandler)"),(0,l.checkParam)(t,"eventHandler"),n.allUpdatedHandlers=n.allUpdatedHandlers.concat(t),{unsubscribe:function(){n.allUpdatedHandlers=n.allUpdatedHandlers.filter(function(e){return e!==t})}}}},{key:"onArrayUpdate",value:function(e,t){var n=this;if((0,l.exists)(t)){(0,l.checkMethod)("BeanManager.onArrayUpdate(type, eventHandler)"),(0,l.checkParam)(e,"type"),(0,l.checkParam)(t,"eventHandler");var r=n.arrayUpdatedHandlers.get(e);return(0,l.exists)(r)||(r=[]),n.arrayUpdatedHandlers.set(e,r.concat(t)),{unsubscribe:function(){var r=n.arrayUpdatedHandlers.get(e);(0,l.exists)(r)&&n.arrayUpdatedHandlers.set(e,r.filter(function(e){return e!==t}))}}}return t=e,(0,l.checkMethod)("BeanManager.onArrayUpdate(eventHandler)"),(0,l.checkParam)(t,"eventHandler"),n.allArrayUpdatedHandlers=n.allArrayUpdatedHandlers.concat(t),{unsubscribe:function(){n.allArrayUpdatedHandlers=n.allArrayUpdatedHandlers.filter(function(e){return e!==t})}}}}]),e}();n["default"]=u,u.LOGGER=s.LoggerFactory.getLogger("BeanManager")},{"./logging":130,"./utils":137,"core-js/library/fn/map":1}],95:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":i(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":i(e)};Object.defineProperty(n,"__esModule",{value:!0});var l="function"==typeof Symbol&&"symbol"===c(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":c(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":c(e)},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e("core-js/library/fn/map"),d=o(u),f=e("./constants"),h=r(f),m=e("./utils"),p=e("./logging"),y=null,_=function(){function e(t){a(this,e),(0,m.checkMethod)("ClassRepository(dolphin)"),(0,m.checkParam)(t,"dolphin"),this.dolphin=t,this.classes=new d["default"],this.beanFromDolphin=new d["default"],this.beanToDolphin=new d["default"],this.classInfos=new d["default"],this.beanAddedHandlers=[],this.beanRemovedHandlers=[],this.propertyUpdateHandlers=[],this.arrayUpdateHandlers=[]}return s(e,[{key:"fixType",value:function(e,t){switch(e){case h.BYTE:case h.SHORT:case h.INT:case h.LONG:return parseInt(t);case h.FLOAT:case h.DOUBLE:return parseFloat(t);case h.BOOLEAN:return"true"===String(t).toLowerCase();case h.STRING:case h.ENUM:return String(t);default:return t}}},{key:"fromDolphin",value:function(e,t,n){if(!(0,m.exists)(n))return null;switch(t){case h.DOLPHIN_BEAN:return e.beanFromDolphin.get(String(n));case h.DATE:return new Date(String(n));case h.CALENDAR:return new Date(String(n));case h.LOCAL_DATE_FIELD_TYPE:return new Date(String(n));case h.LOCAL_DATE_TIME_FIELD_TYPE:return new Date(String(n));case h.ZONED_DATE_TIME_FIELD_TYPE:return new Date(String(n));default:return this.fixType(t,n)}}},{key:"toDolphin",value:function(e,t,n){if(!(0,m.exists)(n))return null;switch(t){case h.DOLPHIN_BEAN:return e.beanToDolphin.get(n);case h.DATE:return n instanceof Date?n.toISOString():n;case h.CALENDAR:return n instanceof Date?n.toISOString():n;case h.LOCAL_DATE_FIELD_TYPE:return n instanceof Date?n.toISOString():n;case h.LOCAL_DATE_TIME_FIELD_TYPE:return n instanceof Date?n.toISOString():n;case h.ZONED_DATE_TIME_FIELD_TYPE:return n instanceof Date?n.toISOString():n;default:return this.fixType(t,n)}}},{key:"sendListSplice",value:function(e,t,n,r,o,a){var i=e.dolphin,c=i.findPresentationModelById(t),l=this;if((0,m.exists)(c)){var s=e.classes.get(c.presentationModelType),u=s[n];if((0,m.exists)(u)){var d=[i.attribute("@@@ SOURCE_SYSTEM @@@",null,"client"),i.attribute("source",null,t),i.attribute("attribute",null,n),i.attribute("from",null,r),i.attribute("to",null,o),i.attribute("count",null,a.length)];a.forEach(function(t,n){d.push(i.attribute(n.toString(),null,l.toDolphin(e,u,t)))}),i.presentationModel.apply(i,[null,"@DP:LS@"].concat(d))}}}},{key:"validateList",value:function(t,n,r,o){var a=r[o];(0,m.exists)(a)||t.propertyUpdateHandlers.forEach(function(t){try{t(n,r,o,[],void 0)}catch(a){e.LOGGER.error("An exception occurred while calling an onBeanUpdate-handler",a)}})}},{key:"block",value:function(e,t){if((0,m.exists)(y))throw new Error("Trying to create a block while another block exists");y={bean:e,propertyName:t}}},{key:"isBlocked",value:function(e,t){return(0,m.exists)(y)&&y.bean===e&&y.propertyName===t}},{key:"unblock",value:function(){y=null}},{key:"notifyBeanChange",value:function(e,t,n){(0,m.checkMethod)("ClassRepository.notifyBeanChange(bean, propertyName, newValue)"),(0,m.checkParam)(e,"bean"),(0,m.checkParam)(t,"propertyName");var r=this.beanToDolphin.get(e);if((0,m.exists)(r)){var o=this.dolphin.findPresentationModelById(r);if((0,m.exists)(o)){var a=this.classes.get(o.presentationModelType),i=a[t],c=o.findAttributeByPropertyName(t);if((0,m.exists)(i)&&(0,m.exists)(c)){var l=c.getValue();return c.setValue(this.toDolphin(this,i,n)),this.fromDolphin(this,i,l)}}}}},{key:"notifyArrayChange",value:function(e,t,n,r,o){if((0,m.checkMethod)("ClassRepository.notifyArrayChange(bean, propertyName, index, count, removedElements)"),(0,m.checkParam)(e,"bean"),(0,m.checkParam)(t,"propertyName"),(0,m.checkParam)(n,"index"),(0,m.checkParam)(r,"count"),(0,m.checkParam)(o,"removedElements"),!this.isBlocked(e,t)){var a=this.beanToDolphin.get(e),i=e[t];if((0,m.exists)(a)&&(0,m.exists)(i)){var c=Array.isArray(o)?o.length:0;this.sendListSplice(this,a,t,n,n+c,i.slice(n,n+r))}}}},{key:"onBeanAdded",value:function(e){(0,m.checkMethod)("ClassRepository.onBeanAdded(handler)"),(0,m.checkParam)(e,"handler"),this.beanAddedHandlers.push(e)}},{key:"onBeanRemoved",value:function(e){(0,m.checkMethod)("ClassRepository.onBeanRemoved(handler)"),(0,m.checkParam)(e,"handler"),this.beanRemovedHandlers.push(e)}},{key:"onBeanUpdate",value:function(e){(0,m.checkMethod)("ClassRepository.onBeanUpdate(handler)"),(0,m.checkParam)(e,"handler"),this.propertyUpdateHandlers.push(e)}},{key:"onArrayUpdate",value:function(e){(0,m.checkMethod)("ClassRepository.onArrayUpdate(handler)"),(0,m.checkParam)(e,"handler"),this.arrayUpdateHandlers.push(e)}},{key:"registerClass",value:function(e){if((0,m.checkMethod)("ClassRepository.registerClass(model)"),(0,m.checkParam)(e,"model"),!this.classes.has(e.id)){var t={};e.attributes.filter(function(e){return e.propertyName.search(/^@/)<0}).forEach(function(e){t[e.propertyName]=e.value}),this.classes.set(e.id,t)}}},{key:"unregisterClass",value:function(e){(0,m.checkMethod)("ClassRepository.unregisterClass(model)"),(0,m.checkParam)(e,"model"),this.classes["delete"](e.id)}},{key:"load",value:function(t){(0,m.checkMethod)("ClassRepository.load(model)"),(0,m.checkParam)(t,"model");var n=this,r=this.classes.get(t.presentationModelType),o={};return t.attributes.filter(function(e){return e.propertyName.search(/^@/)<0}).forEach(function(a){o[a.propertyName]=null,a.onValueChange(function(i){if(i.oldValue!==i.newValue){var c=n.fromDolphin(n,r[a.propertyName],i.oldValue),l=n.fromDolphin(n,r[a.propertyName],i.newValue);n.propertyUpdateHandlers.forEach(function(n){try{n(t.presentationModelType,o,a.propertyName,l,c)}catch(r){e.LOGGER.error("An exception occurred while calling an onBeanUpdate-handler",r)}})}})}),this.beanFromDolphin.set(t.id,o),this.beanToDolphin.set(o,t.id),this.classInfos.set(t.id,r),this.beanAddedHandlers.forEach(function(n){try{n(t.presentationModelType,o)}catch(r){e.LOGGER.error("An exception occurred while calling an onBeanAdded-handler",r)}}),o}},{key:"unload",value:function(t){(0,m.checkMethod)("ClassRepository.unload(model)"),(0,m.checkParam)(t,"model");var n=this.beanFromDolphin.get(t.id);return this.beanFromDolphin["delete"](t.id),this.beanToDolphin["delete"](n),this.classInfos["delete"](t.id),(0,m.exists)(n)&&this.beanRemovedHandlers.forEach(function(r){try{r(t.presentationModelType,n)}catch(o){e.LOGGER.error("An exception occurred while calling an onBeanRemoved-handler",o)}}),n}},{key:"spliceListEntry",value:function(t){(0,m.checkMethod)("ClassRepository.spliceListEntry(model)"),(0,m.checkParam)(t,"model");var n=t.findAttributeByPropertyName("source"),r=t.findAttributeByPropertyName("attribute"),o=t.findAttributeByPropertyName("from"),a=t.findAttributeByPropertyName("to"),i=t.findAttributeByPropertyName("count");if(!((0,m.exists)(n)&&(0,m.exists)(r)&&(0,m.exists)(o)&&(0,m.exists)(a)&&(0,m.exists)(i)))throw new Error("Invalid list modification update received");var c=this.classInfos.get(n.value),l=this.beanFromDolphin.get(n.value);if(!(0,m.exists)(l)||!(0,m.exists)(c))throw new Error("Invalid list modification update received. Source bean unknown.");var s=t.presentationModelType;this.validateList(this,s,l,r.value);for(var u=[],d=null,f=0;f<i.value;f++){if(d=t.findAttributeByPropertyName(f.toString()),!(0,m.exists)(d))throw new Error("Invalid list modification update received");u.push(this.fromDolphin(this,c[r.value],d.value))}try{this.block(l,r.value),this.arrayUpdateHandlers.forEach(function(t){try{t(s,l,r.value,o.value,a.value-o.value,u)}catch(n){e.LOGGER.error("An exception occurred while calling an onArrayUpdate-handler",n)}})}finally{this.unblock()}}},{key:"mapParamToDolphin",value:function(e){if(!(0,m.exists)(e))return e;var t="undefined"==typeof e?"undefined":l(e);if("object"===t){if(e instanceof Date)return e.toISOString();var n=this.beanToDolphin.get(e);if((0,m.exists)(n))return n;throw new TypeError("Only managed Dolphin Beans can be used")}if("string"===t||"number"===t||"boolean"===t)return e;throw new TypeError("Only managed Dolphin Beans and primitive types can be used")}},{key:"mapDolphinToBean",value:function(e){return this.fromDolphin(this,h.DOLPHIN_BEAN,e)}}]),e}();n["default"]=_,_.LOGGER=p.LoggerFactory.getLogger("ClassRepository")},{"./constants":122,"./logging":130,"./utils":137,"core-js/library/fn/map":1}],96:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":a(e)};Object.defineProperty(n,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":i(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":i(e)},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("./eventBus"),u=r(s),d=e("./logging"),f=function(){function e(t,n,r){o(this,e),this.propertyName=t,this.id=""+e.clientAttributeInstanceCount++ +"C",this.valueChangeBus=new u["default"],this.qualifierChangeBus=new u["default"],this.setValue(r),this.setQualifier(n)}return l(e,[{key:"copy",value:function(){var t=new e(this.propertyName,this.getQualifier(),this.getValue());return t}},{key:"setPresentationModel",value:function(e){if(this.presentationModel)throw new Error("You can not set a presentation model for an attribute that is already bound.");this.presentationModel=e}},{key:"getPresentationModel",value:function(){return this.presentationModel}},{key:"getValue",value:function(){return this.value}},{key:"setValueFromServer",value:function(t){var n=e.checkValue(t);if(this.value!==n){var r=this.value;this.value=n,this.valueChangeBus.trigger({oldValue:r,newValue:n,sendToServer:!1})}}},{key:"setValue",value:function(t){var n=e.checkValue(t);if(this.value!==n){var r=this.value;this.value=n,this.valueChangeBus.trigger({oldValue:r,newValue:n,sendToServer:!0})}}},{key:"setQualifier",value:function(e){if(this.qualifier!==e){var t=this.qualifier;this.qualifier=e,this.qualifierChangeBus.trigger({oldValue:t,newValue:e}),this.valueChangeBus.trigger({oldValue:this.value,newValue:this.value,sendToServer:!1})}}},{key:"getQualifier",value:function(){return this.qualifier}},{key:"onValueChange",value:function(e){this.valueChangeBus.onEvent(e),e({oldValue:this.value,newValue:this.value,sendToServer:!1})}},{key:"onQualifierChange",value:function(e){this.qualifierChangeBus.onEvent(e)}},{key:"syncWith",value:function(e){e&&(this.setQualifier(e.getQualifier()),this.setValue(e.value))}}],[{key:"checkValue",value:function(t){if(null==t||"undefined"==typeof t)return null;var n=t;(n instanceof String||n instanceof Boolean||n instanceof Number)&&(n=t.valueOf()),n instanceof e&&(e.LOGGER.warn("An Attribute may not itself contain an attribute as a value. Assuming you forgot to call value."),n=this.checkValue(t.value));var r=!1;if((this.SUPPORTED_VALUE_TYPES.indexOf("undefined"==typeof n?"undefined":c(n))>-1||n instanceof Date)&&(r=!0),!r)throw new Error("Attribute values of this type are not allowed: "+("undefined"==typeof t?"undefined":c(t)));return n}}]),e}();n["default"]=f,f.LOGGER=d.LoggerFactory.getLogger("ClientAttribute"),f.SUPPORTED_VALUE_TYPES=["string","number","boolean"],f.clientAttributeInstanceCount=0},{"./eventBus":127,"./logging":130}],97:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("./commandBatcher"),c=r(i),l=e("./commands/codec"),s=r(l),u=e("./clientPresentationModel"),d=r(u),f=e("./logging"),h=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:50;o(this,e),this.commandQueue=[],this.currentlySending=!1,this.pushEnabled=!1,this.waiting=!1,this.transmitter=t,this.clientDolphin=n,this.slackMS=r,this.codec=new s["default"],this.commandBatcher=new c["default"]((!0),a)}return a(e,[{key:"setCommandBatcher",value:function(e){this.commandBatcher=e}},{key:"setPushEnabled",value:function(e){this.pushEnabled=e}},{key:"setPushListener",value:function(e){this.pushListener=e}},{key:"setReleaseCommand",value:function(e){this.releaseCommand=e}},{key:"send",value:function(e,t){return this.commandQueue.push({command:e,handler:t}),this.currentlySending?void this.release():void this.doSendNext()}},{key:"doSendNext",value:function(){var e=this;if(this.commandQueue.length<1){if(!this.pushEnabled)return void(this.currentlySending=!1);this.enqueuePushCommand()}this.currentlySending=!0;var t=this.commandBatcher.batch(this.commandQueue);if(t.length>0){var n=t[t.length-1].handler,r=t.map(function(e){return e.command});this.transmitter.transmit(r,function(t){var r=[];t.forEach(function(t){var n=e.handle(t);n&&r.push(n)}),n&&n.onFinished(r),setTimeout(function(){return e.doSendNext()},e.slackMS)})}else setTimeout(function(){return e.doSendNext()},this.slackMS)}},{key:"handle",value:function(t){return"DeletePresentationModel"===t.id?this.handleDeletePresentationModelCommand(t):"CreatePresentationModel"===t.id?this.handleCreatePresentationModelCommand(t):"ValueChanged"===t.id?this.handleValueChangedCommand(t):"AttributeMetadataChanged"===t.id?this.handleAttributeMetadataChangedCommand(t):(e.LOGGER.error("Cannot handle, unknown command "+t),null)}},{key:"handleDeletePresentationModelCommand",value:function(e){var t=this.clientDolphin.findPresentationModelById(e.pmId);return t?(this.clientDolphin.getClientModelStore().deletePresentationModel(t,!0),t):null}},{key:"handleCreatePresentationModelCommand",value:function(e){var t=this;if(this.clientDolphin.getClientModelStore().containsPresentationModel(e.pmId))throw new Error("There already is a presentation model with id "+e.pmId+"  known to the client.");var n=[];e.attributes.forEach(function(e){var r=t.clientDolphin.attribute(e.propertyName,e.qualifier,e.value);e.id&&e.id.match(".*S$")&&(r.id=e.id),n.push(r)});var r=new d["default"](e.pmId,e.pmType);return r.addAttributes(n),e.clientSideOnly&&(r.clientSideOnly=!0),this.clientDolphin.getClientModelStore().add(r,!1),this.clientDolphin.updatePresentationModelQualifier(r),r}},{key:"handleValueChangedCommand",value:function(t){var n=this.clientDolphin.getClientModelStore().findAttributeById(t.attributeId);return n?n.getValue()===t.newValue?null:(n.setValueFromServer(t.newValue),null):(e.LOGGER.error("attribute with id "+t.attributeId+" not found, cannot update to new value "+t.newValue),null)}},{key:"handleAttributeMetadataChangedCommand",value:function(e){var t=this.clientDolphin.getClientModelStore().findAttributeById(e.attributeId);return t?(t[e.metadataName]=e.value,null):null}},{key:"listen",value:function(){this.pushEnabled&&(this.waiting||this.currentlySending||this.doSendNext())}},{key:"enqueuePushCommand",value:function(){var e=this;this.waiting=!0,this.commandQueue.push({command:this.pushListener,handler:{onFinished:function(){e.waiting=!1},onFinishedData:null}})}},{key:"release",value:function(){this.waiting&&(this.waiting=!1,this.transmitter.signal(this.releaseCommand))}}]),e}();n["default"]=h,h.LOGGER=f.LoggerFactory.getLogger("ClientConnector")},{"./clientPresentationModel":101,"./commandBatcher":103,"./commands/codec":104,"./logging":130}],98:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.ClientContextFactory=n.createClientContext=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("./constants"),c=e("./openDolphin.js"),l=e("./utils"),s=e("./logging"),u=e("./connector"),d=r(u),f=e("./beanmanager"),h=r(f),m=e("./classrepo"),p=r(m),y=e("./controllermanager"),_=r(y),v=e("./clientcontext"),g=r(v),C=e("./platformHttpTransmitter"),b=r(C),E=function(){function e(){o(this,e)}return a(e,[{key:"create",value:function(t,n){(0,l.checkMethod)("connect(url, config)"),(0,l.checkParam)(t,"url"),e.LOGGER.info("Dolphin Platform Version:",i.DOLPHIN_PLATFORM_VERSION),e.LOGGER.debug("Creating client context",t,n);var r=(0,c.makeDolphin)().url(t).reset(!1).slackMS(4).supportCORS(!0).maxBatchSize(Number.MAX_SAFE_INTEGER);(0,l.exists)(n)&&((0,l.exists)(n.errorHandler)&&r.errorHandler(n.errorHandler),(0,l.exists)(n.headersInfo)&&Object.keys(n.headersInfo).length>0&&r.headersInfo(n.headersInfo));var o=r.build(),a=new b["default"](t,n);a.on("error",function(e){y.emit("error",e)}),o.clientConnector.transmitter=a;var s=new p["default"](o),u=new h["default"](s),f=new d["default"](t,o,s,n),m=new _["default"](o,s,f),y=new g["default"](o,u,m,f);return e.LOGGER.debug("clientContext created with",y),y}}]),e}();E.LOGGER=s.LoggerFactory.getLogger("ClientContextFactory");var M=(new E).create;n.createClientContext=M,n.ClientContextFactory=E},{"./beanmanager":94,"./classrepo":95,"./clientcontext":102,"./connector":121,"./constants":122,"./controllermanager":123,"./logging":130,"./openDolphin.js":134,"./platformHttpTransmitter":135,"./utils":137}],99:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("./clientAttribute"),c=r(i),l=e("./clientPresentationModel"),s=r(l),u=function(){function e(){o(this,e)}return a(e,[{key:"setClientConnector",value:function(e){this.clientConnector=e}},{key:"getClientConnector",value:function(){return this.clientConnector}},{key:"send",value:function(e,t){this.clientConnector.send(e,t)}},{key:"attribute",value:function(e,t,n){return new c["default"](e,t,n)}},{key:"presentationModel",value:function(e,t){for(var n=new s["default"](e,t),r=arguments.length,o=Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];return o&&o.length>0&&o.forEach(function(e){n.addAttribute(e)}),this.getClientModelStore().add(n,!0),n}},{key:"setClientModelStore",value:function(e){this.clientModelStore=e}},{key:"getClientModelStore",value:function(){return this.clientModelStore}},{key:"listPresentationModelIds",value:function(){return this.getClientModelStore().listPresentationModelIds()}},{key:"listPresentationModels",value:function(){return this.getClientModelStore().listPresentationModels()}},{key:"findAllPresentationModelByType",value:function(e){return this.getClientModelStore().findAllPresentationModelByType(e)}},{key:"getAt",value:function(e){return this.findPresentationModelById(e)}},{key:"findPresentationModelById",value:function(e){return this.getClientModelStore().findPresentationModelById(e)}},{key:"deletePresentationModel",value:function(e){this.getClientModelStore().deletePresentationModel(e,!0)}},{key:"updatePresentationModelQualifier",value:function(e){var t=this;e.getAttributes().forEach(function(e){t.updateAttributeQualifier(e)})}},{key:"updateAttributeQualifier",value:function(e){if(e.getQualifier()){var t=this.getClientModelStore().findAllAttributesByQualifier(e.getQualifier());t.forEach(function(t){t.setValue(e.getValue())})}}},{key:"startPushListening",value:function(e,t){var n=this;this.clientConnector.setPushListener(e),this.clientConnector.setReleaseCommand(t),this.clientConnector.setPushEnabled(!0),setTimeout(function(){n.clientConnector.listen()},0)}},{key:"stopPushListening",value:function(){this.clientConnector.setPushEnabled(!1)}}]),e}();n["default"]=u},{"./clientAttribute":96,"./clientPresentationModel":101}],100:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("./attribute"),c=r(i),l=e("./eventBus"),s=r(l),u=e("./commands/commandFactory"),d=r(u),f=e("./constants"),h=e("./logging"),m=function(){function e(t){o(this,e),this.clientDolphin=t,this.presentationModels=new Map,this.presentationModelsPerType=new Map,this.attributesPerId=new Map,this.attributesPerQualifier=new Map,this.modelStoreChangeBus=new s["default"]}return a(e,[{key:"getClientDolphin",value:function(){return this.clientDolphin}},{key:"registerAttribute",value:function(e){var t=this;this.addAttributeById(e),e.getQualifier()&&this.addAttributeByQualifier(e),e.onValueChange(function(n){if(n.newValue!==n.oldValue&&n.sendToServer===!0){var r=d["default"].createValueChangedCommand(e.id,n.newValue);t.clientDolphin.getClientConnector().send(r,null)}if(e.getQualifier()){var o=t.findAttributesByFilter(function(t){return t!==e&&t.getQualifier()===e.getQualifier()});o.forEach(function(t){t.setValue(e.getValue())})}}),e.onQualifierChange(function(n){
t.clientDolphin.getClientConnector().send(d["default"].createChangeAttributeMetadataCommand(e.id,c["default"].QUALIFIER_PROPERTY,n.newValue),null)})}},{key:"add",value:function(t){var n=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t)return!1;this.presentationModels.has(t.id)&&e.LOGGER.error("There already is a PM with id "+t.id);var o=!1;if(!this.presentationModels.has(t.id)){if(this.presentationModels.set(t.id,t),this.addPresentationModelByType(t),r){var a=this.clientDolphin.getClientConnector();a.send(d["default"].createCreatePresentationModelCommand(t),null)}t.getAttributes().forEach(function(e){n.registerAttribute(e)}),this.modelStoreChangeBus.trigger({eventType:f.ADDED_TYPE,clientPresentationModel:t}),o=!0}return o}},{key:"remove",value:function(e){var t=this;if(!e)return!1;var n=!1;return this.presentationModels.has(e.id)&&(this.removePresentationModelByType(e),this.presentationModels["delete"](e.id),e.getAttributes().forEach(function(e){t.removeAttributeById(e),e.getQualifier()&&t.removeAttributeByQualifier(e)}),this.modelStoreChangeBus.trigger({eventType:f.REMOVED_TYPE,clientPresentationModel:e}),n=!0),n}},{key:"findAttributesByFilter",value:function(e){var t=[];return this.presentationModels.forEach(function(n){n.getAttributes().forEach(function(n){e(n)&&t.push(n)})}),t}},{key:"addPresentationModelByType",value:function(e){if(e){var t=e.presentationModelType;if(t){var n=this.presentationModelsPerType.get(t);n||(n=[],this.presentationModelsPerType.set(t,n)),n.indexOf(e)>-1||n.push(e)}}}},{key:"removePresentationModelByType",value:function(e){if(e&&e.presentationModelType){var t=this.presentationModelsPerType.get(e.presentationModelType);t&&(t.length>-1&&t.splice(t.indexOf(e),1),0===t.length&&this.presentationModelsPerType["delete"](e.presentationModelType))}}},{key:"listPresentationModelIds",value:function(){for(var e=[],t=this.presentationModels.keys(),n=t.next();!n.done;)e.push(n.value),n=t.next();return e}},{key:"listPresentationModels",value:function(){for(var e=[],t=this.presentationModels.values(),n=t.next();!n.done;)e.push(n.value),n=t.next();return e}},{key:"findPresentationModelById",value:function(e){return this.presentationModels.get(e)}},{key:"findAllPresentationModelByType",value:function(e){return e&&this.presentationModelsPerType.has(e)?this.presentationModelsPerType.get(e).slice(0):[]}},{key:"deletePresentationModel",value:function(e,t){if(e&&this.containsPresentationModel(e.id)){if(this.remove(e),!t||e.clientSideOnly)return;this.clientDolphin.getClientConnector().send(d["default"].createPresentationModelDeletedCommand(e.id),null)}}},{key:"containsPresentationModel",value:function(e){return this.presentationModels.has(e)}},{key:"addAttributeById",value:function(e){e&&!this.attributesPerId.has(e.id)&&this.attributesPerId.set(e.id,e)}},{key:"removeAttributeById",value:function(e){e&&this.attributesPerId.has(e.id)&&this.attributesPerId["delete"](e.id)}},{key:"findAttributeById",value:function(e){return this.attributesPerId.get(e)}},{key:"addAttributeByQualifier",value:function(e){if(e&&e.getQualifier()){var t=this.attributesPerQualifier.get(e.getQualifier());t||(t=[],this.attributesPerQualifier.set(e.getQualifier(),t)),t.indexOf(e)>-1||t.push(e)}}},{key:"removeAttributeByQualifier",value:function(e){if(e&&e.getQualifier()){var t=this.attributesPerQualifier.get(e.getQualifier());t&&(t.length>-1&&t.splice(t.indexOf(e),1),0===t.length&&this.attributesPerQualifier["delete"](e.getQualifier()))}}},{key:"findAllAttributesByQualifier",value:function(e){return e&&this.attributesPerQualifier.has(e)?this.attributesPerQualifier.get(e).slice(0):[]}},{key:"onModelStoreChange",value:function(e){this.modelStoreChangeBus.onEvent(e)}},{key:"onModelStoreChangeForType",value:function(e,t){this.modelStoreChangeBus.onEvent(function(n){n.clientPresentationModel.presentationModelType==e&&t(n)})}}]),e}();n["default"]=m,m.LOGGER=h.LoggerFactory.getLogger("ClientModelStore")},{"./attribute":93,"./commands/commandFactory":107,"./constants":122,"./eventBus":127,"./logging":130}],101:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("./eventBus"),c=r(i),l=0,s=function(){function e(t,n){o(this,e),this.id=t,this.presentationModelType=n,this.attributes=[],this.clientSideOnly=!1,this.dirty=!1,"undefined"!=typeof t&&null!=t?this.id=t:this.id=(l++).toString(),this.invalidBus=new c["default"],this.dirtyValueChangeBus=new c["default"]}return a(e,[{key:"copy",value:function(){var t=new e(null,this.presentationModelType);return t.clientSideOnly=!0,this.getAttributes().forEach(function(e){var n=e.copy();t.addAttribute(n)}),t}},{key:"addAttributes",value:function(e){var t=this;!e||e.length<1||e.forEach(function(e){t.addAttribute(e)})}},{key:"addAttribute",value:function(e){var t=this;if(e&&!(this.attributes.indexOf(e)>-1)){if(this.findAttributeByPropertyName(e.propertyName))throw new Error("There already is an attribute with property name: "+e.propertyName+" in presentation model with id: "+this.id);if(e.getQualifier()&&this.findAttributeByQualifier(e.getQualifier()))throw new Error("There already is an attribute with qualifier: "+e.getQualifier()+" in presentation model with id: "+this.id);e.setPresentationModel(this),this.attributes.push(e),e.onValueChange(function(){t.invalidBus.trigger({source:t})})}}},{key:"onInvalidated",value:function(e){this.invalidBus.onEvent(e)}},{key:"getAttributes",value:function(){return this.attributes.slice(0)}},{key:"getAt",value:function(e){return this.findAttributeByPropertyName(e)}},{key:"findAllAttributesByPropertyName",value:function(e){var t=[];return e?(this.attributes.forEach(function(n){n.propertyName==e&&t.push(n)}),t):null}},{key:"findAttributeByPropertyName",value:function(e){if(!e)return null;for(var t=0;t<this.attributes.length;t++)if(this.attributes[t].propertyName==e)return this.attributes[t];return null}},{key:"findAttributeByQualifier",value:function(e){if(!e)return null;for(var t=0;t<this.attributes.length;t++)if(this.attributes[t].getQualifier()==e)return this.attributes[t];return null}},{key:"findAttributeById",value:function(e){if(!e)return null;for(var t=0;t<this.attributes.length;t++)if(this.attributes[t].id==e)return this.attributes[t];return null}},{key:"syncWith",value:function(e){this.attributes.forEach(function(t){var n=e.getAt(t.propertyName);n&&t.syncWith(n)})}}]),e}();n["default"]=s},{"./eventBus":127}],102:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("emitter-component"),c=r(i),l=e("core-js/library/fn/promise"),s=r(l),u=e("./commands/commandFactory"),d=r(u),f=e("./utils"),h=function(){function e(t,n,r,a){o(this,e),(0,f.checkMethod)("ClientContext(dolphin, beanManager, controllerManager, connector)"),(0,f.checkParam)(t,"dolphin"),(0,f.checkParam)(n,"beanManager"),(0,f.checkParam)(r,"controllerManager"),(0,f.checkParam)(a,"connector"),this.dolphin=t,this.beanManager=n,this._controllerManager=r,this._connector=a,this.connectionPromise=null,this.isConnected=!1}return a(e,[{key:"connect",value:function(){var e=this;return this.connectionPromise=new s["default"](function(t){e._connector.connect(),e._connector.invoke(d["default"].createCreateContextCommand()).then(function(){e.isConnected=!0,t()})}),this.connectionPromise}},{key:"onConnect",value:function(){return(0,f.exists)(this.connectionPromise)?this.isConnected?new s["default"](function(e){e()}):this.connectionPromise:this.connect()}},{key:"createController",value:function(e){return(0,f.checkMethod)("ClientContext.createController(name)"),(0,f.checkParam)(e,"name"),this._controllerManager.createController(e)}},{key:"disconnect",value:function(){var e=this;return this.dolphin.stopPushListening(),new s["default"](function(t){e._controllerManager.destroy().then(function(){e._connector.invoke(d["default"].createDestroyContextCommand()),e.dolphin=null,e.beanManager=null,e._controllerManager=null,e._connector=null,t()})})}}]),e}();n["default"]=h,(0,c["default"])(h.prototype)},{"./commands/commandFactory":107,"./utils":137,"core-js/library/fn/promise":2,"emitter-component":92}],103:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("./commands/commandConstants"),i=function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;r(this,e),this.folding=t,this.maxBatchSize=n}return o(e,[{key:"batch",value:function t(e){for(var t=[],n=0;e[n]&&n<=this.maxBatchSize;){var r=e[n];if(n++,this.folding?r.command.id==a.VALUE_CHANGED_COMMAND_ID&&t.length>0&&t[t.length-1].command.id==a.VALUE_CHANGED_COMMAND_ID&&r.command.attributeId==t[t.length-1].command.attributeId?t[t.length-1].command.newValue=r.command.newValue:r.command.id==a.PRESENTATION_MODEL_DELETED_COMMAND_ID||t.push(r):t.push(r),r.handler)break}return e.splice(0,n),t}}]),e}();n["default"]=i},{"./commands/commandConstants":106}],104:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":a(e)};Object.defineProperty(n,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":i(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":i(e)},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("../utils"),u=e("../constants"),d=e("./commandConstants"),f=e("./impl/valueChangedCommand"),h=r(f),m=e("./impl/attributeMetadataChangedCommand"),p=r(m),y=e("./impl/callActionCommand"),_=r(y),v=e("./impl/changeAttributeMetadataCommand"),g=r(v),C=e("./impl/createContextCommand"),b=r(C),E=e("./impl/createControllerCommand"),M=r(E),k=e("./impl/createPresentationModelCommand"),P=r(k),A=e("./impl/deletePresentationModelCommand"),T=r(A),L=e("./impl/destroyContextCommand"),O=r(L),D=e("./impl/destroyControllerCommand"),w=r(D),I=e("./impl/interruptLongPollCommand"),R=r(I),N=e("./impl/presentationModelDeletedCommand"),S=r(N),x=e("./impl/startLongPollCommand"),j=r(x),B=e("./codecError"),H=r(B),G=function(){function e(){o(this,e)}return l(e,null,[{key:"_encodeAttributeMetadataChangedCommand",value:function(e){(0,s.checkMethod)("Codec.encodeAttributeMetadataChangedCommand"),(0,s.checkParam)(e,"command"),(0,s.checkParam)(e.attributeId,"command.attributeId"),(0,s.checkParam)(e.metadataName,"command.metadataName");var t={};return t[d.ID]=d.ATTRIBUTE_METADATA_CHANGED_COMMAND_ID,t[d.ATTRIBUTE_ID]=e.attributeId,t[d.NAME]=e.metadataName,t[d.VALUE]=e.value,t}},{key:"_decodeAttributeMetadataChangedCommand",value:function(e){(0,s.checkMethod)("Codec.decodeAttributeMetadataChangedCommand"),(0,s.checkParam)(e,"jsonCommand"),(0,s.checkParam)(e[d.ATTRIBUTE_ID],"jsonCommand[ATTRIBUTE_ID]"),(0,s.checkParam)(e[d.NAME],"jsonCommand[NAME]");var t=new p["default"];return t.attributeId=e[d.ATTRIBUTE_ID],t.metadataName=e[d.NAME],t.value=e[d.VALUE],t}},{key:"_encodeCallActionCommand",value:function(e){(0,s.checkMethod)("Codec.encodeCallActionCommand"),(0,s.checkParam)(e,"command"),(0,s.checkParam)(e.controllerid,"command.controllerid"),(0,s.checkParam)(e.actionName,"command.actionName"),(0,s.checkParam)(e.params,"command.params");var t={};return t[d.ID]=d.CALL_ACTION_COMMAND_ID,t[d.CONTROLLER_ID]=e.controllerid,t[d.NAME]=e.actionName,t[d.PARAMS]=e.params.map(function(e){var t={};return t[d.NAME]=e.name,(0,s.exists)(e.value)&&(t[d.VALUE]=e.value),t}),t}},{key:"_decodeCallActionCommand",value:function(e){(0,s.checkMethod)("Codec.decodeCallActionCommand"),(0,s.checkParam)(e,"jsonCommand"),(0,s.checkParam)(e[d.CONTROLLER_ID],"jsonCommand[CONTROLLER_ID]"),(0,s.checkParam)(e[d.NAME],"jsonCommand[NAME]"),(0,s.checkParam)(e[d.PARAMS],"jsonCommand[PARAMS]");var t=new _["default"];return t.controllerid=e[d.CONTROLLER_ID],t.actionName=e[d.NAME],t.params=e[d.PARAMS].map(function(e){return{name:e[d.NAME],value:(0,s.exists)(e[d.VALUE])?e[d.VALUE]:null}}),t}},{key:"_encodeChangeAttributeMetadataCommand",value:function(e){(0,s.checkMethod)("Codec.encodeChangeAttributeMetadataCommand"),(0,s.checkParam)(e,"command"),(0,s.checkParam)(e.attributeId,"command.attributeId"),(0,s.checkParam)(e.metadataName,"command.metadataName");var t={};return t[d.ID]=d.CHANGE_ATTRIBUTE_METADATA_COMMAND_ID,t[d.ATTRIBUTE_ID]=e.attributeId,t[d.NAME]=e.metadataName,t[d.VALUE]=e.value,t}},{key:"_decodeChangeAttributeMetadataCommand",value:function(e){(0,s.checkMethod)("Codec.decodeChangeAttributeMetadataCommand"),(0,s.checkParam)(e,"jsonCommand"),(0,s.checkParam)(e[d.ATTRIBUTE_ID],"jsonCommand[ATTRIBUTE_ID]"),(0,s.checkParam)(e[d.NAME],"jsonCommand[NAME]");var t=new g["default"];return t.attributeId=e[d.ATTRIBUTE_ID],t.metadataName=e[d.NAME],t.value=e[d.VALUE],t}},{key:"_encodeCreateContextCommand",value:function(e){(0,s.checkMethod)("Codec.encodeCreateContextCommand"),(0,s.checkParam)(e,"command");var t={};return t[d.ID]=d.CREATE_CONTEXT_COMMAND_ID,t}},{key:"_decodeCreateContextCommand",value:function(e){(0,s.checkMethod)("Codec.decodeCreateContextCommand"),(0,s.checkParam)(e,"jsonCommand");var t=new b["default"];return t}},{key:"_encodeCreateControllerCommand",value:function(e){(0,s.checkMethod)("Codec._encodeCreateControllerCommand"),(0,s.checkParam)(e,"command"),(0,s.checkParam)(e.controllerName,"command.controllerName");var t={};return t[d.ID]=d.CREATE_CONTROLLER_COMMAND_ID,t[d.NAME]=e.controllerName,t[d.CONTROLLER_ID]=e.parentControllerId,t}},{key:"_decodeCreateControllerCommand",value:function(e){(0,s.checkMethod)("Codec._decodeCreateControllerCommand"),(0,s.checkParam)(e,"jsonCommand"),(0,s.checkParam)(e[d.NAME],"jsonCommand[NAME]"),(0,s.checkParam)(e[d.CONTROLLER_ID],"jsonCommand[CONTROLLER_ID]");var t=new M["default"];return t.controllerName=e[d.NAME],t.parentControllerId=e[d.CONTROLLER_ID],t}},{key:"_encodeCreatePresentationModelCommand",value:function(e){(0,s.checkMethod)("Codec.encodeCreatePresentationModelCommand"),(0,s.checkParam)(e,"command"),(0,s.checkParam)(e.pmId,"command.pmId"),(0,s.checkParam)(e.pmType,"command.pmType");var t={};return t[d.ID]=d.CREATE_PRESENTATION_MODEL_COMMAND_ID,t[d.PM_ID]=e.pmId,t[d.PM_TYPE]=e.pmType,t[d.PM_ATTRIBUTES]=e.attributes.map(function(e){var t={};return t[d.NAME]=e.propertyName,t[d.ATTRIBUTE_ID]=e.id,(0,s.exists)(e.value)&&(t[d.VALUE]=e.value),t}),t}},{key:"_decodeCreatePresentationModelCommand",value:function(e){(0,s.checkMethod)("Codec.decodeCreatePresentationModelCommand"),(0,s.checkParam)(e,"jsonCommand"),(0,s.checkParam)(e[d.PM_ID],"jsonCommand[PM_ID]"),(0,s.checkParam)(e[d.PM_TYPE],"jsonCommand[PM_TYPE]");var t=new P["default"];return t.pmId=e[d.PM_ID],t.pmType=e[d.PM_TYPE],t.attributes=e[d.PM_ATTRIBUTES].map(function(e){return{propertyName:e[d.NAME],id:e[d.ATTRIBUTE_ID],value:(0,s.exists)(e[d.VALUE])?e[d.VALUE]:null}}),t}},{key:"_encodeDeletePresentationModelCommand",value:function(e){(0,s.checkMethod)("Codec._encodeDeletePresentationModelCommand"),(0,s.checkParam)(e,"command"),(0,s.checkParam)(e.pmId,"command.pmId");var t={};return t[d.ID]=d.DELETE_PRESENTATION_MODEL_COMMAND_ID,t[d.PM_ID]=e.pmId,t}},{key:"_decodeDeletePresentationModelCommand",value:function(e){(0,s.checkMethod)("Codec._decodeDeletePresentationModelCommand"),(0,s.checkParam)(e,"jsonCommand"),(0,s.checkParam)(e[d.PM_ID],"jsonCommand[PM_ID]");var t=new T["default"];return t.pmId=e[d.PM_ID],t}},{key:"_encodeDestroyContextCommand",value:function(e){(0,s.checkMethod)("Codec._encodeDestroyContextCommand"),(0,s.checkParam)(e,"command");var t={};return t[d.ID]=d.DESTROY_CONTEXT_COMMAND_ID,t}},{key:"_decodeDestroyContextCommand",value:function(e){(0,s.checkMethod)("Codec._decodeDestroyContextCommand"),(0,s.checkParam)(e,"jsonCommand");var t=new O["default"];return t}},{key:"_encodeDestroyControllerCommand",value:function(e){(0,s.checkMethod)("Codec._encodeDestroyControllerCommand"),(0,s.checkParam)(e,"command"),(0,s.checkParam)(e.controllerId,"command.controllerId");var t={};return t[d.ID]=d.DESTROY_CONTROLLER_COMMAND_ID,t[d.CONTROLLER_ID]=e.controllerId,t}},{key:"_decodeDestroyControllerCommand",value:function(e){(0,s.checkMethod)("Codec._decodeDestroyControllerCommand"),(0,s.checkParam)(e,"jsonCommand"),(0,s.checkParam)(e[d.CONTROLLER_ID],"jsonCommand[CONTROLLER_ID]");var t=new w["default"];return t.controllerId=e[d.CONTROLLER_ID],t}},{key:"_encodeInterruptLongPollCommand",value:function(e){(0,s.checkMethod)("Codec._encodeInterruptLongPollCommand"),(0,s.checkParam)(e,"command");var t={};return t[d.ID]=d.INTERRUPT_LONG_POLL_COMMAND_ID,t}},{key:"_decodeInterruptLongPollCommand",value:function(e){(0,s.checkMethod)("Codec._decodeInterruptLongPollCommand"),(0,s.checkParam)(e,"jsonCommand");var t=new R["default"];return t}},{key:"_encodePresentationModelDeletedCommand",value:function(e){(0,s.checkMethod)("Codec._encodePresentationModelDeletedCommand"),(0,s.checkParam)(e,"command"),(0,s.checkParam)(e.pmId,"command.pmId");var t={};return t[d.ID]=d.PRESENTATION_MODEL_DELETED_COMMAND_ID,t[d.PM_ID]=e.pmId,t}},{key:"_decodePresentationModelDeletedCommand",value:function(e){(0,s.checkMethod)("Codec._decodePresentationModelDeletedCommand"),(0,s.checkParam)(e,"jsonCommand"),(0,s.checkParam)(e[d.PM_ID],"jsonCommand[PM_ID]");var t=new S["default"];return t.pmId=e[d.PM_ID],t}},{key:"_encodeStartLongPollCommand",value:function(e){(0,s.checkMethod)("Codec._encodeStartLongPollCommand"),(0,s.checkParam)(e,"command");var t={};return t[d.ID]=d.START_LONG_POLL_COMMAND_ID,t}},{key:"_decodeStartLongPollCommand",value:function(e){(0,s.checkMethod)("Codec._decodeStartLongPollCommand"),(0,s.checkParam)(e,"jsonCommand");var t=new j["default"];return t}},{key:"_encodeValueChangedCommand",value:function(e){(0,s.checkMethod)("Codec.encodeValueChangedCommand"),(0,s.checkParam)(e,"command"),(0,s.checkParam)(e.attributeId,"command.attributeId");var t={};return t[d.ID]=d.VALUE_CHANGED_COMMAND_ID,t[d.ATTRIBUTE_ID]=e.attributeId,(0,s.exists)(e.newValue)&&(t[d.VALUE]=e.newValue),t}},{key:"_decodeValueChangedCommand",value:function(e){(0,s.checkMethod)("Codec.decodeValueChangedCommand"),(0,s.checkParam)(e,"jsonCommand"),(0,s.checkParam)(e[d.ATTRIBUTE_ID],"jsonCommand[ATTRIBUTE_ID]");var t=new h["default"];return t.attributeId=e[d.ATTRIBUTE_ID],(0,s.exists)(e[d.VALUE])?t.newValue=e[d.VALUE]:t.newValue=null,t}},{key:"encode",value:function(e){(0,s.checkMethod)("Codec.encode"),(0,s.checkParam)(e,"commands");var t=this;return JSON.stringify(e.map(function(e){if(e.id===d.ATTRIBUTE_METADATA_CHANGED_COMMAND_ID)return t._encodeAttributeMetadataChangedCommand(e);if(e.id===d.CALL_ACTION_COMMAND_ID)return t._encodeCallActionCommand(e);if(e.id===d.CHANGE_ATTRIBUTE_METADATA_COMMAND_ID)return t._encodeChangeAttributeMetadataCommand(e);if(e.id===d.CREATE_CONTEXT_COMMAND_ID)return t._encodeCreateContextCommand(e);if(e.id===d.CREATE_CONTROLLER_COMMAND_ID)return t._encodeCreateControllerCommand(e);if(e.id===d.CREATE_PRESENTATION_MODEL_COMMAND_ID)return t._encodeCreatePresentationModelCommand(e);if(e.id===d.DELETE_PRESENTATION_MODEL_COMMAND_ID)return t._encodeDeletePresentationModelCommand(e);if(e.id===d.DESTROY_CONTEXT_COMMAND_ID)return t._encodeDestroyContextCommand(e);if(e.id===d.DESTROY_CONTROLLER_COMMAND_ID)return t._encodeDestroyControllerCommand(e);if(e.id===d.INTERRUPT_LONG_POLL_COMMAND_ID)return t._encodeInterruptLongPollCommand(e);if(e.id===d.PRESENTATION_MODEL_DELETED_COMMAND_ID)return t._encodePresentationModelDeletedCommand(e);if(e.id===d.START_LONG_POLL_COMMAND_ID)return t._encodeStartLongPollCommand(e);if(e.id===d.VALUE_CHANGED_COMMAND_ID)return t._encodeValueChangedCommand(e);throw new H["default"]("Command of type "+e.id+" can not be handled")}))}},{key:"decode",value:function(e){if((0,s.checkMethod)("Codec.decode"),(0,s.checkParam)(e,"transmitted"),("undefined"==typeof e?"undefined":c(e))===u.JS_STRING_TYPE){var t=this;return JSON.parse(e).map(function(e){if(e.id===d.ATTRIBUTE_METADATA_CHANGED_COMMAND_ID)return t._decodeAttributeMetadataChangedCommand(e);if(e.id===d.CALL_ACTION_COMMAND_ID)return t._decodeCallActionCommand(e);if(e.id===d.CHANGE_ATTRIBUTE_METADATA_COMMAND_ID)return t._decodeChangeAttributeMetadataCommand(e);if(e.id===d.CREATE_CONTEXT_COMMAND_ID)return t._decodeCreateContextCommand(e);if(e.id===d.CREATE_CONTROLLER_COMMAND_ID)return t._decodeCreateControllerCommand(e);if(e.id===d.CREATE_PRESENTATION_MODEL_COMMAND_ID)return t._decodeCreatePresentationModelCommand(e);if(e.id===d.DELETE_PRESENTATION_MODEL_COMMAND_ID)return t._decodeDeletePresentationModelCommand(e);if(e.id===d.DESTROY_CONTEXT_COMMAND_ID)return t._decodeDestroyContextCommand(e);if(e.id===d.DESTROY_CONTROLLER_COMMAND_ID)return t._decodeDestroyControllerCommand(e);if(e.id===d.INTERRUPT_LONG_POLL_COMMAND_ID)return t._decodeInterruptLongPollCommand(e);if(e.id===d.PRESENTATION_MODEL_DELETED_COMMAND_ID)return t._decodePresentationModelDeletedCommand(e);if(e.id===d.START_LONG_POLL_COMMAND_ID)return t._decodeStartLongPollCommand(e);if(e.id===d.VALUE_CHANGED_COMMAND_ID)return t._decodeValueChangedCommand(e);throw new H["default"]("Command of type "+e.id+" can not be handled")})}throw new H["default"]("Can not decode data that is not of type string")}}]),e}();n["default"]=G},{"../constants":122,"../utils":137,"./codecError":105,"./commandConstants":106,"./impl/attributeMetadataChangedCommand":108,"./impl/callActionCommand":109,"./impl/changeAttributeMetadataCommand":110,"./impl/createContextCommand":111,"./impl/createControllerCommand":112,"./impl/createPresentationModelCommand":113,"./impl/deletePresentationModelCommand":114,"./impl/destroyContextCommand":115,"./impl/destroyControllerCommand":116,"./impl/interruptLongPollCommand":117,"./impl/presentationModelDeletedCommand":118,"./impl/startLongPollCommand":119,"./impl/valueChangedCommand":120}],105:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":c(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":c(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":i(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":i(e)};Object.defineProperty(n,"__esModule",{value:!0});var l=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),t}(Error);n["default"]=l},{}],106:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.ATTRIBUTE_METADATA_CHANGED_COMMAND_ID="AttributeMetadataChanged",n.CALL_ACTION_COMMAND_ID="CallAction",n.CHANGE_ATTRIBUTE_METADATA_COMMAND_ID="ChangeAttributeMetadata",n.CREATE_CONTEXT_COMMAND_ID="CreateContext",n.CREATE_CONTROLLER_COMMAND_ID="CreateController",n.CREATE_PRESENTATION_MODEL_COMMAND_ID="CreatePresentationModel",n.DELETE_PRESENTATION_MODEL_COMMAND_ID="DeletePresentationModel",n.DESTROY_CONTEXT_COMMAND_ID="DestroyContext",n.DESTROY_CONTROLLER_COMMAND_ID="DestroyController",n.INTERRUPT_LONG_POLL_COMMAND_ID="InterruptLongPoll",n.PRESENTATION_MODEL_DELETED_COMMAND_ID="PresentationModelDeleted",n.START_LONG_POLL_COMMAND_ID="StartLongPoll",n.VALUE_CHANGED_COMMAND_ID="ValueChanged",n.ID="id",n.ATTRIBUTE_ID="a_id",n.PM_ID="p_id",n.CONTROLLER_ID="c_id",n.PM_TYPE="t",n.NAME="n",n.VALUE="v",n.PARAMS="p",n.PM_ATTRIBUTES="a"},{}],107:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("./impl/createContextCommand"),c=r(i),l=e("./impl/createControllerCommand"),s=r(l),u=e("./impl/callActionCommand"),d=r(u),f=e("./impl/destroyControllerCommand"),h=r(f),m=e("./impl/destroyContextCommand"),p=r(m),y=e("./impl/startLongPollCommand"),_=r(y),v=e("./impl/interruptLongPollCommand"),g=r(v),C=e("./impl/createPresentationModelCommand"),b=r(C),E=e("./impl/deletePresentationModelCommand"),M=r(E),k=e("./impl/presentationModelDeletedCommand"),P=r(k),A=e("./impl/valueChangedCommand"),T=r(A),L=e("./impl/changeAttributeMetadataCommand"),O=r(L),D=e("./impl/attributeMetadataChangedCommand"),w=r(D),I=function(){function e(){o(this,e)}return a(e,null,[{key:"createCreateContextCommand",value:function(){return new c["default"]}},{key:"createCreateControllerCommand",value:function(e,t){var n=new s["default"];return n.init(e,t),n}},{key:"createCallActionCommand",value:function(e,t,n){var r=new d["default"];return r.init(e,t,n),r}},{key:"createDestroyControllerCommand",value:function(e){var t=new h["default"];return t.init(e),t}},{key:"createDestroyContextCommand",value:function(){return new p["default"]}},{key:"createStartLongPollCommand",value:function(){return new _["default"]}},{key:"createInterruptLongPollCommand",value:function(){return new g["default"]}},{key:"createCreatePresentationModelCommand",value:function(e){var t=new b["default"];return t.init(e),t}},{key:"createDeletePresentationModelCommand",value:function(e){var t=new M["default"];return t.init(e),t}},{key:"createPresentationModelDeletedCommand",value:function(e){var t=new P["default"];return t.init(e),t}},{key:"createValueChangedCommand",value:function(e,t){var n=new T["default"];return n.init(e,t),n}},{key:"createChangeAttributeMetadataCommand",value:function(e,t,n){var r=new O["default"];return r.init(e,t,n),r}},{key:"createAttributeMetadataChangedCommand",value:function(e,t,n){var r=new w["default"];return r.init(e,t,n),r}}]),e}();n["default"]=I},{"./impl/attributeMetadataChangedCommand":108,"./impl/callActionCommand":109,"./impl/changeAttributeMetadataCommand":110,"./impl/createContextCommand":111,"./impl/createControllerCommand":112,"./impl/createPresentationModelCommand":113,"./impl/deletePresentationModelCommand":114,"./impl/destroyContextCommand":115,"./impl/destroyControllerCommand":116,"./impl/interruptLongPollCommand":117,"./impl/presentationModelDeletedCommand":118,"./impl/startLongPollCommand":119,"./impl/valueChangedCommand":120}],108:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("../commandConstants"),i=e("../../utils"),c=function(){function e(){r(this,e),this.id=a.ATTRIBUTE_METADATA_CHANGED_COMMAND_ID}return o(e,[{key:"init",value:function(e,t,n){(0,i.checkMethod)("AttributeMetadataChangedCommand.init()"),(0,i.checkParam)(e,"attributeId"),(0,i.checkParam)(t,"metadataName"),this.attributeId=e,this.metadataName=t,this.value=n}}]),e}();n["default"]=c},{"../../utils":137,"../commandConstants":106}],109:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("../commandConstants"),i=e("../../utils"),c=function(){function e(){r(this,e),this.id=a.CALL_ACTION_COMMAND_ID}return o(e,[{key:"init",value:function(e,t,n){(0,i.checkMethod)("CreateControllerCommand.init()"),(0,i.checkParam)(e,"controllerid"),(0,i.checkParam)(t,"actionName"),this.controllerid=e,this.actionName=t,this.params=n}}]),e}();n["default"]=c},{"../../utils":137,"../commandConstants":106}],110:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("../commandConstants"),i=e("../../utils"),c=function(){function e(){r(this,e),this.id=a.CHANGE_ATTRIBUTE_METADATA_COMMAND_ID}return o(e,[{key:"init",value:function(e,t,n){(0,i.checkMethod)("ChangeAttributeMetadataCommand.init()"),(0,i.checkParam)(e,"attributeId"),(0,i.checkParam)(t,"metadataName"),this.attributeId=e,this.metadataName=t,this.value=n}}]),e}();n["default"]=c},{"../../utils":137,"../commandConstants":106}],111:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../commandConstants"),a=function i(){r(this,i),this.id=o.CREATE_CONTEXT_COMMAND_ID};n["default"]=a},{"../commandConstants":106}],112:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),
Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("../commandConstants"),i=e("../../utils"),c=function(){function e(){r(this,e),this.id=a.CREATE_CONTROLLER_COMMAND_ID}return o(e,[{key:"init",value:function(e,t){(0,i.checkMethod)("CreateControllerCommand.init()"),(0,i.checkParam)(e,"controllerName"),this.controllerName=e,this.parentControllerId=t}}]),e}();n["default"]=c},{"../../utils":137,"../commandConstants":106}],113:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("../commandConstants"),i=e("../../utils"),c=function(){function e(){r(this,e),this.id=a.CREATE_PRESENTATION_MODEL_COMMAND_ID}return o(e,[{key:"init",value:function(e){(0,i.checkMethod)("CreatePresentationModelCommand.init()"),(0,i.checkParam)(e,"presentationModel"),this.attributes=[],this.clientSideOnly=!1,this.pmId=e.id,this.pmType=e.presentationModelType;var t=this;e.getAttributes().forEach(function(e){t.attributes.push({propertyName:e.propertyName,id:e.id,value:e.getValue()})})}}]),e}();n["default"]=c},{"../../utils":137,"../commandConstants":106}],114:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("../commandConstants"),i=e("../../utils"),c=function(){function e(){r(this,e),this.id=a.DELETE_PRESENTATION_MODEL_COMMAND_ID}return o(e,[{key:"init",value:function(e){(0,i.checkMethod)("DeletePresentationModelCommand.init()"),(0,i.checkParam)(e,"pmId"),this.pmId=e}}]),e}();n["default"]=c},{"../../utils":137,"../commandConstants":106}],115:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../commandConstants"),a=function i(){r(this,i),this.id=o.DESTROY_CONTEXT_COMMAND_ID};n["default"]=a},{"../commandConstants":106}],116:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("../commandConstants"),i=e("../../utils"),c=function(){function e(){r(this,e),this.id=a.DESTROY_CONTROLLER_COMMAND_ID}return o(e,[{key:"init",value:function(e){(0,i.checkMethod)("DestroyControllerCommand.init()"),(0,i.checkParam)(e,"controllerId"),this.controllerId=e}}]),e}();n["default"]=c},{"../../utils":137,"../commandConstants":106}],117:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../commandConstants"),a=function i(){r(this,i),this.id=o.INTERRUPT_LONG_POLL_COMMAND_ID};n["default"]=a},{"../commandConstants":106}],118:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("../commandConstants"),i=e("../../utils"),c=function(){function e(){r(this,e),this.id=a.PRESENTATION_MODEL_DELETED_COMMAND_ID}return o(e,[{key:"init",value:function(e){(0,i.checkMethod)("PresentationModelDeletedCommand.init()"),(0,i.checkParam)(e,"pmId"),this.pmId=e}}]),e}();n["default"]=c},{"../../utils":137,"../commandConstants":106}],119:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../commandConstants"),a=function i(){r(this,i),this.id=o.START_LONG_POLL_COMMAND_ID};n["default"]=a},{"../commandConstants":106}],120:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("../commandConstants"),i=e("../../utils"),c=function(){function e(){r(this,e),this.id=a.VALUE_CHANGED_COMMAND_ID}return o(e,[{key:"init",value:function(e,t){(0,i.checkMethod)("ValueChangedCommand.init()"),(0,i.checkParam)(e,"attributeId"),this.attributeId=e,this.newValue=t}}]),e}();n["default"]=c},{"../../utils":137,"../commandConstants":106}],121:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.ACTION_CALL_BEAN=n.SOURCE_SYSTEM_SERVER=n.SOURCE_SYSTEM_CLIENT=n.SOURCE_SYSTEM=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("core-js/library/fn/promise"),c=r(i),l=e("./utils"),s=e("./commands/commandFactory"),u=r(s),d=e("./constants"),f="@@@ DOLPHIN_BEAN @@@",h="@@@ CONTROLLER_ACTION_CALL_BEAN @@@",m="@@@ HIGHLANDER_BEAN @@@",p="@DP:LS@",y="@@@ SOURCE_SYSTEM @@@",_="client",v="server",g=function(){function e(t,n,r,a){o(this,e),(0,l.checkMethod)("Connector(url, dolphin, classRepository, config)"),(0,l.checkParam)(t,"url"),(0,l.checkParam)(n,"dolphin"),(0,l.checkParam)(r,"classRepository");var i=this;this.dolphin=n,this.config=a,this.classRepository=r,this.highlanderPMResolver=function(){},this.highlanderPMPromise=new c["default"](function(e){i.highlanderPMResolver=e}),n.getClientModelStore().onModelStoreChange(function(e){var t=e.clientPresentationModel,n=t.findAttributeByPropertyName(y);(0,l.exists)(n)&&n.value===v&&(e.eventType===d.ADDED_TYPE?i.onModelAdded(t):e.eventType===d.REMOVED_TYPE&&i.onModelRemoved(t))})}return a(e,[{key:"connect",value:function(){var e=this;e.dolphin.startPushListening(u["default"].createStartLongPollCommand(),u["default"].createInterruptLongPollCommand())}},{key:"onModelAdded",value:function(e){(0,l.checkMethod)("Connector.onModelAdded(model)"),(0,l.checkParam)(e,"model");var t=e.presentationModelType;switch(t){case h:break;case f:this.classRepository.registerClass(e);break;case m:this.highlanderPMResolver(e);break;case p:this.classRepository.spliceListEntry(e),this.dolphin.deletePresentationModel(e);break;default:this.classRepository.load(e)}}},{key:"onModelRemoved",value:function(e){(0,l.checkMethod)("Connector.onModelRemoved(model)"),(0,l.checkParam)(e,"model");var t=e.presentationModelType;switch(t){case f:this.classRepository.unregisterClass(e);break;case p:break;default:this.classRepository.unload(e)}}},{key:"invoke",value:function(e){(0,l.checkMethod)("Connector.invoke(command)"),(0,l.checkParam)(e,"command");var t=this.dolphin;return new c["default"](function(n){t.send(e,{onFinished:function(){n()}})})}},{key:"getHighlanderPM",value:function(){return this.highlanderPMPromise}}]),e}();n["default"]=g,n.SOURCE_SYSTEM=y,n.SOURCE_SYSTEM_CLIENT=_,n.SOURCE_SYSTEM_SERVER=v,n.ACTION_CALL_BEAN=h},{"./commands/commandFactory":107,"./constants":122,"./utils":137,"core-js/library/fn/promise":2}],122:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.DOLPHIN_PLATFORM_VERSION="1.0.0-dolfix",n.JS_STRING_TYPE="string",n.DOLPHIN_BEAN=0,n.BYTE=1,n.SHORT=2,n.INT=3,n.LONG=4,n.FLOAT=5,n.DOUBLE=6,n.BOOLEAN=7,n.STRING=8,n.DATE=9,n.ENUM=10,n.CALENDAR=11,n.LOCAL_DATE_FIELD_TYPE=55,n.LOCAL_DATE_TIME_FIELD_TYPE=52,n.ZONED_DATE_TIME_FIELD_TYPE=54,n.ADDED_TYPE="ADDED",n.REMOVED_TYPE="REMOVED"},{}],123:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("core-js/library/fn/promise"),c=r(i),l=e("core-js/library/fn/set"),s=r(l),u=e("./utils"),d=e("./controllerproxy.js"),f=r(d),h=e("./commands/commandFactory.js"),m=r(h),p=e("./connector.js"),y="controllerId",_="model",v="errorCode",g=function(){function e(t,n,r){o(this,e),(0,u.checkMethod)("ControllerManager(dolphin, classRepository, connector)"),(0,u.checkParam)(t,"dolphin"),(0,u.checkParam)(n,"classRepository"),(0,u.checkParam)(r,"connector"),this.dolphin=t,this.classRepository=n,this.connector=r,this.controllers=new s["default"]}return a(e,[{key:"createController",value:function(e){return this._createController(e,null)}},{key:"_createController",value:function(e,t){(0,u.checkMethod)("ControllerManager.createController(name)"),(0,u.checkParam)(e,"name");var n=this,r=void 0,o=void 0,a=void 0,i=void 0;return new c["default"](function(c){n.connector.getHighlanderPM().then(function(l){n.connector.invoke(m["default"].createCreateControllerCommand(e,t)).then(function(){r=l.findAttributeByPropertyName(y).getValue(),o=l.findAttributeByPropertyName(_).getValue(),a=n.classRepository.mapDolphinToBean(o),i=new f["default"](r,a,n),n.controllers.add(i),c(i)})})})}},{key:"invokeAction",value:function(e,t,n){(0,u.checkMethod)("ControllerManager.invokeAction(controllerId, actionName, params)"),(0,u.checkParam)(e,"controllerId"),(0,u.checkParam)(t,"actionName");var r=this;return new c["default"](function(o,a){var i=[r.dolphin.attribute(p.SOURCE_SYSTEM,null,p.SOURCE_SYSTEM_CLIENT),r.dolphin.attribute(v)],c=r.dolphin.presentationModel.apply(r.dolphin,[null,p.ACTION_CALL_BEAN].concat(i)),l=[];if((0,u.exists)(n))for(var s in n)if(n.hasOwnProperty(s)){var d=r.classRepository.mapParamToDolphin(n[s]);l.push({name:s,value:d})}r.connector.invoke(m["default"].createCallActionCommand(e,t,l)).then(function(){var e=c.findAttributeByPropertyName(v).getValue();e?a(new Error("Server side ControllerAction "+t+" caused an error. Please see server log for details.")):o(),r.dolphin.deletePresentationModel(c)})})}},{key:"destroyController",value:function(e){(0,u.checkMethod)("ControllerManager.destroyController(controller)"),(0,u.checkParam)(e,"controller");var t=this;return new c["default"](function(n){t.connector.getHighlanderPM().then(function(r){t.controllers["delete"](e),r.findAttributeByPropertyName(y).setValue(e.controllerId),t.connector.invoke(m["default"].createDestroyControllerCommand(e.getId())).then(n)})})}},{key:"destroy",value:function(){var e=this.controllers,t=[];return this.controllers=new s["default"],e.forEach(function(e){try{t.push(e.destroy())}catch(n){}}),c["default"].all(t)}}]),e}();n["default"]=g},{"./commands/commandFactory.js":107,"./connector.js":121,"./controllerproxy.js":124,"./utils":137,"core-js/library/fn/promise":2,"core-js/library/fn/set":3}],124:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("core-js/library/fn/set"),c=r(i),l=e("./utils"),s=e("./logging"),u=function(){function e(t,n,r){o(this,e),(0,l.checkMethod)("ControllerProxy(controllerId, model, manager)"),(0,l.checkParam)(t,"controllerId"),(0,l.checkParam)(n,"model"),(0,l.checkParam)(r,"manager"),this.controllerId=t,this.model=n,this.manager=r,this.destroyed=!1,this.onDestroyedHandlers=new c["default"]}return a(e,[{key:"getModel",value:function(){return this.model}},{key:"getId",value:function(){return this.controllerId}},{key:"invoke",value:function(e,t){if((0,l.checkMethod)("ControllerProxy.invoke(name, params)"),(0,l.checkParam)(e,"name"),this.destroyed)throw new Error("The controller was already destroyed");return this.manager.invokeAction(this.controllerId,e,t)}},{key:"createController",value:function(e){return this.manager._createController(e,this.getId())}},{key:"destroy",value:function(){var t=this;if(this.destroyed)throw new Error("The controller was already destroyed");return this.destroyed=!0,this.onDestroyedHandlers.forEach(function(n){try{n(t)}catch(r){e.LOGGER.error("An exception occurred while calling an onDestroyed-handler",r)}},this),this.manager.destroyController(this)}},{key:"onDestroyed",value:function(e){(0,l.checkMethod)("ControllerProxy.onDestroyed(handler)"),(0,l.checkParam)(e,"handler");var t=this;return this.onDestroyedHandlers.add(e),{unsubscribe:function(){t.onDestroyedHandlers["delete"](e)}}}}]),e}();n["default"]=u,u.LOGGER=s.LoggerFactory.getLogger("ControllerProxy")},{"./logging":130,"./utils":137,"core-js/library/fn/set":3}],125:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("./clientConnector"),c=r(i),l=e("./clientDolphin"),s=r(l),u=e("./clientModelStore"),d=r(u),f=e("./httpTransmitter"),h=r(f),m=e("./noTransmitter"),p=r(m),y=e("./logging"),_=function(){function e(){o(this,e),this.reset_=!1,this.slackMS_=300,this.maxBatchSize_=50,this.supportCORS_=!1}return a(e,[{key:"url",value:function(e){return this.url_=e,this}},{key:"reset",value:function(e){return this.reset_=e,this}},{key:"slackMS",value:function(e){return this.slackMS_=e,this}},{key:"maxBatchSize",value:function(e){return this.maxBatchSize_=e,this}},{key:"supportCORS",value:function(e){return this.supportCORS_=e,this}},{key:"errorHandler",value:function(e){return this.errorHandler_=e,this}},{key:"headersInfo",value:function(e){return this.headersInfo_=e,this}},{key:"build",value:function(){var t=new s["default"],n=void 0;return n=null!=this.url_&&this.url_.length>0?new h["default"](this.url_,this.reset_,"UTF-8",this.errorHandler_,this.supportCORS_,this.headersInfo_):new p["default"],t.setClientConnector(new c["default"](n,t,this.slackMS_,this.maxBatchSize_)),t.setClientModelStore(new d["default"](t)),e.LOGGER.debug("ClientDolphin initialized",t,n),t}}]),e}();n["default"]=_,_.LOGGER=y.LoggerFactory.getLogger("DolphinBuilder")},{"./clientConnector":97,"./clientDolphin":99,"./clientModelStore":100,"./httpTransmitter":128,"./logging":130,"./noTransmitter":133}],126:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":c(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":c(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":i(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":i(e)};Object.defineProperty(n,"__esModule",{value:!0});n.DolphinRemotingError=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Remoting Error",n=arguments[1];r(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.detail=n||void 0,a}return a(t,e),t}(Error),n.DolphinSessionError=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Session Error";return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),t}(Error),n.HttpResponseError=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Http Response Error";return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),t}(Error),n.HttpNetworkError=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Http Network Error";return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),t}(Error)},{}],127:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e),this.eventHandlers=[]}return o(e,[{key:"onEvent",value:function(e){this.eventHandlers.push(e)}},{key:"trigger",value:function(e){this.eventHandlers.forEach(function(t){return t(e)})}}]),e}();n["default"]=a},{}],128:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("./commands/codec"),c=r(i),l=e("./logging"),s=function(){function e(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"UTF-8",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;o(this,e),this.url=t,this.charset=r,this.HttpCodes={finished:4,success:200},this.errorHandler=a,this.supportCORS=i,this.headersInfo=l,this.http=new XMLHttpRequest,this.sig=new XMLHttpRequest,this.supportCORS&&"withCredentials"in this.http&&(this.http.withCredentials=!0,this.sig.withCredentials=!0),this.codec=new c["default"],n&&(e.LOGGER.error("HttpTransmitter.invalidate() is deprecated. Use ClientDolphin.reset(OnSuccessHandler) instead"),this.invalidate())}return a(e,[{key:"transmit",value:function(t,n){var r=this;this.http.onerror=function(){r.handleError("onerror",""),n([])},this.http.onreadystatechange=function(){if(r.http.readyState===r.HttpCodes.finished)if(r.http.status===r.HttpCodes.success){var t=r.http.responseText;if(t.trim().length>0)try{var o=r.codec.decode(t);n(o)}catch(a){e.LOGGER.error("Error occurred parsing responseText: ",a,t),r.handleError("application","HttpTransmitter: Incorrect responseText: "+t),n([])}else r.handleError("application","HttpTransmitter: empty responseText"),n([])}else r.handleError("application","HttpTransmitter: HTTP Status != 200"),n([])},this.http.open("POST",this.url,!0),this.setHeaders(this.http),"overrideMimeType"in this.http&&this.http.overrideMimeType("application/json; charset="+this.charset);var o=this.codec.encode([t]);e.LOGGER.trace("transmitting",t,o),this.http.send(o)}},{key:"setHeaders",value:function(e){if(this.headersInfo)for(var t in this.headersInfo)this.headersInfo.hasOwnProperty(t)&&e.setRequestHeader(t,this.headersInfo[t])}},{key:"handleError",value:function(t,n){var r={kind:t,url:this.url,httpStatus:this.http.status,message:n};this.errorHandler?this.errorHandler(r):e.LOGGER.error("Error occurred: ",r)}},{key:"signal",value:function(t){this.sig.open("POST",this.url,!0),this.setHeaders(this.sig);var n=this.codec.encode([t]);e.LOGGER.trace("signal",t,n),this.sig.send(n)}},{key:"invalidate",value:function(){this.http.open("POST",this.url+"invalidate?",!1),this.http.send()}}]),e}();n["default"]=s,s.LOGGER=l.LoggerFactory.getLogger("HttpTransmitter")},{"./commands/codec":104,"./logging":130}],129:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r={NONE:{name:"NONE",text:"[NONE ]",level:0},ALL:{name:"ALL",text:"[ALL  ]",level:100},TRACE:{name:"TRACE",text:"[TRACE]",level:5},DEBUG:{name:"DEBUG",text:"[DEBUG]",level:4},INFO:{name:"INFO",text:"[INFO ]",level:3},WARN:{name:"WARN",text:"[WARN ]",level:2},ERROR:{name:"ERROR",text:"[ERROR]",level:1}};n.LogLevel=r},{}],130:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.LoggerFactory=n.LogLevel=void 0;var r=e("./constants"),o=e("./loggerfactory");n.LogLevel=r.LogLevel,n.LoggerFactory=o.LoggerFactory},{"./constants":129,"./loggerfactory":132}],131:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.Logger=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("../utils"),c=e("./constants"),l={pad:function(e,t){for(var n=""+e;n.length<t;)n="0"+n;return n},internalLog:function(){var e=Array.from(arguments),t=e.shift(),n=e.shift(),r=e.shift(),a=new Date,i=a.getFullYear()+"-"+l.pad(a.getMonth(),2)+"-"+l.pad(a.getDate(),2)+" "+l.pad(a.getHours(),2)+":"+l.pad(a.getMinutes(),2)+":"+l.pad(a.getSeconds(),2)+"."+l.pad(a.getMilliseconds(),3);t.apply(void 0,[i,r.text,n].concat(o(e)))},getCookie:function(e){if((0,i.exists)(window)&&(0,i.exists)(window.document)&&(0,i.exists)(window.document.cookie)){var t="; "+document.cookie,n=t.split("; "+e+"=");if(2===n.length)return n.pop().split(";").shift()}}},s=function(){function e(t,n){r(this,e),this.context=t,this.rootLogger=n;var o=l.getCookie("DOLPHIN_PLATFORM_"+this.context);switch(o){case"NONE":this.logLevel=c.LogLevel.NONE;break;case"ALL":this.logLevel=c.LogLevel.ALL;break;case"TRACE":this.logLevel=c.LogLevel.TRACE;break;case"DEBUG":this.logLevel=c.LogLevel.DEBUG;break;case"INFO":this.logLevel=c.LogLevel.INFO;break;case"WARN":this.logLevel=c.LogLevel.WARN;break;case"ERROR":this.logLevel=c.LogLevel.ERROR}}return a(e,[{key:"trace",value:function(){(0,i.exists)(console)&&this.isLogLevel(c.LogLevel.TRACE)&&l.internalLog.apply(l,[console.log,this.context,c.LogLevel.TRACE].concat(Array.prototype.slice.call(arguments)))}},{key:"debug",value:function(){(0,i.exists)(console)&&this.isLogLevel(c.LogLevel.DEBUG)&&l.internalLog.apply(l,[console.log,this.context,c.LogLevel.DEBUG].concat(Array.prototype.slice.call(arguments)))}},{key:"info",value:function(){(0,i.exists)(console)&&this.isLogLevel(c.LogLevel.INFO)&&l.internalLog.apply(l,[console.log,this.context,c.LogLevel.INFO].concat(Array.prototype.slice.call(arguments)))}},{key:"warn",value:function(){(0,i.exists)(console)&&this.isLogLevel(c.LogLevel.WARN)&&l.internalLog.apply(l,[console.warn,this.context,c.LogLevel.WARN].concat(Array.prototype.slice.call(arguments)))}},{key:"error",value:function(){(0,i.exists)(console)&&this.isLogLevel(c.LogLevel.ERROR)&&l.internalLog.apply(l,[console.error,this.context,c.LogLevel.ERROR].concat(Array.prototype.slice.call(arguments)))}},{key:"getLogLevel",value:function(){return(0,i.exists)(this.logLevel)?this.logLevel:(0,i.exists)(this.rootLogger)?this.rootLogger.getLogLevel():c.LogLevel.INFO}},{key:"setLogLevel",value:function(e){this.logLevel=e}},{key:"setLogLevelByName",value:function(e){(0,i.exists)(c.LogLevel[e])&&(this.logLevel=c.LogLevel[e])}},{key:"isLogLevel",value:function(e){return this.getLogLevel()!==c.LogLevel.NONE&&(this.getLogLevel()===c.LogLevel.ALL||(this.getLogLevel()===c.LogLevel.TRACE||(this.getLogLevel()===c.LogLevel.DEBUG&&e!==c.LogLevel.TRACE||(this.getLogLevel()===c.LogLevel.INFO&&e!==c.LogLevel.TRACE&&e!==c.LogLevel.DEBUG||(this.getLogLevel()===c.LogLevel.WARN&&e!==c.LogLevel.TRACE&&e!==c.LogLevel.DEBUG&&e!==c.LogLevel.INFO||this.getLogLevel()===c.LogLevel.ERROR&&e!==c.LogLevel.TRACE&&e!==c.LogLevel.DEBUG&&e!==c.LogLevel.INFO&&e!==c.LogLevel.WARN)))))}},{key:"isLogLevelUseable",value:function(e){return(0,i.checkParam)(e,"level"),!!e.level&&this.getLogLevel().level>=e.level}}]),e}();n.Logger=s},{"../utils":137,"./constants":129}],132:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.LoggerFactory=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("core-js/library/fn/map"),c=r(i),l=e("../utils"),s=e("./logger"),u=new s.Logger("ROOT"),d={loggers:new c["default"]},f=function(){function e(){o(this,e)}return a(e,null,[{key:"getLogger",value:function(e){if(!(0,l.exists)(e)||"ROOT"===e)return u;var t=d.loggers.get(e);if(t)return t;var n=new s.Logger(e,u);return d.loggers.set(e,n),n}}]),e}();n.LoggerFactory=f},{"../utils":137,"./logger":131,"core-js/library/fn/map":1}],133:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e)}return o(e,[{key:"transmit",value:function(e,t){t([])}},{key:"signal",value:function(){}},{key:"reset",value:function(){}}]),e}();n["default"]=a},{}],134:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300;return a().url(e).reset(t).slackMS(n).build()}function a(){return new c["default"]}Object.defineProperty(n,"__esModule",{value:!0}),n.dolphin=o,n.makeDolphin=a;var i=e("./dolphinBuilder"),c=r(i)},{"./dolphinBuilder":125}],135:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("emitter-component"),c=r(i),l=e("./utils"),s=e("./errors"),u=e("./commands/codec"),d=r(u),f=e("./remotingErrorHandler"),h=r(f),m=e("./logging"),p=e("./commands/commandConstants"),y=4,_=200,v=408,g="dolphin_platform_intern_",C=g+"dolphinClientId",b=function(){function e(t,n){o(this,e),this.url=t,this.config=n,this.headersInfo=(0,l.exists)(n)?n.headersInfo:null;var r=(0,l.exists)(n)?n.connection:null;this.maxRetry=(0,l.exists)(r)&&(0,l.exists)(r.maxRetry)?r.maxRetry:3,this.timeout=(0,l.exists)(r)&&(0,l.exists)(r.timeout)?r.timeout:5e3,this.failed_attempt=0}return a(e,[{key:"_handleError",value:function(e,t){var n=(0,l.exists)(this.config)?this.config.connection:null,r=(0,l.exists)(n)&&(0,l.exists)(n.errorHandlers)?n.errorHandlers:[new h["default"]];r.forEach(function(e){e.onError(t)}),e(t)}},{key:"_send",value:function(t){var n=this;return new Promise(function(r,o){var a=new XMLHttpRequest;if(a.withCredentials=!0,a.onerror=function(t){e.LOGGER.error("HTTP network error",t),n._handleError(o,new s.HttpNetworkError("PlatformHttpTransmitter: Network error",t))},a.onreadystatechange=function(){if(a.readyState===y)switch(a.status){case _:n.failed_attempt=0;var t=a.getResponseHeader(C);if((0,l.exists)(t)?((0,l.exists)(n.clientId)&&n.clientId!==t&&n._handleError(o,new s.DolphinSessionError("PlatformHttpTransmitter: ClientId of the response did not match")),n.clientId=t):n._handleError(o,new s.DolphinSessionError("PlatformHttpTransmitter: Server did not send a clientId")),e.LOGGER.isLogLevelUseable(m.LogLevel.DEBUG)&&!e.LOGGER.isLogLevelUseable(m.LogLevel.TRACE))try{var i=JSON.parse(a.responseText);i.length>0&&e.LOGGER.debug("HTTP response with SUCCESS",t,i)}catch(c){e.LOGGER.error("Response could not be parsed to JSON for logging")}e.LOGGER.trace("HTTP response with SUCCESS",t,a.responseText),r(a.responseText);break;case v:e.LOGGER.error("HTTP request timeout"),n._handleError(o,new s.DolphinSessionError("PlatformHttpTransmitter: Session Timeout"));break;default:n.failed_attempt<=n.maxRetry&&(n.failed_attempt=n.failed_attempt+1),e.LOGGER.error("HTTP unsupported status, with HTTP status",a.status),n._handleError(o,new s.HttpResponseError("PlatformHttpTransmitter: HTTP Status != 200 ("+a.status+")"))}},a.open("POST",n.url),(0,l.exists)(n.clientId)&&a.setRequestHeader(C,n.clientId),(0,l.exists)(n.headersInfo))for(var i in n.headersInfo)n.headersInfo.hasOwnProperty(i)&&a.setRequestHeader(i,n.headersInfo[i]);var c=d["default"].encode(t);if(e.LOGGER.isLogLevelUseable(m.LogLevel.DEBUG)&&!e.LOGGER.isLogLevelUseable(m.LogLevel.TRACE))for(var u=0;u<t.length;u++){var f=t[u];f.id===p.VALUE_CHANGED_COMMAND_ID&&e.LOGGER.debug("send",f,c)}e.LOGGER.trace("send",t,c),n.failed_attempt>n.maxRetry?setTimeout(function(){a.send(c)},n.timeout):a.send(c)})}},{key:"transmit",value:function(e,t){var n=this;this._send(e).then(function(e){if(e.trim().length>0)try{var r=d["default"].decode(e);t(r)}catch(o){n.emit("error",new s.DolphinRemotingError("PlatformHttpTransmitter: Parse error: (Incorrect response = "+e+")")),t([])}else n.emit("error",new s.DolphinRemotingError("PlatformHttpTransmitter: Empty response")),t([])})["catch"](function(e){n.emit("error",e),t([])})}},{key:"signal",value:function(e){var t=this;this._send([e])["catch"](function(e){return t.emit("error",e)})}}]),e}();n["default"]=b,b.LOGGER=m.LoggerFactory.getLogger("PlatformHttpTransmitter"),(0,c["default"])(b.prototype)},{"./commands/codec":104,"./commands/commandConstants":106,"./errors":126,"./logging":130,"./remotingErrorHandler":136,"./utils":137,
"emitter-component":92}],136:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("./logging"),i=function(){function e(){r(this,e)}return o(e,[{key:"onError",value:function(t){e.LOGGER.error(t)}}]),e}();n["default"]=i,i.LOGGER=a.LoggerFactory.getLogger("RemotingErrorHandler")},{"./logging":130}],137:[function(e,t,n){"use strict";function r(e){return"undefined"!=typeof e&&null!==e}function o(e){i=e}function a(e,t){if(!r(e))throw new Error("The parameter "+t+" is mandatory in "+i)}Object.defineProperty(n,"__esModule",{value:!0}),n.exists=r,n.checkMethod=o,n.checkParam=a;var i},{}]},{},[98])(98)});
//# sourceMappingURL=dolphin-platform.min.js.map
