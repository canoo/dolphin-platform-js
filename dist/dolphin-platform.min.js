!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.dolphin=t():e.dolphin=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=79)}([function(e,t,n){"use strict";var r;function o(e){return void 0!==e&&null!==e}t.c=o,t.a=function(e){r=e},t.b=function(e,t){if(!o(e))throw new Error("The parameter "+t+" is mandatory in "+r)}},function(e,t,n){"use strict";t.b="AttributeMetadataChanged";t.c="CallAction";t.d="ChangeAttributeMetadata";t.f="CreateContext";t.g="CreateController";t.h="CreatePresentationModel";t.i="DeletePresentationModel";t.j="DestroyContext";t.k="DestroyController";t.m="InterruptLongPoll";t.s="PresentationModelDeleted";t.t="StartLongPoll";t.v="ValueChanged";t.l="id";t.a="a_id";t.q="p_id";t.e="c_id";t.r="t";t.n="n";t.u="v";t.o="p";t.p="a"},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(61)("wks"),o=n(34),a=n(2).Symbol,i="function"==typeof a;(e.exports=function(e){return r[e]||(r[e]=i&&a[e]||(i?a:o)("Symbol."+e))}).store=r},function(e,t,n){var r=n(2),o=n(6),a=n(7),i=n(8),s="prototype",c=function(e,t,n){var l,d,u,h=e&c.F,f=e&c.G,p=e&c.S,m=e&c.P,b=e&c.B,v=e&c.W,y=f?o:o[t]||(o[t]={}),g=y[s],C=f?r:p?r[t]:(r[t]||{})[s];f&&(n=t);for(l in n)(d=!h&&C&&void 0!==C[l])&&l in y||(u=d?C[l]:n[l],y[l]=f&&"function"!=typeof C[l]?n[l]:b&&d?a(u,r):v&&C[l]==u?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[s]=e[s],t}(u):m&&"function"==typeof u?a(Function.call,u):u,m&&((y.virtual||(y.virtual={}))[l]=u,e&c.R&&g&&!g[l]&&i(g,l,u)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){var n=e.exports={version:"2.5.3"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(12);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(9),o=n(58);e.exports=n(11)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(10),o=n(93),a=n(94),i=Object.defineProperty;t.f=n(11)?Object.defineProperty:function(e,t,n){if(r(e),t=a(t,!0),r(n),o)try{return i(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(5);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports=!n(19)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){e.exports={}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(7),o=n(106),a=n(107),i=n(10),s=n(32),c=n(108),l={},d={};(t=e.exports=function(e,t,n,u,h){var f,p,m,b,v=h?function(){return e}:c(e),y=r(n,u,t?2:1),g=0;if("function"!=typeof v)throw TypeError(e+" is not iterable!");if(a(v)){for(f=s(e.length);f>g;g++)if((b=t?y(i(p=e[g])[0],p[1]):y(e[g]))===l||b===d)return b}else for(m=v.call(e);!(p=m.next()).done;)if((b=o(m,y,p.value,t))===l||b===d)return b}).BREAK=l,t.RETURN=d},function(e,t,n){"use strict";t.k="string";t.f=0;t.c=1;t.p=2;t.j=3;t.n=4;t.i=5;t.g=6;t.b=7;t.q=8;t.e=9;t.h=10;t.d=11;t.l=55;t.m=52;t.r=54;t.a="ADDED";t.o="REMOVED"},function(e,t,n){"use strict";var r=n(46),o=n(47),a=n(44),i=n(51),s=n(50),c=n(54),l=n(52),d=n(48),u=n(49),h=n(53),f=n(42),p=n(45),m=n(43);t.a=class{static createCreateContextCommand(){return new r.a}static createCreateControllerCommand(e,t){const n=new o.a;return n.init(e,t),n}static createCallActionCommand(e,t,n){const r=new a.a;return r.init(e,t,n),r}static createDestroyControllerCommand(e){const t=new i.a;return t.init(e),t}static createDestroyContextCommand(){return new s.a}static createStartLongPollCommand(){return new c.a}static createInterruptLongPollCommand(){return new l.a}static createCreatePresentationModelCommand(e){const t=new d.a;return t.init(e),t}static createDeletePresentationModelCommand(e){const t=new u.a;return t.init(e),t}static createPresentationModelDeletedCommand(e){let t=new h.a;return t.init(e),t}static createValueChangedCommand(e,t){let n=new f.a;return n.init(e,t),n}static createChangeAttributeMetadataCommand(e,t,n){let r=new p.a;return r.init(e,t,n),r}static createAttributeMetadataChangedCommand(e,t,n){let r=new m.a;return r.init(e,t,n),r}}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var r=n(9).f,o=n(13),a=n(3)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,a)&&r(e,a,{configurable:!0,value:t})}},function(e,t,n){"use strict";n.d(t,"b",function(){return h}),n.d(t,"c",function(){return f}),n.d(t,"a",function(){return l});var r=n(40),o=n.n(r),a=n(0),i=n(18),s=n(17);const c="@@@ DOLPHIN_BEAN @@@",l="@@@ CONTROLLER_ACTION_CALL_BEAN @@@",d="@@@ HIGHLANDER_BEAN @@@",u="@DP:LS@",h="@@@ SOURCE_SYSTEM @@@",f="client",p="server";t.d=class{constructor(e,t,n,r){Object(a.a)("Connector(url, dolphin, classRepository, config)"),Object(a.b)(e,"url"),Object(a.b)(t,"dolphin"),Object(a.b)(n,"classRepository");let i=this;this.dolphin=t,this.config=r,this.classRepository=n,this.highlanderPMResolver=function(){},this.highlanderPMPromise=new o.a(function(e){i.highlanderPMResolver=e}),t.getClientModelStore().onModelStoreChange(e=>{let t=e.clientPresentationModel,n=t.findAttributeByPropertyName(h);Object(a.c)(n)&&n.value===p&&(e.eventType===s.a?i.onModelAdded(t):e.eventType===s.o&&i.onModelRemoved(t))})}connect(){this.dolphin.startPushListening(i.a.createStartLongPollCommand(),i.a.createInterruptLongPollCommand())}onModelAdded(e){switch(Object(a.a)("Connector.onModelAdded(model)"),Object(a.b)(e,"model"),e.presentationModelType){case l:break;case c:this.classRepository.registerClass(e);break;case d:this.highlanderPMResolver(e);break;case u:this.classRepository.spliceListEntry(e),this.dolphin.deletePresentationModel(e);break;default:this.classRepository.load(e)}}onModelRemoved(e){switch(Object(a.a)("Connector.onModelRemoved(model)"),Object(a.b)(e,"model"),e.presentationModelType){case c:this.classRepository.unregisterClass(e);break;case u:break;default:this.classRepository.unload(e)}}invoke(e){Object(a.a)("Connector.invoke(command)"),Object(a.b)(e,"command");var t=this.dolphin;return new o.a(n=>{t.send(e,{onFinished:()=>{n()}})})}getHighlanderPM(){return this.highlanderPMPromise}}},function(e,t,n){"use strict";var r=n(0),o=n(17),a=n(1),i=n(42),s=n(43),c=n(44),l=n(45),d=n(46),u=n(47),h=n(48),f=n(49),p=n(50),m=n(51),b=n(52),v=n(53),y=n(54),g=n(85);t.a=class{static _encodeAttributeMetadataChangedCommand(e){Object(r.a)("Codec.encodeAttributeMetadataChangedCommand"),Object(r.b)(e,"command"),Object(r.b)(e.attributeId,"command.attributeId"),Object(r.b)(e.metadataName,"command.metadataName");let t={};return t[a.l]=a.b,t[a.a]=e.attributeId,t[a.n]=e.metadataName,t[a.u]=e.value,t}static _decodeAttributeMetadataChangedCommand(e){Object(r.a)("Codec.decodeAttributeMetadataChangedCommand"),Object(r.b)(e,"jsonCommand"),Object(r.b)(e[a.a],"jsonCommand[ATTRIBUTE_ID]"),Object(r.b)(e[a.n],"jsonCommand[NAME]");let t=new s.a;return t.attributeId=e[a.a],t.metadataName=e[a.n],t.value=e[a.u],t}static _encodeCallActionCommand(e){Object(r.a)("Codec.encodeCallActionCommand"),Object(r.b)(e,"command"),Object(r.b)(e.controllerid,"command.controllerid"),Object(r.b)(e.actionName,"command.actionName"),Object(r.b)(e.params,"command.params");let t={};return t[a.l]=a.c,t[a.e]=e.controllerid,t[a.n]=e.actionName,t[a.o]=e.params.map(e=>{let t={};return t[a.n]=e.name,Object(r.c)(e.value)&&(t[a.u]=e.value),t}),t}static _decodeCallActionCommand(e){Object(r.a)("Codec.decodeCallActionCommand"),Object(r.b)(e,"jsonCommand"),Object(r.b)(e[a.e],"jsonCommand[CONTROLLER_ID]"),Object(r.b)(e[a.n],"jsonCommand[NAME]"),Object(r.b)(e[a.o],"jsonCommand[PARAMS]");let t=new c.a;return t.controllerid=e[a.e],t.actionName=e[a.n],t.params=e[a.o].map(e=>({name:e[a.n],value:Object(r.c)(e[a.u])?e[a.u]:null})),t}static _encodeChangeAttributeMetadataCommand(e){Object(r.a)("Codec.encodeChangeAttributeMetadataCommand"),Object(r.b)(e,"command"),Object(r.b)(e.attributeId,"command.attributeId"),Object(r.b)(e.metadataName,"command.metadataName");let t={};return t[a.l]=a.d,t[a.a]=e.attributeId,t[a.n]=e.metadataName,t[a.u]=e.value,t}static _decodeChangeAttributeMetadataCommand(e){Object(r.a)("Codec.decodeChangeAttributeMetadataCommand"),Object(r.b)(e,"jsonCommand"),Object(r.b)(e[a.a],"jsonCommand[ATTRIBUTE_ID]"),Object(r.b)(e[a.n],"jsonCommand[NAME]");let t=new l.a;return t.attributeId=e[a.a],t.metadataName=e[a.n],t.value=e[a.u],t}static _encodeCreateContextCommand(e){Object(r.a)("Codec.encodeCreateContextCommand"),Object(r.b)(e,"command");let t={};return t[a.l]=a.f,t}static _decodeCreateContextCommand(e){return Object(r.a)("Codec.decodeCreateContextCommand"),Object(r.b)(e,"jsonCommand"),new d.a}static _encodeCreateControllerCommand(e){Object(r.a)("Codec._encodeCreateControllerCommand"),Object(r.b)(e,"command"),Object(r.b)(e.controllerName,"command.controllerName");let t={};return t[a.l]=a.g,t[a.n]=e.controllerName,t[a.e]=e.parentControllerId,t}static _decodeCreateControllerCommand(e){Object(r.a)("Codec._decodeCreateControllerCommand"),Object(r.b)(e,"jsonCommand"),Object(r.b)(e[a.n],"jsonCommand[NAME]"),Object(r.b)(e[a.e],"jsonCommand[CONTROLLER_ID]");let t=new u.a;return t.controllerName=e[a.n],t.parentControllerId=e[a.e],t}static _encodeCreatePresentationModelCommand(e){Object(r.a)("Codec.encodeCreatePresentationModelCommand"),Object(r.b)(e,"command"),Object(r.b)(e.pmId,"command.pmId"),Object(r.b)(e.pmType,"command.pmType");let t={};return t[a.l]=a.h,t[a.q]=e.pmId,t[a.r]=e.pmType,t[a.p]=e.attributes.map(e=>{let t={};return t[a.n]=e.propertyName,t[a.a]=e.id,Object(r.c)(e.value)&&(t[a.u]=e.value),t}),t}static _decodeCreatePresentationModelCommand(e){Object(r.a)("Codec.decodeCreatePresentationModelCommand"),Object(r.b)(e,"jsonCommand"),Object(r.b)(e[a.q],"jsonCommand[PM_ID]"),Object(r.b)(e[a.r],"jsonCommand[PM_TYPE]");let t=new h.a;return t.pmId=e[a.q],t.pmType=e[a.r],t.attributes=e[a.p].map(e=>({propertyName:e[a.n],id:e[a.a],value:Object(r.c)(e[a.u])?e[a.u]:null})),t}static _encodeDeletePresentationModelCommand(e){Object(r.a)("Codec._encodeDeletePresentationModelCommand"),Object(r.b)(e,"command"),Object(r.b)(e.pmId,"command.pmId");let t={};return t[a.l]=a.i,t[a.q]=e.pmId,t}static _decodeDeletePresentationModelCommand(e){Object(r.a)("Codec._decodeDeletePresentationModelCommand"),Object(r.b)(e,"jsonCommand"),Object(r.b)(e[a.q],"jsonCommand[PM_ID]");let t=new f.a;return t.pmId=e[a.q],t}static _encodeDestroyContextCommand(e){Object(r.a)("Codec._encodeDestroyContextCommand"),Object(r.b)(e,"command");let t={};return t[a.l]=a.j,t}static _decodeDestroyContextCommand(e){return Object(r.a)("Codec._decodeDestroyContextCommand"),Object(r.b)(e,"jsonCommand"),new p.a}static _encodeDestroyControllerCommand(e){Object(r.a)("Codec._encodeDestroyControllerCommand"),Object(r.b)(e,"command"),Object(r.b)(e.controllerId,"command.controllerId");let t={};return t[a.l]=a.k,t[a.e]=e.controllerId,t}static _decodeDestroyControllerCommand(e){Object(r.a)("Codec._decodeDestroyControllerCommand"),Object(r.b)(e,"jsonCommand"),Object(r.b)(e[a.e],"jsonCommand[CONTROLLER_ID]");let t=new m.a;return t.controllerId=e[a.e],t}static _encodeInterruptLongPollCommand(e){Object(r.a)("Codec._encodeInterruptLongPollCommand"),Object(r.b)(e,"command");let t={};return t[a.l]=a.m,t}static _decodeInterruptLongPollCommand(e){return Object(r.a)("Codec._decodeInterruptLongPollCommand"),Object(r.b)(e,"jsonCommand"),new b.a}static _encodePresentationModelDeletedCommand(e){Object(r.a)("Codec._encodePresentationModelDeletedCommand"),Object(r.b)(e,"command"),Object(r.b)(e.pmId,"command.pmId");let t={};return t[a.l]=a.s,t[a.q]=e.pmId,t}static _decodePresentationModelDeletedCommand(e){Object(r.a)("Codec._decodePresentationModelDeletedCommand"),Object(r.b)(e,"jsonCommand"),Object(r.b)(e[a.q],"jsonCommand[PM_ID]");let t=new v.a;return t.pmId=e[a.q],t}static _encodeStartLongPollCommand(e){Object(r.a)("Codec._encodeStartLongPollCommand"),Object(r.b)(e,"command");let t={};return t[a.l]=a.t,t}static _decodeStartLongPollCommand(e){return Object(r.a)("Codec._decodeStartLongPollCommand"),Object(r.b)(e,"jsonCommand"),new y.a}static _encodeValueChangedCommand(e){Object(r.a)("Codec.encodeValueChangedCommand"),Object(r.b)(e,"command"),Object(r.b)(e.attributeId,"command.attributeId");let t={};return t[a.l]=a.v,t[a.a]=e.attributeId,Object(r.c)(e.newValue)&&(t[a.u]=e.newValue),t}static _decodeValueChangedCommand(e){Object(r.a)("Codec.decodeValueChangedCommand"),Object(r.b)(e,"jsonCommand"),Object(r.b)(e[a.a],"jsonCommand[ATTRIBUTE_ID]");let t=new i.a;return t.attributeId=e[a.a],Object(r.c)(e[a.u])?t.newValue=e[a.u]:t.newValue=null,t}static encode(e){Object(r.a)("Codec.encode"),Object(r.b)(e,"commands");let t=this;return JSON.stringify(e.map(e=>{if(e.id===a.b)return t._encodeAttributeMetadataChangedCommand(e);if(e.id===a.c)return t._encodeCallActionCommand(e);if(e.id===a.d)return t._encodeChangeAttributeMetadataCommand(e);if(e.id===a.f)return t._encodeCreateContextCommand(e);if(e.id===a.g)return t._encodeCreateControllerCommand(e);if(e.id===a.h)return t._encodeCreatePresentationModelCommand(e);if(e.id===a.i)return t._encodeDeletePresentationModelCommand(e);if(e.id===a.j)return t._encodeDestroyContextCommand(e);if(e.id===a.k)return t._encodeDestroyControllerCommand(e);if(e.id===a.m)return t._encodeInterruptLongPollCommand(e);if(e.id===a.s)return t._encodePresentationModelDeletedCommand(e);if(e.id===a.t)return t._encodeStartLongPollCommand(e);if(e.id===a.v)return t._encodeValueChangedCommand(e);throw new g.a("Command of type "+e.id+" can not be handled")}))}static decode(e){if(Object(r.a)("Codec.decode"),Object(r.b)(e,"transmitted"),typeof e===o.k){let t=this;return JSON.parse(e).map(function(e){if(e.id===a.b)return t._decodeAttributeMetadataChangedCommand(e);if(e.id===a.c)return t._decodeCallActionCommand(e);if(e.id===a.d)return t._decodeChangeAttributeMetadataCommand(e);if(e.id===a.f)return t._decodeCreateContextCommand(e);if(e.id===a.g)return t._decodeCreateControllerCommand(e);if(e.id===a.h)return t._decodeCreatePresentationModelCommand(e);if(e.id===a.i)return t._decodeDeletePresentationModelCommand(e);if(e.id===a.j)return t._decodeDestroyContextCommand(e);if(e.id===a.k)return t._decodeDestroyControllerCommand(e);if(e.id===a.m)return t._decodeInterruptLongPollCommand(e);if(e.id===a.s)return t._decodePresentationModelDeletedCommand(e);if(e.id===a.t)return t._decodeStartLongPollCommand(e);if(e.id===a.v)return t._decodeValueChangedCommand(e);throw new g.a("Command of type "+e.id+" can not be handled")})}throw new g.a("Can not decode data that is not of type string")}}},function(e,t,n){"use strict";t.a=class{constructor(){this.eventHandlers=[]}onEvent(e){this.eventHandlers.push(e)}trigger(e){this.eventHandlers.forEach(t=>t(e))}}},function(e,t,n){n(25),n(26),n(35),n(105),n(113),n(115),n(116),e.exports=n(6).Map},function(e,t){},function(e,t,n){"use strict";var r=n(92)(!0);n(29)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){"use strict";var r=n(57),o=n(4),a=n(95),i=n(8),s=n(13),c=n(14),l=n(96),d=n(20),u=n(102),h=n(3)("iterator"),f=!([].keys&&"next"in[].keys()),p="values",m=function(){return this};e.exports=function(e,t,n,b,v,y,g){l(n,t,b);var C,O,j,w=function(e){if(!f&&e in A)return A[e];switch(e){case"keys":case p:return function(){return new n(this,e)}}return function(){return new n(this,e)}},_=t+" Iterator",M=v==p,P=!1,A=e.prototype,E=A[h]||A["@@iterator"]||v&&A[v],x=!f&&E||w(v),S=v?M?w("entries"):x:void 0,I="Array"==t&&A.entries||E;if(I&&(j=u(I.call(new e)))!==Object.prototype&&j.next&&(d(j,_,!0),r||s(j,h)||i(j,h,m)),M&&E&&E.name!==p&&(P=!0,x=function(){return E.call(this)}),r&&!g||!f&&!P&&A[h]||i(A,h,x),c[t]=x,c[_]=m,v)if(C={values:M?x:w(p),keys:y?x:w("keys"),entries:S},g)for(O in C)O in A||a(A,O,C[O]);else o(o.P+o.F*(f||P),t,C);return C}},function(e,t,n){var r=n(5),o=n(2).document,a=r(o)&&r(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},function(e,t,n){var r=n(60),o=n(28);e.exports=function(e){return r(o(e))}},function(e,t,n){var r=n(27),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t,n){var r=n(61)("keys"),o=n(34);e.exports=function(e){return r[e]||(r[e]=o(e))}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){n(103);for(var r=n(2),o=n(8),a=n(14),i=n(3)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),c=0;c<s.length;c++){var l=s[c],d=r[l],u=d&&d.prototype;u&&!u[i]&&o(u,i,l),a[l]=a.Array}},function(e,t,n){var r=n(8);e.exports=function(e,t,n){for(var o in t)n&&e[o]?e[o]=t[o]:r(e,o,t[o]);return e}},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(15),o=n(3)("toStringTag"),a="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?n:a?r(t):"Object"==(i=r(t))&&"function"==typeof t.callee?"Arguments":i}},function(e,t,n){var r=n(5);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){n(25),n(26),n(35),n(117),n(121),n(122),e.exports=n(6).Promise},function(e,t,n){"use strict";var r=n(12);e.exports.f=function(e){return new function(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=r(t),this.reject=r(n)}(e)}},function(e,t,n){"use strict";var r=n(1),o=n(0);t.a=class{constructor(){this.id=r.v}init(e,t){Object(o.a)("ValueChangedCommand.init()"),Object(o.b)(e,"attributeId"),this.attributeId=e,this.newValue=t}}},function(e,t,n){"use strict";var r=n(1),o=n(0);t.a=class{constructor(){this.id=r.b}init(e,t,n){Object(o.a)("AttributeMetadataChangedCommand.init()"),Object(o.b)(e,"attributeId"),Object(o.b)(t,"metadataName"),this.attributeId=e,this.metadataName=t,this.value=n}}},function(e,t,n){"use strict";var r=n(1),o=n(0);t.a=class{constructor(){this.id=r.c}init(e,t,n){Object(o.a)("CreateControllerCommand.init()"),Object(o.b)(e,"controllerid"),Object(o.b)(t,"actionName"),this.controllerid=e,this.actionName=t,this.params=n}}},function(e,t,n){"use strict";var r=n(1),o=n(0);t.a=class{constructor(){this.id=r.d}init(e,t,n){Object(o.a)("ChangeAttributeMetadataCommand.init()"),Object(o.b)(e,"attributeId"),Object(o.b)(t,"metadataName"),this.attributeId=e,this.metadataName=t,this.value=n}}},function(e,t,n){"use strict";var r=n(1);t.a=class{constructor(){this.id=r.f}}},function(e,t,n){"use strict";var r=n(1),o=n(0);t.a=class{constructor(){this.id=r.g}init(e,t){Object(o.a)("CreateControllerCommand.init()"),Object(o.b)(e,"controllerName"),this.controllerName=e,this.parentControllerId=t}}},function(e,t,n){"use strict";var r=n(1),o=n(0);t.a=class{constructor(){this.id=r.h}init(e){Object(o.a)("CreatePresentationModelCommand.init()"),Object(o.b)(e,"presentationModel"),this.attributes=[],this.clientSideOnly=!1,this.pmId=e.id,this.pmType=e.presentationModelType;var t=this;e.getAttributes().forEach(function(e){t.attributes.push({propertyName:e.propertyName,id:e.id,value:e.getValue()})})}}},function(e,t,n){"use strict";var r=n(1),o=n(0);t.a=class{constructor(){this.id=r.i}init(e){Object(o.a)("DeletePresentationModelCommand.init()"),Object(o.b)(e,"pmId"),this.pmId=e}}},function(e,t,n){"use strict";var r=n(1);t.a=class{constructor(){this.id=r.j}}},function(e,t,n){"use strict";var r=n(1),o=n(0);t.a=class{constructor(){this.id=r.k}init(e){Object(o.a)("DestroyControllerCommand.init()"),Object(o.b)(e,"controllerId"),this.controllerId=e}}},function(e,t,n){"use strict";var r=n(1);t.a=class{constructor(){this.id=r.m}}},function(e,t,n){"use strict";var r=n(1),o=n(0);t.a=class{constructor(){this.id=r.s}init(e){Object(o.a)("PresentationModelDeletedCommand.init()"),Object(o.b)(e,"pmId"),this.pmId=e}}},function(e,t,n){"use strict";var r=n(1);t.a=class{constructor(){this.id=r.t}}},function(e,t,n){"use strict";var r=n(23),o=0;class a{constructor(e,t){this.id=e,this.presentationModelType=t,this.attributes=[],this.clientSideOnly=!1,this.dirty=!1,this.id=void 0!==e&&null!=e?e:(o++).toString(),this.invalidBus=new r.a,this.dirtyValueChangeBus=new r.a}copy(){var e=new a(null,this.presentationModelType);return e.clientSideOnly=!0,this.getAttributes().forEach(t=>{var n=t.copy();e.addAttribute(n)}),e}addAttributes(e){!e||e.length<1||e.forEach(e=>{this.addAttribute(e)})}addAttribute(e){if(e&&!(this.attributes.indexOf(e)>-1)){if(this.findAttributeByPropertyName(e.propertyName))throw new Error("There already is an attribute with property name: "+e.propertyName+" in presentation model with id: "+this.id);if(e.getQualifier()&&this.findAttributeByQualifier(e.getQualifier()))throw new Error("There already is an attribute with qualifier: "+e.getQualifier()+" in presentation model with id: "+this.id);e.setPresentationModel(this),this.attributes.push(e),e.onValueChange(()=>{this.invalidBus.trigger({source:this})})}}onInvalidated(e){this.invalidBus.onEvent(e)}getAttributes(){return this.attributes.slice(0)}getAt(e){return this.findAttributeByPropertyName(e)}findAllAttributesByPropertyName(e){var t=[];return e?(this.attributes.forEach(n=>{n.propertyName==e&&t.push(n)}),t):null}findAttributeByPropertyName(e){if(!e)return null;for(var t=0;t<this.attributes.length;t++)if(this.attributes[t].propertyName==e)return this.attributes[t];return null}findAttributeByQualifier(e){if(!e)return null;for(var t=0;t<this.attributes.length;t++)if(this.attributes[t].getQualifier()==e)return this.attributes[t];return null}findAttributeById(e){if(!e)return null;for(var t=0;t<this.attributes.length;t++)if(this.attributes[t].id==e)return this.attributes[t];return null}syncWith(e){this.attributes.forEach(t=>{var n=e.getAt(t.propertyName);n&&t.syncWith(n)})}}t.a=a},function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"a",function(){return i});var r=n(24),o=n.n(r);const a={internalLog(){let e=Array.from(arguments);e.shift()(e.shift(),e.shift().text,...e)},loggers:new o.a},i={NONE:{name:"NONE",text:"NONE "},ALL:{name:"ALL",text:"ALL  "},TRACE:{name:"TRACE",text:"TRACE"},DEBUG:{name:"DEBUG",text:"DEBUG"},INFO:{name:"INFO",text:"INFO "},WARN:{name:"WARN",text:"WARN "},ERROR:{name:"ERROR",text:"ERROR "}};class s{constructor(e){this.name=e?"DP."+e:"DP",this.logLevel=i.INFO}trace(){this.isLogLevel(i.TRACE)&&a.internalLog(console.log,this.name,i.TRACE,...arguments)}debug(){this.isLogLevel(i.DEBUG)&&a.internalLog(console.debug,this.name,i.DEBUG,...arguments)}info(){this.isLogLevel(i.INFO)&&a.internalLog(console.log,this.name,i.INFO,...arguments)}warn(){this.isLogLevel(i.WARN)&&a.internalLog(console.warn,this.name,i.WARN,...arguments)}error(){this.isLogLevel(i.ERROR)&&a.internalLog(console.error,this.name,i.ERROR,...arguments)}getLogLevel(){return this.logLevel}setLogLevel(e){this.logLevel=e}isLogLevel(e){return this.logLevel!==i.NONE&&(this.logLevel===i.ALL||(this.logLevel===i.TRACE||(this.logLevel===i.DEBUG&&e!==i.TRACE||(this.logLevel===i.INFO&&e!==i.TRACE&&e!==i.DEBUG||(this.logLevel===i.WARN&&e!==i.TRACE&&e!==i.DEBUG&&e!==i.INFO||this.logLevel===i.ERROR&&e!==i.TRACE&&e!==i.DEBUG&&e!==i.INFO&&e!==i.WARN)))))}}class c{static getLogger(e,t){if(!e)return new s(t);let n=a.loggers.get(e);if(n)return n;let r=new s(t);return a.loggers.set(e,r),r}}},function(e,t){e.exports=!0},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(10),o=n(97),a=n(62),i=n(33)("IE_PROTO"),s=function(){},c="prototype",l=function(){var e,t=n(30)("iframe"),r=a.length;for(t.style.display="none",n(63).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;r--;)delete l[c][a[r]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(s[c]=r(e),n=new s,s[c]=null,n[i]=e):n=l(),void 0===t?n:o(n,t)}},function(e,t,n){var r=n(15);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(2),o="__core-js_shared__",a=r[o]||(r[o]={});e.exports=function(e){return a[e]||(a[e]={})}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(2).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(28);e.exports=function(e){return Object(r(e))}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var r=n(9).f,o=n(59),a=n(36),i=n(7),s=n(37),c=n(16),l=n(29),d=n(65),u=n(67),h=n(11),f=n(68).fastKey,p=n(39),m=h?"_s":"size",b=function(e,t){var n,r=f(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,l){var d=e(function(e,r){s(e,d,t,"_i"),e._t=t,e._i=o(null),e._f=void 0,e._l=void 0,e[m]=0,void 0!=r&&c(r,n,e[l],e)});return a(d.prototype,{clear:function(){for(var e=p(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var n=p(this,t),r=b(n,e);if(r){var o=r.n,a=r.p;delete n._i[r.i],r.r=!0,a&&(a.n=o),o&&(o.p=a),n._f==r&&(n._f=o),n._l==r&&(n._l=a),n[m]--}return!!r},forEach:function(e){p(this,t);for(var n,r=i(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!b(p(this,t),e)}}),h&&r(d.prototype,"size",{get:function(){return p(this,t)[m]}}),d},def:function(e,t,n){var r,o,a=b(e,t);return a?a.v=n:(e._l=a={i:o=f(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=a),r&&(r.n=a),e[m]++,"F"!==o&&(e._i[o]=a)),e},getEntry:b,setStrong:function(e,t,n){l(e,t,function(e,n){this._t=p(e,t),this._k=n,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?d(0,"keys"==t?n.k:"values"==t?n.v:[n.k,n.v]):(e._t=void 0,d(1))},n?"entries":"values",!n,!0),u(t)}}},function(e,t,n){"use strict";var r=n(2),o=n(6),a=n(9),i=n(11),s=n(3)("species");e.exports=function(e){var t="function"==typeof o[e]?o[e]:r[e];i&&t&&!t[s]&&a.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(34)("meta"),o=n(5),a=n(13),i=n(9).f,s=0,c=Object.isExtensible||function(){return!0},l=!n(19)(function(){return c(Object.preventExtensions({}))}),d=function(e){i(e,r,{value:{i:"O"+ ++s,w:{}}})},u=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,r)){if(!c(e))return"F";if(!t)return"E";d(e)}return e[r].i},getWeak:function(e,t){if(!a(e,r)){if(!c(e))return!0;if(!t)return!1;d(e)}return e[r].w},onFreeze:function(e){return l&&u.NEED&&c(e)&&!a(e,r)&&d(e),e}}},function(e,t,n){"use strict";var r=n(2),o=n(4),a=n(68),i=n(19),s=n(8),c=n(36),l=n(16),d=n(37),u=n(5),h=n(20),f=n(9).f,p=n(109)(0),m=n(11);e.exports=function(e,t,n,b,v,y){var g=r[e],C=g,O=v?"set":"add",j=C&&C.prototype,w={};return m&&"function"==typeof C&&(y||j.forEach&&!i(function(){(new C).entries().next()}))?(C=t(function(t,n){d(t,C,e,"_c"),t._c=new g,void 0!=n&&l(n,v,t[O],t)}),p("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in j&&(!y||"clear"!=e)&&s(C.prototype,e,function(n,r){if(d(this,C,e),!t&&y&&!u(n))return"get"==e&&void 0;var o=this._c[e](0===n?0:n,r);return t?this:o})}),y||f(C.prototype,"size",{get:function(){return this._c.size}})):(C=b.getConstructor(t,e,v,O),c(C.prototype,n),a.NEED=!0),h(C,e),w[e]=C,o(o.G+o.W+o.F,w),y||b.setStrong(C,e,v),C}},function(e,t,n){var r=n(38),o=n(114);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return o(this)}}},function(e,t,n){"use strict";var r=n(4);e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,n){"use strict";var r=n(4),o=n(12),a=n(7),i=n(16);e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,s,c=arguments[1];return o(this),(t=void 0!==c)&&o(c),void 0==e?new this:(n=[],t?(r=0,s=a(c,arguments[2],2),i(e,!1,function(e){n.push(s(e,r++))})):i(e,!1,n.push,n),new this(n))}})}},function(e,t,n){var r=n(10),o=n(12),a=n(3)("species");e.exports=function(e,t){var n,i=r(e).constructor;return void 0===i||void 0==(n=r(i)[a])?t:o(n)}},function(e,t,n){var r,o,a,i=n(7),s=n(118),c=n(63),l=n(30),d=n(2),u=d.process,h=d.setImmediate,f=d.clearImmediate,p=d.MessageChannel,m=d.Dispatch,b=0,v={},y="onreadystatechange",g=function(){var e=+this;if(v.hasOwnProperty(e)){var t=v[e];delete v[e],t()}},C=function(e){g.call(e.data)};h&&f||(h=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return v[++b]=function(){s("function"==typeof e?e:Function(e),t)},r(b),b},f=function(e){delete v[e]},"process"==n(15)(u)?r=function(e){u.nextTick(i(g,e,1))}:m&&m.now?r=function(e){m.now(i(g,e,1))}:p?(a=(o=new p).port2,o.port1.onmessage=C,r=i(a.postMessage,a,1)):d.addEventListener&&"function"==typeof postMessage&&!d.importScripts?(r=function(e){d.postMessage(e+"","*")},d.addEventListener("message",C,!1)):r=y in l("script")?function(e){c.appendChild(l("script"))[y]=function(){c.removeChild(this),g.call(e)}}:function(e){setTimeout(i(g,e,1),0)}),e.exports={set:h,clear:f}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var r=n(10),o=n(5),a=n(41);e.exports=function(e,t){if(r(e),o(t)&&t.constructor===e)return t;var n=a.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){n(25),n(26),n(35),n(126),n(127),n(128),n(129),e.exports=n(6).Set},function(e,t){function n(e){if(e)return function(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}(e)}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},n.prototype.once=function(e,t){var n=this;function r(){n.off(e,r),t.apply(this,arguments)}return this._callbacks=this._callbacks||{},r.fn=t,this.on(e,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks[e];if(!r)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var o=0;o<r.length;o++)if((n=r[o])===t||n.fn===t){r.splice(o,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n)for(var r=0,o=(n=n.slice(0)).length;r<o;++r)n[r].apply(this,t);return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(80),o=n(56);n.d(t,"createClientContext",function(){return r.b}),n.d(t,"ClientContextFactory",function(){return r.a}),n.d(t,"LoggerFactory",function(){return o.b}),n.d(t,"LogLevel",function(){return o.a})},function(e,t,n){"use strict";n.d(t,"b",function(){return f}),n.d(t,"a",function(){return h});var r=n(81),o=n(0),a=n(56),i=n(21),s=n(123),c=n(124),l=n(125),d=n(131),u=n(132);class h{constructor(){this.logger=a.b.getLogger("ClientContextFactory")}create(e,t){Object(o.a)("connect(url, config)"),Object(o.b)(e,"url"),this.logger.info("Dolphin Platform Version:","0.18.0"),this.logger.info("Creating client context",e,JSON.stringify(t));let n=Object(r.a)().url(e).reset(!1).slackMS(4).supportCORS(!0).maxBatchSize(Number.MAX_SAFE_INTEGER);Object(o.c)(t)&&(Object(o.c)(t.errorHandler)&&n.errorHandler(t.errorHandler),Object(o.c)(t.headersInfo)&&Object.keys(t.headersInfo).length>0&&n.headersInfo(t.headersInfo));let a=n.build(),h=new u.a(e,t);h.on("error",function(e){v.emit("error",e)}),a.clientConnector.transmitter=h;let f=new c.a(a),p=new s.a(f),m=new i.d(e,a,f,t),b=new l.a(a,f,m),v=new d.a(a,p,b,m);return v}}let f=(new h).create},function(e,t,n){"use strict";t.a=o;var r=n(82);function o(){return new r.a}},function(e,t,n){"use strict";var r=n(83),o=n(86),a=n(88),i=n(90),s=n(91);t.a=class{constructor(){this.reset_=!1,this.slackMS_=300,this.maxBatchSize_=50,this.supportCORS_=!1}url(e){return this.url_=e,this}reset(e){return this.reset_=e,this}slackMS(e){return this.slackMS_=e,this}maxBatchSize(e){return this.maxBatchSize_=e,this}supportCORS(e){return this.supportCORS_=e,this}errorHandler(e){return this.errorHandler_=e,this}headersInfo(e){return this.headersInfo_=e,this}build(){console.log("OpenDolphin js found");var e,t=new o.a;return e=null!=this.url_&&this.url_.length>0?new i.a(this.url_,this.reset_,"UTF-8",this.errorHandler_,this.supportCORS_,this.headersInfo_):new s.a,t.setClientConnector(new r.a(e,t,this.slackMS_,this.maxBatchSize_)),t.setClientModelStore(new a.a(t)),console.log("ClientDolphin initialized"),t}}},function(e,t,n){"use strict";var r=n(84),o=n(22),a=n(55);t.a=class{constructor(e,t,n=0,a=50){this.commandQueue=[],this.currentlySending=!1,this.pushEnabled=!1,this.waiting=!1,this.transmitter=e,this.clientDolphin=t,this.slackMS=n,this.codec=new o.a,this.commandBatcher=new r.a(!0,a)}setCommandBatcher(e){this.commandBatcher=e}setPushEnabled(e){this.pushEnabled=e}setPushListener(e){this.pushListener=e}setReleaseCommand(e){this.releaseCommand=e}send(e,t){this.commandQueue.push({command:e,handler:t}),this.currentlySending?this.release():this.doSendNext()}doSendNext(){if(this.commandQueue.length<1){if(!this.pushEnabled)return void(this.currentlySending=!1);this.enqueuePushCommand()}this.currentlySending=!0;var e=this.commandBatcher.batch(this.commandQueue);if(e.length>0){var t=e[e.length-1].handler,n=e.map(e=>e.command);this.transmitter.transmit(n,e=>{var n=[];e.forEach(e=>{var t=this.handle(e);t&&n.push(t)}),t&&t.onFinished(n),setTimeout(()=>this.doSendNext(),this.slackMS)})}else setTimeout(()=>this.doSendNext(),this.slackMS)}handle(e){return"DeletePresentationModel"==e.id?this.handleDeletePresentationModelCommand(e):"CreatePresentationModel"==e.id?this.handleCreatePresentationModelCommand(e):"ValueChanged"==e.id?this.handleValueChangedCommand(e):"AttributeMetadataChanged"==e.id?this.handleAttributeMetadataChangedCommand(e):(console.log("Cannot handle, unknown command "+e),null)}handleDeletePresentationModelCommand(e){var t=this.clientDolphin.findPresentationModelById(e.pmId);return t?(this.clientDolphin.getClientModelStore().deletePresentationModel(t,!0),t):null}handleCreatePresentationModelCommand(e){if(this.clientDolphin.getClientModelStore().containsPresentationModel(e.pmId))throw new Error("There already is a presentation model with id "+e.pmId+"  known to the client.");var t=[];e.attributes.forEach(e=>{var n=this.clientDolphin.attribute(e.propertyName,e.qualifier,e.value);e.id&&e.id.match(".*S$")&&(n.id=e.id),t.push(n)});var n=new a.a(e.pmId,e.pmType);return n.addAttributes(t),e.clientSideOnly&&(n.clientSideOnly=!0),this.clientDolphin.getClientModelStore().add(n,!1),this.clientDolphin.updatePresentationModelQualifier(n),n}handleValueChangedCommand(e){var t=this.clientDolphin.getClientModelStore().findAttributeById(e.attributeId);return t?t.getValue()==e.newValue?null:(t.setValueFromServer(e.newValue),null):(console.log("attribute with id "+e.attributeId+" not found, cannot update to new value "+e.newValue),null)}handleAttributeMetadataChangedCommand(e){var t=this.clientDolphin.getClientModelStore().findAttributeById(e.attributeId);return t?(t[e.metadataName]=e.value,null):null}listen(){this.pushEnabled&&(this.waiting||this.currentlySending||this.doSendNext())}enqueuePushCommand(){var e=this;this.waiting=!0,this.commandQueue.push({command:this.pushListener,handler:{onFinished:function(){e.waiting=!1},onFinishedData:null}})}release(){this.waiting&&(this.waiting=!1,this.transmitter.signal(this.releaseCommand))}}},function(e,t,n){"use strict";var r=n(1);t.a=class{constructor(e=!0,t=50){this.folding=e,this.maxBatchSize=t}batch(e){let t=[],n=0;for(;e[n]&&n<=this.maxBatchSize;){const o=e[n];if(n++,this.folding?o.command.id==r.v&&t.length>0&&t[t.length-1].command.id==r.v&&o.command.attributeId==t[t.length-1].command.attributeId?t[t.length-1].command.newValue=o.command.newValue:o.command.id==r.s||t.push(o):t.push(o),o.handler)break}return e.splice(0,n),t}}},function(e,t,n){"use strict";t.a=class extends Error{constructor(e){super(e)}}},function(e,t,n){"use strict";var r=n(87),o=n(55);t.a=class{constructor(){}setClientConnector(e){this.clientConnector=e}getClientConnector(){return this.clientConnector}send(e,t){this.clientConnector.send(e,t)}attribute(e,t,n){return new r.a(e,t,n)}presentationModel(e,t,...n){var r=new o.a(e,t);return n&&n.length>0&&n.forEach(e=>{r.addAttribute(e)}),this.getClientModelStore().add(r,!0),r}setClientModelStore(e){this.clientModelStore=e}getClientModelStore(){return this.clientModelStore}listPresentationModelIds(){return this.getClientModelStore().listPresentationModelIds()}listPresentationModels(){return this.getClientModelStore().listPresentationModels()}findAllPresentationModelByType(e){return this.getClientModelStore().findAllPresentationModelByType(e)}getAt(e){return this.findPresentationModelById(e)}findPresentationModelById(e){return this.getClientModelStore().findPresentationModelById(e)}deletePresentationModel(e){this.getClientModelStore().deletePresentationModel(e,!0)}updatePresentationModelQualifier(e){e.getAttributes().forEach(e=>{this.updateAttributeQualifier(e)})}updateAttributeQualifier(e){e.getQualifier()&&this.getClientModelStore().findAllAttributesByQualifier(e.getQualifier()).forEach(t=>{t.setValue(e.getValue())})}startPushListening(e,t){this.clientConnector.setPushListener(e),this.clientConnector.setReleaseCommand(t),this.clientConnector.setPushEnabled(!0),setTimeout(()=>{this.clientConnector.listen()},0)}stopPushListening(){this.clientConnector.setPushEnabled(!1)}}},function(e,t,n){"use strict";var r=n(23);class o{constructor(e,t,n){this.propertyName=e,this.id=o.clientAttributeInstanceCount+++"C",this.valueChangeBus=new r.a,this.qualifierChangeBus=new r.a,this.setValue(n),this.setQualifier(t)}copy(){return new o(this.propertyName,this.getQualifier(),this.getValue())}setPresentationModel(e){if(this.presentationModel)throw new Error("You can not set a presentation model for an attribute that is already bound.");this.presentationModel=e}getPresentationModel(){return this.presentationModel}getValue(){return this.value}setValueFromServer(e){var t=o.checkValue(e);if(this.value!=t){var n=this.value;this.value=t,this.valueChangeBus.trigger({oldValue:n,newValue:t,sendToServer:!1})}}setValue(e){var t=o.checkValue(e);if(this.value!=t){var n=this.value;this.value=t,this.valueChangeBus.trigger({oldValue:n,newValue:t,sendToServer:!0})}}setQualifier(e){if(this.qualifier!=e){var t=this.qualifier;this.qualifier=e,this.qualifierChangeBus.trigger({oldValue:t,newValue:e}),this.valueChangeBus.trigger({oldValue:this.value,newValue:this.value,sendToServer:!1})}}getQualifier(){return this.qualifier}onValueChange(e){this.valueChangeBus.onEvent(e),e({oldValue:this.value,newValue:this.value,sendToServer:!1})}onQualifierChange(e){this.qualifierChangeBus.onEvent(e)}syncWith(e){e&&(this.setQualifier(e.getQualifier()),this.setValue(e.value))}static checkValue(e){if(null==e||void 0==e)return null;var t=e;(t instanceof String||t instanceof Boolean||t instanceof Number)&&(t=e.valueOf()),t instanceof o&&(console.log("An Attribute may not itself contain an attribute as a value. Assuming you forgot to call value."),t=this.checkValue(e.value));var n=!1;if((this.SUPPORTED_VALUE_TYPES.indexOf(typeof t)>-1||t instanceof Date)&&(n=!0),!n)throw new Error("Attribute values of this type are not allowed: "+typeof e);return t}}t.a=o,o.SUPPORTED_VALUE_TYPES=["string","number","boolean"],o.clientAttributeInstanceCount=0},function(e,t,n){"use strict";var r=n(89),o=n(23),a=n(18),i=n(17);t.a=class{constructor(e){this.clientDolphin=e,this.presentationModels=new Map,this.presentationModelsPerType=new Map,this.attributesPerId=new Map,this.attributesPerQualifier=new Map,this.modelStoreChangeBus=new o.a}getClientDolphin(){return this.clientDolphin}registerAttribute(e){this.addAttributeById(e),e.getQualifier()&&this.addAttributeByQualifier(e),e.onValueChange(t=>{if(t.newValue!=t.oldValue&&1==t.sendToServer){const n=a.a.createValueChangedCommand(e.id,t.newValue);this.clientDolphin.getClientConnector().send(n,null)}e.getQualifier()&&this.findAttributesByFilter(t=>t!==e&&t.getQualifier()==e.getQualifier()).forEach(t=>{t.setValue(e.getValue())})}),e.onQualifierChange(t=>{this.clientDolphin.getClientConnector().send(a.a.createChangeAttributeMetadataCommand(e.id,r.a.QUALIFIER_PROPERTY,t.newValue),null)})}add(e,t=!0){if(!e)return!1;this.presentationModels.has(e.id)&&console.log("There already is a PM with id "+e.id);var n=!1;return this.presentationModels.has(e.id)||(this.presentationModels.set(e.id,e),this.addPresentationModelByType(e),t&&this.clientDolphin.getClientConnector().send(a.a.createCreatePresentationModelCommand(e),null),e.getAttributes().forEach(e=>{this.registerAttribute(e)}),this.modelStoreChangeBus.trigger({eventType:i.a,clientPresentationModel:e}),n=!0),n}remove(e){if(!e)return!1;var t=!1;return this.presentationModels.has(e.id)&&(this.removePresentationModelByType(e),this.presentationModels.delete(e.id),e.getAttributes().forEach(e=>{this.removeAttributeById(e),e.getQualifier()&&this.removeAttributeByQualifier(e)}),this.modelStoreChangeBus.trigger({eventType:i.o,clientPresentationModel:e}),t=!0),t}findAttributesByFilter(e){var t=[];return this.presentationModels.forEach(n=>{n.getAttributes().forEach(n=>{e(n)&&t.push(n)})}),t}addPresentationModelByType(e){if(e){var t=e.presentationModelType;if(t){var n=this.presentationModelsPerType.get(t);n||(n=[],this.presentationModelsPerType.set(t,n)),n.indexOf(e)>-1||n.push(e)}}}removePresentationModelByType(e){if(e&&e.presentationModelType){var t=this.presentationModelsPerType.get(e.presentationModelType);t&&(t.length>-1&&t.splice(t.indexOf(e),1),0===t.length&&this.presentationModelsPerType.delete(e.presentationModelType))}}listPresentationModelIds(){for(var e=[],t=this.presentationModels.keys(),n=t.next();!n.done;)e.push(n.value),n=t.next();return e}listPresentationModels(){for(var e=[],t=this.presentationModels.values(),n=t.next();!n.done;)e.push(n.value),n=t.next();return e}findPresentationModelById(e){return this.presentationModels.get(e)}findAllPresentationModelByType(e){return e&&this.presentationModelsPerType.has(e)?this.presentationModelsPerType.get(e).slice(0):[]}deletePresentationModel(e,t){if(e&&this.containsPresentationModel(e.id)){if(this.remove(e),!t||e.clientSideOnly)return;this.clientDolphin.getClientConnector().send(a.a.createPresentationModelDeletedCommand(e.id),null)}}containsPresentationModel(e){return this.presentationModels.has(e)}addAttributeById(e){e&&!this.attributesPerId.has(e.id)&&this.attributesPerId.set(e.id,e)}removeAttributeById(e){e&&this.attributesPerId.has(e.id)&&this.attributesPerId.delete(e.id)}findAttributeById(e){return this.attributesPerId.get(e)}addAttributeByQualifier(e){if(e&&e.getQualifier()){var t=this.attributesPerQualifier.get(e.getQualifier());t||(t=[],this.attributesPerQualifier.set(e.getQualifier(),t)),t.indexOf(e)>-1||t.push(e)}}removeAttributeByQualifier(e){if(e&&e.getQualifier()){var t=this.attributesPerQualifier.get(e.getQualifier());t&&(t.length>-1&&t.splice(t.indexOf(e),1),0===t.length&&this.attributesPerQualifier.delete(e.getQualifier()))}}findAllAttributesByQualifier(e){return e&&this.attributesPerQualifier.has(e)?this.attributesPerQualifier.get(e).slice(0):[]}onModelStoreChange(e){this.modelStoreChangeBus.onEvent(e)}onModelStoreChangeForType(e,t){this.modelStoreChangeBus.onEvent(n=>{n.clientPresentationModel.presentationModelType==e&&t(n)})}}},function(e,t,n){"use strict";class r{}t.a=r,r.QUALIFIER_PROPERTY="qualifier",r.VALUE="value"},function(e,t,n){"use strict";var r=n(22);t.a=class{constructor(e,t=!0,n="UTF-8",o=null,a=!1,i=null){this.url=e,this.charset=n,this.HttpCodes={finished:4,success:200},this.errorHandler=o,this.supportCORS=a,this.headersInfo=i,this.http=new XMLHttpRequest,this.sig=new XMLHttpRequest,this.supportCORS&&"withCredentials"in this.http&&(this.http.withCredentials=!0,this.sig.withCredentials=!0),this.codec=new r.a,t&&(console.log("HttpTransmitter.invalidate() is deprecated. Use ClientDolphin.reset(OnSuccessHandler) instead"),this.invalidate())}transmit(e,t){this.http.onerror=(()=>{this.handleError("onerror",""),t([])}),this.http.onreadystatechange=(()=>{if(this.http.readyState==this.HttpCodes.finished)if(this.http.status==this.HttpCodes.success){var e=this.http.responseText;if(e.trim().length>0)try{var n=this.codec.decode(e);t(n)}catch(n){console.log("Error occurred parsing responseText: ",n),console.log("Incorrect responseText: ",e),this.handleError("application","HttpTransmitter: Incorrect responseText: "+e),t([])}else this.handleError("application","HttpTransmitter: empty responseText"),t([])}else this.handleError("application","HttpTransmitter: HTTP Status != 200"),t([])}),this.http.open("POST",this.url,!0),this.setHeaders(this.http),"overrideMimeType"in this.http&&this.http.overrideMimeType("application/json; charset="+this.charset),this.http.send(this.codec.encode(e))}setHeaders(e){if(this.headersInfo)for(var t in this.headersInfo)this.headersInfo.hasOwnProperty(t)&&e.setRequestHeader(t,this.headersInfo[t])}handleError(e,t){var n={kind:e,url:this.url,httpStatus:this.http.status,message:t};this.errorHandler?this.errorHandler(n):console.log("Error occurred: ",n)}signal(e){this.sig.open("POST",this.url,!0),this.setHeaders(this.sig),this.sig.send(this.codec.encode([e]))}invalidate(){this.http.open("POST",this.url+"invalidate?",!1),this.http.send()}}},function(e,t,n){"use strict";t.a=class{transmit(e,t){t([])}signal(){}reset(){}}},function(e,t,n){var r=n(27),o=n(28);e.exports=function(e){return function(t,n){var a,i,s=String(o(t)),c=r(n),l=s.length;return c<0||c>=l?e?"":void 0:(a=s.charCodeAt(c))<55296||a>56319||c+1===l||(i=s.charCodeAt(c+1))<56320||i>57343?e?s.charAt(c):a:e?s.slice(c,c+2):i-56320+(a-55296<<10)+65536}}},function(e,t,n){e.exports=!n(11)&&!n(19)(function(){return 7!=Object.defineProperty(n(30)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(5);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){e.exports=n(8)},function(e,t,n){"use strict";var r=n(59),o=n(58),a=n(20),i={};n(8)(i,n(3)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(i,{next:o(1,n)}),a(e,t+" Iterator")}},function(e,t,n){var r=n(9),o=n(10),a=n(98);e.exports=n(11)?Object.defineProperties:function(e,t){o(e);for(var n,i=a(t),s=i.length,c=0;s>c;)r.f(e,n=i[c++],t[n]);return e}},function(e,t,n){var r=n(99),o=n(62);e.exports=Object.keys||function(e){return r(e,o)}},function(e,t,n){var r=n(13),o=n(31),a=n(100)(!1),i=n(33)("IE_PROTO");e.exports=function(e,t){var n,s=o(e),c=0,l=[];for(n in s)n!=i&&r(s,n)&&l.push(n);for(;t.length>c;)r(s,n=t[c++])&&(~a(l,n)||l.push(n));return l}},function(e,t,n){var r=n(31),o=n(32),a=n(101);e.exports=function(e){return function(t,n,i){var s,c=r(t),l=o(c.length),d=a(i,l);if(e&&n!=n){for(;l>d;)if((s=c[d++])!=s)return!0}else for(;l>d;d++)if((e||d in c)&&c[d]===n)return e||d||0;return!e&&-1}}},function(e,t,n){var r=n(27),o=Math.max,a=Math.min;e.exports=function(e,t){return(e=r(e))<0?o(e+t,0):a(e,t)}},function(e,t,n){var r=n(13),o=n(64),a=n(33)("IE_PROTO"),i=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),r(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?i:null}},function(e,t,n){"use strict";var r=n(104),o=n(65),a=n(14),i=n(31);e.exports=n(29)(Array,"Array",function(e,t){this._t=i(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):o(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),a.Arguments=a.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t,n){"use strict";var r=n(66),o=n(39);e.exports=n(69)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=r.getEntry(o(this,"Map"),e);return t&&t.v},set:function(e,t){return r.def(o(this,"Map"),0===e?0:e,t)}},r,!0)},function(e,t,n){var r=n(10);e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(t){var a=e.return;throw void 0!==a&&r(a.call(e)),t}}},function(e,t,n){var r=n(14),o=n(3)("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||a[o]===e)}},function(e,t,n){var r=n(38),o=n(3)("iterator"),a=n(14);e.exports=n(6).getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||a[r(e)]}},function(e,t,n){var r=n(7),o=n(60),a=n(64),i=n(32),s=n(110);e.exports=function(e,t){var n=1==e,c=2==e,l=3==e,d=4==e,u=6==e,h=5==e||u,f=t||s;return function(t,s,p){for(var m,b,v=a(t),y=o(v),g=r(s,p,3),C=i(y.length),O=0,j=n?f(t,C):c?f(t,0):void 0;C>O;O++)if((h||O in y)&&(b=g(m=y[O],O,v),e))if(n)j[O]=b;else if(b)switch(e){case 3:return!0;case 5:return m;case 6:return O;case 2:j.push(m)}else if(d)return!1;return u?-1:l||d?d:j}}},function(e,t,n){var r=n(111);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(5),o=n(112),a=n(3)("species");e.exports=function(e){var t;return o(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!o(t.prototype)||(t=void 0),r(t)&&null===(t=t[a])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){var r=n(15);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(4);r(r.P+r.R,"Map",{toJSON:n(70)("Map")})},function(e,t,n){var r=n(16);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},function(e,t,n){n(71)("Map")},function(e,t,n){n(72)("Map")},function(e,t,n){"use strict";var r,o,a,i,s=n(57),c=n(2),l=n(7),d=n(38),u=n(4),h=n(5),f=n(12),p=n(37),m=n(16),b=n(73),v=n(74).set,y=n(119)(),g=n(41),C=n(75),O=n(76),j="Promise",w=c.TypeError,_=c.process,M=c[j],P="process"==d(_),A=function(){},E=o=g.f,x=!!function(){try{var e=M.resolve(1),t=(e.constructor={})[n(3)("species")]=function(e){e(A,A)};return(P||"function"==typeof PromiseRejectionEvent)&&e.then(A)instanceof t}catch(e){}}(),S=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},I=function(e,t){if(!e._n){e._n=!0;var n=e._c;y(function(){for(var r=e._v,o=1==e._s,a=0,i=function(t){var n,a,i=o?t.ok:t.fail,s=t.resolve,c=t.reject,l=t.domain;try{i?(o||(2==e._h&&B(e),e._h=1),!0===i?n=r:(l&&l.enter(),n=i(r),l&&l.exit()),n===t.promise?c(w("Promise-chain cycle")):(a=S(n))?a.call(n,s,c):s(n)):c(r)}catch(e){c(e)}};n.length>a;)i(n[a++]);e._c=[],e._n=!1,t&&!e._h&&T(e)})}},T=function(e){v.call(c,function(){var t,n,r,o=e._v,a=R(e);if(a&&(t=C(function(){P?_.emit("unhandledRejection",o,e):(n=c.onunhandledrejection)?n({promise:e,reason:o}):(r=c.console)&&r.error&&r.error("Unhandled promise rejection",o)}),e._h=P||R(e)?2:1),e._a=void 0,a&&t.e)throw t.v})},R=function(e){return 1!==e._h&&0===(e._a||e._c).length},B=function(e){v.call(c,function(){var t;P?_.emit("rejectionHandled",e):(t=c.onrejectionhandled)&&t({promise:e,reason:e._v})})},N=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),I(t,!0))},D=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw w("Promise can't be resolved itself");(t=S(e))?y(function(){var r={_w:n,_d:!1};try{t.call(e,l(D,r,1),l(N,r,1))}catch(e){N.call(r,e)}}):(n._v=e,n._s=1,I(n,!1))}catch(e){N.call({_w:n,_d:!1},e)}}};x||(M=function(e){p(this,M,j,"_h"),f(e),r.call(this);try{e(l(D,this,1),l(N,this,1))}catch(e){N.call(this,e)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(36)(M.prototype,{then:function(e,t){var n=E(b(this,M));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=P?_.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&I(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),a=function(){var e=new r;this.promise=e,this.resolve=l(D,e,1),this.reject=l(N,e,1)},g.f=E=function(e){return e===M||e===i?new a(e):o(e)}),u(u.G+u.W+u.F*!x,{Promise:M}),n(20)(M,j),n(67)(j),i=n(6)[j],u(u.S+u.F*!x,j,{reject:function(e){var t=E(this);return(0,t.reject)(e),t.promise}}),u(u.S+u.F*(s||!x),j,{resolve:function(e){return O(s&&this===i?M:this,e)}}),u(u.S+u.F*!(x&&n(120)(function(e){M.all(e).catch(A)})),j,{all:function(e){var t=this,n=E(t),r=n.resolve,o=n.reject,a=C(function(){var n=[],a=0,i=1;m(e,!1,function(e){var s=a++,c=!1;n.push(void 0),i++,t.resolve(e).then(function(e){c||(c=!0,n[s]=e,--i||r(n))},o)}),--i||r(n)});return a.e&&o(a.v),n.promise},race:function(e){var t=this,n=E(t),r=n.reject,o=C(function(){m(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return o.e&&r(o.v),n.promise}})},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(2),o=n(74).set,a=r.MutationObserver||r.WebKitMutationObserver,i=r.process,s=r.Promise,c="process"==n(15)(i);e.exports=function(){var e,t,n,l=function(){var r,o;for(c&&(r=i.domain)&&r.exit();e;){o=e.fn,e=e.next;try{o()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(c)n=function(){i.nextTick(l)};else if(!a||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var d=s.resolve();n=function(){d.then(l)}}else n=function(){o.call(r,l)};else{var u=!0,h=document.createTextNode("");new a(l).observe(h,{characterData:!0}),n=function(){h.data=u=!u}}return function(r){var o={fn:r,next:void 0};t&&(t.next=o),e||(e=o,n()),t=o}}},function(e,t,n){var r=n(3)("iterator"),o=!1;try{var a=[7][r]();a.return=function(){o=!0},Array.from(a,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var a=[7],i=a[r]();i.next=function(){return{done:n=!0}},a[r]=function(){return i},e(a)}catch(e){}return n}},function(e,t,n){"use strict";var r=n(4),o=n(6),a=n(2),i=n(73),s=n(76);r(r.P+r.R,"Promise",{finally:function(e){var t=i(this,o.Promise||a.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then(function(){return n})}:e,n?function(n){return s(t,e()).then(function(){throw n})}:e)}})},function(e,t,n){"use strict";var r=n(4),o=n(41),a=n(75);r(r.S,"Promise",{try:function(e){var t=o.f(this),n=a(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){"use strict";var r=n(24),o=n.n(r),a=n(0);t.a=class{constructor(e){Object(a.a)("BeanManager(classRepository)"),Object(a.b)(e,"classRepository"),this.classRepository=e,this.addedHandlers=new o.a,this.removedHandlers=new o.a,this.updatedHandlers=new o.a,this.arrayUpdatedHandlers=new o.a,this.allAddedHandlers=[],this.allRemovedHandlers=[],this.allUpdatedHandlers=[],this.allArrayUpdatedHandlers=[];let t=this;this.classRepository.onBeanAdded((e,n)=>{let r=t.addedHandlers.get(e);Object(a.c)(r)&&r.forEach(t=>{try{t(n)}catch(t){console.warn("An exception occurred while calling an onBeanAdded-handler for type",e,t)}}),t.allAddedHandlers.forEach(e=>{try{e(n)}catch(e){console.warn("An exception occurred while calling a general onBeanAdded-handler",e)}})}),this.classRepository.onBeanRemoved((e,n)=>{let r=t.removedHandlers.get(e);Object(a.c)(r)&&r.forEach(t=>{try{t(n)}catch(t){console.warn("An exception occurred while calling an onBeanRemoved-handler for type",e,t)}}),t.allRemovedHandlers.forEach(e=>{try{e(n)}catch(e){console.warn("An exception occurred while calling a general onBeanRemoved-handler",e)}})}),this.classRepository.onBeanUpdate((e,n,r,o,i)=>{let s=t.updatedHandlers.get(e);Object(a.c)(s)&&s.forEach(t=>{try{t(n,r,o,i)}catch(t){console.warn("An exception occurred while calling an onBeanUpdate-handler for type",e,t)}}),t.allUpdatedHandlers.forEach(e=>{try{e(n,r,o,i)}catch(e){console.warn("An exception occurred while calling a general onBeanUpdate-handler",e)}})}),this.classRepository.onArrayUpdate((e,n,r,o,i,s)=>{let c=t.arrayUpdatedHandlers.get(e);Object(a.c)(c)&&c.forEach(t=>{try{t(n,r,o,i,s)}catch(t){console.warn("An exception occurred while calling an onArrayUpdate-handler for type",e,t)}}),t.allArrayUpdatedHandlers.forEach(e=>{try{e(n,r,o,i,s)}catch(e){console.warn("An exception occurred while calling a general onArrayUpdate-handler",e)}})})}notifyBeanChange(e,t,n){return Object(a.a)("BeanManager.notifyBeanChange(bean, propertyName, newValue)"),Object(a.b)(e,"bean"),Object(a.b)(t,"propertyName"),this.classRepository.notifyBeanChange(e,t,n)}notifyArrayChange(e,t,n,r,o){Object(a.a)("BeanManager.notifyArrayChange(bean, propertyName, index, count, removedElements)"),Object(a.b)(e,"bean"),Object(a.b)(t,"propertyName"),Object(a.b)(n,"index"),Object(a.b)(r,"count"),Object(a.b)(o,"removedElements"),this.classRepository.notifyArrayChange(e,t,n,r,o)}isManaged(e){throw Object(a.a)("BeanManager.isManaged(bean)"),Object(a.b)(e,"bean"),new Error("Not implemented yet")}create(e){throw Object(a.a)("BeanManager.create(type)"),Object(a.b)(e,"type"),new Error("Not implemented yet")}add(e,t){throw Object(a.a)("BeanManager.add(type, bean)"),Object(a.b)(e,"type"),Object(a.b)(t,"bean"),new Error("Not implemented yet")}addAll(e,t){throw Object(a.a)("BeanManager.addAll(type, collection)"),Object(a.b)(e,"type"),Object(a.b)(t,"collection"),new Error("Not implemented yet")}remove(e){throw Object(a.a)("BeanManager.remove(bean)"),Object(a.b)(e,"bean"),new Error("Not implemented yet")}removeAll(e){throw Object(a.a)("BeanManager.removeAll(collection)"),Object(a.b)(e,"collection"),new Error("Not implemented yet")}removeIf(e){throw Object(a.a)("BeanManager.removeIf(predicate)"),Object(a.b)(e,"predicate"),new Error("Not implemented yet")}onAdded(e,t){let n=this;if(Object(a.c)(t)){Object(a.a)("BeanManager.onAdded(type, eventHandler)"),Object(a.b)(e,"type"),Object(a.b)(t,"eventHandler");var r=n.addedHandlers.get(e);return Object(a.c)(r)||(r=[]),n.addedHandlers.set(e,r.concat(t)),{unsubscribe:()=>{var r=n.addedHandlers.get(e);Object(a.c)(r)&&n.addedHandlers.set(e,r.filter(function(e){return e!==t}))}}}return t=e,Object(a.a)("BeanManager.onAdded(eventHandler)"),Object(a.b)(t,"eventHandler"),n.allAddedHandlers=n.allAddedHandlers.concat(t),{unsubscribe:function(){n.allAddedHandlers=n.allAddedHandlers.filter(e=>e!==t)}}}onRemoved(e,t){let n=this;if(Object(a.c)(t)){Object(a.a)("BeanManager.onRemoved(type, eventHandler)"),Object(a.b)(e,"type"),Object(a.b)(t,"eventHandler");var r=n.removedHandlers.get(e);return Object(a.c)(r)||(r=[]),n.removedHandlers.set(e,r.concat(t)),{unsubscribe:()=>{var r=n.removedHandlers.get(e);Object(a.c)(r)&&n.removedHandlers.set(e,r.filter(e=>e!==t))}}}return t=e,Object(a.a)("BeanManager.onRemoved(eventHandler)"),Object(a.b)(t,"eventHandler"),n.allRemovedHandlers=n.allRemovedHandlers.concat(t),{unsubscribe:()=>{n.allRemovedHandlers=n.allRemovedHandlers.filter(e=>e!==t)}}}onBeanUpdate(e,t){let n=this;if(Object(a.c)(t)){Object(a.a)("BeanManager.onBeanUpdate(type, eventHandler)"),Object(a.b)(e,"type"),Object(a.b)(t,"eventHandler");var r=n.updatedHandlers.get(e);return Object(a.c)(r)||(r=[]),n.updatedHandlers.set(e,r.concat(t)),{unsubscribe:()=>{var r=n.updatedHandlers.get(e);Object(a.c)(r)&&n.updatedHandlers.set(e,r.filter(e=>e!==t))}}}return t=e,Object(a.a)("BeanManager.onBeanUpdate(eventHandler)"),Object(a.b)(t,"eventHandler"),n.allUpdatedHandlers=n.allUpdatedHandlers.concat(t),{unsubscribe:function(){n.allUpdatedHandlers=n.allUpdatedHandlers.filter(e=>e!==t)}}}onArrayUpdate(e,t){let n=this;if(Object(a.c)(t)){Object(a.a)("BeanManager.onArrayUpdate(type, eventHandler)"),Object(a.b)(e,"type"),Object(a.b)(t,"eventHandler");var r=n.arrayUpdatedHandlers.get(e);return Object(a.c)(r)||(r=[]),n.arrayUpdatedHandlers.set(e,r.concat(t)),{unsubscribe:()=>{var r=n.arrayUpdatedHandlers.get(e);Object(a.c)(r)&&n.arrayUpdatedHandlers.set(e,r.filter(e=>e!==t))}}}return t=e,Object(a.a)("BeanManager.onArrayUpdate(eventHandler)"),Object(a.b)(t,"eventHandler"),n.allArrayUpdatedHandlers=n.allArrayUpdatedHandlers.concat(t),{unsubscribe:()=>{n.allArrayUpdatedHandlers=n.allArrayUpdatedHandlers.filter(e=>e!==t)}}}}},function(e,t,n){"use strict";var r=n(24),o=n.n(r),a=n(17),i=n(0),s=null;t.a=class{constructor(e){Object(i.a)("ClassRepository(dolphin)"),Object(i.b)(e,"dolphin"),this.dolphin=e,this.classes=new o.a,this.beanFromDolphin=new o.a,this.beanToDolphin=new o.a,this.classInfos=new o.a,this.beanAddedHandlers=[],this.beanRemovedHandlers=[],this.propertyUpdateHandlers=[],this.arrayUpdateHandlers=[]}fixType(e,t){switch(e){case a.c:case a.p:case a.j:case a.n:return parseInt(t);case a.i:case a.g:return parseFloat(t);case a.b:return"true"===String(t).toLowerCase();case a.q:case a.h:return String(t);default:return t}}fromDolphin(e,t,n){if(!Object(i.c)(n))return null;switch(t){case a.f:return e.beanFromDolphin.get(String(n));case a.e:case a.d:case a.l:case a.m:case a.r:return new Date(String(n));default:return this.fixType(t,n)}}toDolphin(e,t,n){if(!Object(i.c)(n))return null;switch(t){case a.f:return e.beanToDolphin.get(n);case a.e:case a.d:case a.l:case a.m:case a.r:return n instanceof Date?n.toISOString():n;default:return this.fixType(t,n)}}sendListSplice(e,t,n,r,o,a){let s=e.dolphin,c=s.findPresentationModelById(t),l=this;if(Object(i.c)(c)){let d=e.classes.get(c.presentationModelType)[n];if(Object(i.c)(d)){let i=[s.attribute("@@@ SOURCE_SYSTEM @@@",null,"client"),s.attribute("source",null,t),s.attribute("attribute",null,n),s.attribute("from",null,r),s.attribute("to",null,o),s.attribute("count",null,a.length)];a.forEach(function(t,n){i.push(s.attribute(n.toString(),null,l.toDolphin(e,d,t)))}),s.presentationModel.apply(s,[null,"@DP:LS@"].concat(i))}}}validateList(e,t,n,r){let o=n[r];Object(i.c)(o)||e.propertyUpdateHandlers.forEach(function(e){try{e(t,n,r,[],void 0)}catch(e){console.warn("An exception occurred while calling an onBeanUpdate-handler",e)}})}block(e,t){if(Object(i.c)(s))throw new Error("Trying to create a block while another block exists");s={bean:e,propertyName:t}}isBlocked(e,t){return Object(i.c)(s)&&s.bean===e&&s.propertyName===t}unblock(){s=null}notifyBeanChange(e,t,n){Object(i.a)("ClassRepository.notifyBeanChange(bean, propertyName, newValue)"),Object(i.b)(e,"bean"),Object(i.b)(t,"propertyName");let r=this.beanToDolphin.get(e);if(Object(i.c)(r)){let e=this.dolphin.findPresentationModelById(r);if(Object(i.c)(e)){let r=this.classes.get(e.presentationModelType)[t],o=e.findAttributeByPropertyName(t);if(Object(i.c)(r)&&Object(i.c)(o)){let e=o.getValue();return o.setValue(this.toDolphin(this,r,n)),this.fromDolphin(this,r,e)}}}}notifyArrayChange(e,t,n,r,o){if(Object(i.a)("ClassRepository.notifyArrayChange(bean, propertyName, index, count, removedElements)"),Object(i.b)(e,"bean"),Object(i.b)(t,"propertyName"),Object(i.b)(n,"index"),Object(i.b)(r,"count"),Object(i.b)(o,"removedElements"),this.isBlocked(e,t))return;let a=this.beanToDolphin.get(e),s=e[t];if(Object(i.c)(a)&&Object(i.c)(s)){let e=Array.isArray(o)?o.length:0;this.sendListSplice(this,a,t,n,n+e,s.slice(n,n+r))}}onBeanAdded(e){Object(i.a)("ClassRepository.onBeanAdded(handler)"),Object(i.b)(e,"handler"),this.beanAddedHandlers.push(e)}onBeanRemoved(e){Object(i.a)("ClassRepository.onBeanRemoved(handler)"),Object(i.b)(e,"handler"),this.beanRemovedHandlers.push(e)}onBeanUpdate(e){Object(i.a)("ClassRepository.onBeanUpdate(handler)"),Object(i.b)(e,"handler"),this.propertyUpdateHandlers.push(e)}onArrayUpdate(e){Object(i.a)("ClassRepository.onArrayUpdate(handler)"),Object(i.b)(e,"handler"),this.arrayUpdateHandlers.push(e)}registerClass(e){if(Object(i.a)("ClassRepository.registerClass(model)"),Object(i.b)(e,"model"),this.classes.has(e.id))return;let t={};e.attributes.filter(function(e){return e.propertyName.search(/^@/)<0}).forEach(function(e){t[e.propertyName]=e.value}),this.classes.set(e.id,t)}unregisterClass(e){Object(i.a)("ClassRepository.unregisterClass(model)"),Object(i.b)(e,"model"),this.classes.delete(e.id)}load(e){Object(i.a)("ClassRepository.load(model)"),Object(i.b)(e,"model");var t=this,n=this.classes.get(e.presentationModelType),r={};return e.attributes.filter(function(e){return e.propertyName.search(/^@/)<0}).forEach(function(o){r[o.propertyName]=null,o.onValueChange(function(a){if(a.oldValue!==a.newValue){let i=t.fromDolphin(t,n[o.propertyName],a.oldValue),s=t.fromDolphin(t,n[o.propertyName],a.newValue);t.propertyUpdateHandlers.forEach(t=>{try{t(e.presentationModelType,r,o.propertyName,s,i)}catch(e){console.warn("An exception occurred while calling an onBeanUpdate-handler",e)}})}})}),this.beanFromDolphin.set(e.id,r),this.beanToDolphin.set(r,e.id),this.classInfos.set(e.id,n),this.beanAddedHandlers.forEach(t=>{try{t(e.presentationModelType,r)}catch(e){console.warn("An exception occurred while calling an onBeanAdded-handler",e)}}),r}unload(e){Object(i.a)("ClassRepository.unload(model)"),Object(i.b)(e,"model");let t=this.beanFromDolphin.get(e.id);return this.beanFromDolphin.delete(e.id),this.beanToDolphin.delete(t),this.classInfos.delete(e.id),Object(i.c)(t)&&this.beanRemovedHandlers.forEach(n=>{try{n(e.presentationModelType,t)}catch(e){console.warn("An exception occurred while calling an onBeanRemoved-handler",e)}}),t}spliceListEntry(e){Object(i.a)("ClassRepository.spliceListEntry(model)"),Object(i.b)(e,"model");let t=e.findAttributeByPropertyName("source"),n=e.findAttributeByPropertyName("attribute"),r=e.findAttributeByPropertyName("from"),o=e.findAttributeByPropertyName("to"),a=e.findAttributeByPropertyName("count");if(!(Object(i.c)(t)&&Object(i.c)(n)&&Object(i.c)(r)&&Object(i.c)(o)&&Object(i.c)(a)))throw new Error("Invalid list modification update received");var s=this.classInfos.get(t.value),c=this.beanFromDolphin.get(t.value);if(!Object(i.c)(c)||!Object(i.c)(s))throw new Error("Invalid list modification update received. Source bean unknown.");{let t=e.presentationModelType;this.validateList(this,t,c,n.value);for(var l=[],d=null,u=0;u<a.value;u++){if(d=e.findAttributeByPropertyName(u.toString()),!Object(i.c)(d))throw new Error("Invalid list modification update received");l.push(this.fromDolphin(this,s[n.value],d.value))}try{this.block(c,n.value),this.arrayUpdateHandlers.forEach(e=>{try{e(t,c,n.value,r.value,o.value-r.value,l)}catch(e){console.warn("An exception occurred while calling an onArrayUpdate-handler",e)}})}finally{this.unblock()}}}mapParamToDolphin(e){if(!Object(i.c)(e))return e;let t=typeof e;if("object"===t){if(e instanceof Date)return e.toISOString();{let t=this.beanToDolphin.get(e);if(Object(i.c)(t))return t;throw new TypeError("Only managed Dolphin Beans can be used")}}if("string"===t||"number"===t||"boolean"===t)return e;throw new TypeError("Only managed Dolphin Beans and primitive types can be used")}mapDolphinToBean(e){return this.fromDolphin(this,a.f,e)}}},function(e,t,n){"use strict";var r=n(40),o=n.n(r),a=n(77),i=n.n(a),s=n(0),c=n(130),l=n(18),d=n(21);const u="controllerId",h="model",f="errorCode";t.a=class{constructor(e,t,n){Object(s.a)("ControllerManager(dolphin, classRepository, connector)"),Object(s.b)(e,"dolphin"),Object(s.b)(t,"classRepository"),Object(s.b)(n,"connector"),this.dolphin=e,this.classRepository=t,this.connector=n,this.controllers=new i.a}createController(e){return this._createController(e,null)}_createController(e,t){Object(s.a)("ControllerManager.createController(name)"),Object(s.b)(e,"name");let n,r,a,i,d=this;return new o.a(o=>{d.connector.getHighlanderPM().then(s=>{d.connector.invoke(l.a.createCreateControllerCommand(e,t)).then(()=>{n=s.findAttributeByPropertyName(u).getValue(),r=s.findAttributeByPropertyName(h).getValue(),a=d.classRepository.mapDolphinToBean(r),i=new c.a(n,a,d),d.controllers.add(i),o(i)})})})}invokeAction(e,t,n){Object(s.a)("ControllerManager.invokeAction(controllerId, actionName, params)"),Object(s.b)(e,"controllerId"),Object(s.b)(t,"actionName");let r=this;return new o.a((o,a)=>{let i=[r.dolphin.attribute(d.b,null,d.c),r.dolphin.attribute(f)],c=r.dolphin.presentationModel.apply(r.dolphin,[null,d.a].concat(i)),u=[];if(Object(s.c)(n))for(var h in n)if(n.hasOwnProperty(h)){let e=r.classRepository.mapParamToDolphin(n[h]);u.push({name:h,value:e})}r.connector.invoke(l.a.createCallActionCommand(e,t,u)).then(()=>{c.findAttributeByPropertyName(f).getValue()?a(new Error("Server side ControllerAction "+t+" caused an error. Please see server log for details.")):o(),r.dolphin.deletePresentationModel(c)})})}destroyController(e){Object(s.a)("ControllerManager.destroyController(controller)"),Object(s.b)(e,"controller");let t=this;return new o.a(n=>{t.connector.getHighlanderPM().then(r=>{t.controllers.delete(e),r.findAttributeByPropertyName(u).setValue(e.controllerId),t.connector.invoke(l.a.createDestroyControllerCommand(e.getId())).then(n)})})}destroy(){let e=this.controllers,t=[];return this.controllers=new i.a,e.forEach(e=>{try{t.push(e.destroy())}catch(e){}}),o.a.all(t)}}},function(e,t,n){"use strict";var r=n(66),o=n(39);e.exports=n(69)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(o(this,"Set"),e=0===e?0:e,e)}},r)},function(e,t,n){var r=n(4);r(r.P+r.R,"Set",{toJSON:n(70)("Set")})},function(e,t,n){n(71)("Set")},function(e,t,n){n(72)("Set")},function(e,t,n){"use strict";var r=n(77),o=n.n(r),a=n(0);t.a=class{constructor(e,t,n){Object(a.a)("ControllerProxy(controllerId, model, manager)"),Object(a.b)(e,"controllerId"),Object(a.b)(t,"model"),Object(a.b)(n,"manager"),this.controllerId=e,this.model=t,this.manager=n,this.destroyed=!1,this.onDestroyedHandlers=new o.a}getModel(){return this.model}getId(){return this.controllerId}invoke(e,t){if(Object(a.a)("ControllerProxy.invoke(name, params)"),Object(a.b)(e,"name"),this.destroyed)throw new Error("The controller was already destroyed");return this.manager.invokeAction(this.controllerId,e,t)}createController(e){return this.manager._createController(e,this.getId())}destroy(){if(this.destroyed)throw new Error("The controller was already destroyed");return this.destroyed=!0,this.onDestroyedHandlers.forEach(e=>{try{e(this)}catch(e){console.warn("An exception occurred while calling an onDestroyed-handler",e)}},this),this.manager.destroyController(this)}onDestroyed(e){Object(a.a)("ControllerProxy.onDestroyed(handler)"),Object(a.b)(e,"handler");var t=this;return this.onDestroyedHandlers.add(e),{unsubscribe:()=>{t.onDestroyedHandlers.delete(e)}}}}},function(e,t,n){"use strict";var r=n(78),o=n.n(r),a=n(40),i=n.n(a),s=n(18),c=n(0);class l{constructor(e,t,n,r){Object(c.a)("ClientContext(dolphin, beanManager, controllerManager, connector)"),Object(c.b)(e,"dolphin"),Object(c.b)(t,"beanManager"),Object(c.b)(n,"controllerManager"),Object(c.b)(r,"connector"),this.dolphin=e,this.beanManager=t,this._controllerManager=n,this._connector=r,this.connectionPromise=null,this.isConnected=!1}connect(){let e=this;return this.connectionPromise=new i.a(t=>{e._connector.connect(),e._connector.invoke(s.a.createCreateContextCommand()).then(()=>{e.isConnected=!0,t()})}),this.connectionPromise}onConnect(){return Object(c.c)(this.connectionPromise)?this.isConnected?new i.a(e=>{e()}):this.connectionPromise:this.connect()}createController(e){return Object(c.a)("ClientContext.createController(name)"),Object(c.b)(e,"name"),this._controllerManager.createController(e)}disconnect(){let e=this;return this.dolphin.stopPushListening(),new i.a(t=>{e._controllerManager.destroy().then(()=>{e._connector.invoke(s.a.createDestroyContextCommand()),e.dolphin=null,e.beanManager=null,e._controllerManager=null,e._connector=null,t()})})}}t.a=l,o()(l.prototype)},function(e,t,n){"use strict";var r=n(78),o=n.n(r),a=n(0),i=n(133),s=n(22),c=n(134);const l=4,d=200,u=408,h="dolphin_platform_intern_dolphinClientId";class f{constructor(e,t){this.url=e,this.config=t,this.headersInfo=Object(a.c)(t)?t.headersInfo:null;let n=Object(a.c)(t)?t.connection:null;this.maxRetry=Object(a.c)(n)&&Object(a.c)(n.maxRetry)?n.maxRetry:3,this.timeout=Object(a.c)(n)&&Object(a.c)(n.timeout)?n.timeout:5e3,this.failed_attempt=0}_handleError(e,t){let n=Object(a.c)(this.config)?this.config.connection:null;(Object(a.c)(n)&&Object(a.c)(n.errorHandlers)?n.errorHandlers:[new c.a]).forEach(function(e){e.onError(t)}),e(t)}_send(e){return new Promise((t,n)=>{const r=new XMLHttpRequest;if(r.withCredentials=!0,r.onerror=(e=>{this._handleError(n,new i.c("PlatformHttpTransmitter: Network error",e))}),r.onreadystatechange=(()=>{if(r.readyState===l)switch(r.status){case d:{this.failed_attempt=0;const e=r.getResponseHeader(h);Object(a.c)(e)?(Object(a.c)(this.clientId)&&this.clientId!==e&&this._handleError(n,new i.b("PlatformHttpTransmitter: ClientId of the response did not match")),this.clientId=e):this._handleError(n,new i.b("PlatformHttpTransmitter: Server did not send a clientId")),t(r.responseText);break}case u:this._handleError(n,new i.b("PlatformHttpTransmitter: Session Timeout"));break;default:this.failed_attempt<=this.maxRetry&&(this.failed_attempt=this.failed_attempt+1),this._handleError(n,new i.d("PlatformHttpTransmitter: HTTP Status != 200 ("+r.status+")"))}}),r.open("POST",this.url),Object(a.c)(this.clientId)&&r.setRequestHeader(h,this.clientId),Object(a.c)(this.headersInfo))for(var o in this.headersInfo)this.headersInfo.hasOwnProperty(o)&&r.setRequestHeader(o,this.headersInfo[o]);this.failed_attempt>this.maxRetry?setTimeout(function(){r.send(s.a.encode(e))},this.timeout):r.send(s.a.encode(e))})}transmit(e,t){this._send(e).then(e=>{if(e.trim().length>0)try{const n=s.a.decode(e);t(n)}catch(n){this.emit("error",new i.a("PlatformHttpTransmitter: Parse error: (Incorrect response = "+e+")")),t([])}else this.emit("error",new i.a("PlatformHttpTransmitter: Empty response")),t([])}).catch(e=>{this.emit("error",e),t([])})}signal(e){this._send([e]).catch(e=>this.emit("error",e))}}t.a=f,o()(f.prototype)},function(e,t,n){"use strict";t.a=class extends Error{constructor(e="Remoting Error",t){super(e),this.detail=t||void 0}};t.b=class extends Error{constructor(e="Session Error"){super(e)}};t.d=class extends Error{constructor(e="Http Response Error"){super(e)}};t.c=class extends Error{constructor(e="Http Network Error"){super(e)}}},function(e,t,n){"use strict";t.a=class{onError(e){window.console.error(e)}}}])});
//# sourceMappingURL=dolphin-platform.min.js.map